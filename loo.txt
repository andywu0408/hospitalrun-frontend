

DO NOT EVER ADD “WORKSPACE IN FILE PATH, start with src folder!” DO NOT ADD EM DASH! MUST CITE 5 real files in each section especially ideal answer!

Make sure to obey these 100% “

-  All answers should have  5+ meaningful sentences and clear as well 
- Adding a few file references in the feedback section could strength the answer.
- The ideal response could benefit from a dedicated file-list section summarizing all referenced files together.
- Adding separate strength and weakness points inside summaries would enhance readability and make the evaluation feel more complete.


1.new task, question is: “What are the major frontend optimization techniques implemented throughout the web app?




2.here is model A's response:    
bash
command
find /tmp/inputs/hospitalrun-frontend -type f -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.json" | head -50
output
/tmp/inputs/hospitalrun-frontend/jest.config.js
/tmp/inputs/hospitalrun-frontend/package.json
/tmp/inputs/hospitalrun-frontend/.eslintrc.js
/tmp/inputs/hospitalrun-frontend/commitlint.config.js
/tmp/inputs/hospitalrun-frontend/tsconfig.json
/tmp/inputs/hospitalrun-frontend/src/index.tsx
/tmp/inputs/hospitalrun-frontend/src/App.tsx
/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
/tmp/inputs/hospitalrun-frontend/src/custom-pouchdb.d.ts
/tmp/inputs/hospitalrun-frontend/src/react-app-env.d.ts
/tmp/inputs/hospitalrun-frontend/src/setupTests.js
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/IncidentFilter.ts
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/model/IncidentSearchRequest.ts
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/util/validate-incident.ts
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/model/ImagingSearchRequest.ts
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/util/validate-imaging-request.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/Breadcrumbs.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/breadcrumbs-slice.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonToolBar.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/App.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/HospitalRun.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidents.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncident.test.tsx


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend, excluding hidden items and node_modules:
113M	/tmp/inputs/hospitalrun-frontend
79K	/tmp/inputs/hospitalrun-frontend/CHANGELOG.md
1.5K	/tmp/inputs/hospitalrun-frontend/LICENSE
3.0K	/tmp/inputs/hospitalrun-frontend/README.md
1.5K	/tmp/inputs/hospitalrun-frontend/SECURITY.md
3.0K	/tmp/inputs/hospitalrun-frontend/azure.yaml
512	/tmp/inputs/hospitalrun-frontend/commitlint.config.js
3.0K	/tmp/inputs/hospitalrun-frontend/couchdb
512	/tmp/inputs/hospitalrun-frontend/couchdb/Dockerfile
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-cleanup.bat
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-cleanup.sh
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-init.bat
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-init.sh
512	/tmp/inputs/hospitalrun-frontend/couchdb/local.ini
1.5K	/tmp/inputs/hospitalrun-frontend/docker-compose.yml
512	/tmp/inputs/hospitalrun-frontend/docs
512	/tmp/inputs/hospitalrun-frontend/docs/index.md
512	/tmp/inputs/hospitalrun-frontend/jest.config.js
512	/tmp/inputs/hospitalrun-frontend/mkdocs.yml
512	/tmp/inputs/hospitalrun-frontend/nginx.conf
5.5K	/tmp/inputs/hospitalrun-frontend/package.json
20K	/tmp/inputs/hospitalrun-frontend/public
1.5K	/tmp/inputs/hospitalrun-frontend/public/favicon.ico
2.0K	/tmp/inputs/hospitalrun-frontend/public/index.html
16K	/tmp/inputs/hospitalrun-frontend/public/logo.png
512	/tmp/inputs/hospitalrun-frontend/public/manifest.json
512	/tmp/inputs/hospitalrun-frontend/public/robots.txt
3.5K	/tmp/inputs/hospitalrun-frontend/scripts
2.5K	/tmp/inputs/hospitalrun-frontend/scripts/check-translations
512	/tmp/inputs/hospitalrun-frontend/scripts/tsconfig.json
1.2M	/tmp/inputs/hospitalrun-frontend/src
2.0K	/tmp/inputs/hospitalrun-frontend/src/App.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/__mocks__
564K	/tmp/inputs/hospitalrun-frontend/src/__tests__
1.5K	/tmp/inputs/hospitalrun-frontend/src/custom-pouchdb.d.ts
512	/tmp/inputs/hospitalrun-frontend/src/dashboard
17K	/tmp/inputs/hospitalrun-frontend/src/imagings
29K	/tmp/inputs/hospitalrun-frontend/src/incidents
2.0K	/tmp/inputs/hospitalrun-frontend/src/index.css
1.0K	/tmp/inputs/hospitalrun-frontend/src/index.tsx
28K	/tmp/inputs/hospitalrun-frontend/src/labs
36K	/tmp/inputs/hospitalrun-frontend/src/medications
6.5K	/tmp/inputs/hospitalrun-frontend/src/page-header
192K	/tmp/inputs/hospitalrun-frontend/src/patients
512	/tmp/inputs/hospitalrun-frontend/src/react-app-env.d.ts
30K	/tmp/inputs/hospitalrun-frontend/src/scheduling
5.5K	/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/settings
1.0K	/tmp/inputs/hospitalrun-frontend/src/setupTests.js
254K	/tmp/inputs/hospitalrun-frontend/src/shared
4.0K	/tmp/inputs/hospitalrun-frontend/src/user
1.0K	/tmp/inputs/hospitalrun-frontend/tsconfig.json



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/package.json
output
Here's the content of /tmp/inputs/hospitalrun-frontend/package.json with line numbers:
1	{
2	  "name": "@hospitalrun/frontend",
3	  "version": "2.0.0-alpha.7",
4	  "description": "React frontend for HospitalRun",
5	  "private": false,
6	  "license": "MIT",
7	  "dependencies": {
8	    "@hospitalrun/components": "~3.4.0",
9	    "@reduxjs/toolkit": "~1.7.0",
10	    "@types/escape-string-regexp": "~2.0.1",
11	    "@types/json2csv": "~5.0.1",
12	    "@types/pouchdb-find": "~6.3.4",
13	    "bootstrap": "~5.1.0",
14	    "date-fns": "~2.28.0",
15	    "escape-string-regexp": "~4.0.0",
16	    "i18next": "~21.6.0",
17	    "i18next-browser-languagedetector": "~6.1.0",
18	    "i18next-xhr-backend": "~3.2.2",
19	    "json2csv": "~5.0.1",
20	    "lodash": "^4.17.15",
21	    "node-sass": "~7.0.0",
22	    "pouchdb": "~7.2.1",
23	    "pouchdb-adapter-memory": "~7.2.1",
24	    "pouchdb-authentication": "~1.1.3",
25	    "pouchdb-find": "~7.2.1",
26	    "pouchdb-quick-search": "~1.3.0",
27	    "react": "~17.0.1",
28	    "react-bootstrap": "~1.6.0",
29	    "react-bootstrap-typeahead": "~5.2.0",
30	    "react-dom": "~16.13.0",
31	    "react-i18next": "~11.15.0",
32	    "react-query": "~2.25.2",
33	    "react-query-devtools": "~2.6.0",
34	    "react-redux": "~7.2.0",
35	    "react-router": "~5.2.0",
36	    "react-router-dom": "~5.3.0",
37	    "react-scripts": "~3.4.0",
38	    "redux": "~4.1.0",
39	    "redux-thunk": "~2.4.0",
40	    "relational-pouch": "~4.0.0",
41	    "shortid": "^2.2.15",
42	    "typescript": "~3.8.3",
43	    "uuid": "^8.0.0",
44	    "validator": "^13.0.0"
45	  },
46	  "resolutions": {
47	    "moment": "2.24.0"
48	  },
49	  "comments": {
50	    "resolutions": "Added this key as temp fix https://github.com/moment/moment/issues/5484"
51	  },
52	  "repository": {
53	    "type": "git",
54	    "url": "https://github.com/HospitalRun/hospitalrun-frontend.git"
55	  },
56	  "author": "Jack Meyer",
57	  "contributors": [
58	    "Maksim Sinik",
59	    "Stefano Casasola"
60	  ],
61	  "devDependencies": {
62	    "@commitlint/cli": "~16.1.0",
63	    "@commitlint/config-conventional": "~16.0.0",
64	    "@commitlint/core": "~16.0.0",
65	    "@commitlint/prompt": "~16.1.0",
66	    "@testing-library/dom": "~7.31.0",
67	    "@testing-library/jest-dom": "~5.16.1",
68	    "@testing-library/react": "~11.2.2",
69	    "@testing-library/react-hooks": "~7.0.0",
70	    "@testing-library/user-event": "~12.8.3",
71	    "@types/jest": "~27.0.3",
72	    "@types/lodash": "^4.14.150",
73	    "@types/node": "~17.0.0",
74	    "@types/pouchdb": "~6.4.0",
75	    "@types/react": "~17.0.0",
76	    "@types/react-dom": "~17.0.0",
77	    "@types/react-redux": "~7.1.5",
78	    "@types/react-router": "~5.1.2",
79	    "@types/react-router-dom": "~5.3.0",
80	    "@types/redux-mock-store": "~1.0.1",
81	    "@types/shortid": "^0.0.29",
82	    "@types/uuid": "^8.0.0",
83	    "@types/validator": "~13.7.0",
84	    "@typescript-eslint/eslint-plugin": "~3.10.0",
85	    "@typescript-eslint/parser": "~3.10.0",
86	    "chalk": "^5.0.0",
87	    "commitizen": "~4.2.0",
88	    "commitlint-config-cz": "~0.13.0",
89	    "cross-env": "~7.0.0",
90	    "cz-conventional-changelog": "~3.3.0",
91	    "dateformat": "~5.0.2",
92	    "eslint": "~6.8.0",
93	    "eslint-config-airbnb": "~18.2.0",
94	    "eslint-config-prettier": "~7.2.0",
95	    "eslint-import-resolver-typescript": "~2.5.0",
96	    "eslint-plugin-import": "~2.25.1",
97	    "eslint-plugin-jest": "~26.1.0",
98	    "eslint-plugin-jsx-a11y": "~6.5.1",
99	    "eslint-plugin-prettier": "~3.4.0",
100	    "eslint-plugin-react": "~7.28.0",
101	    "eslint-plugin-react-hooks": "~4.3.0",
102	    "history": "4.10.1",
103	    "husky": "~7.0.0",
104	    "jest-canvas-mock": "~2.3.0",
105	    "jest-environment-jsdom-sixteen": "~2.0.0",
106	    "lint-staged": "~12.3.3",
107	    "memdown": "~6.1.0",
108	    "prettier": "~2.2.0",
109	    "react-select-event": "~5.3.0",
110	    "react-test-renderer": "~17.0.1",
111	    "redux-mock-store": "~1.5.4",
112	    "rimraf": "~3.0.2",
113	    "source-map-explorer": "^2.2.2",
114	    "standard-version": "~9.3.0"
115	  },
116	  "scripts": {
117	    "analyze": "source-map-explorer 'build/static/js/*.js'",
118	    "commit": "npx git-cz",
119	    "start": "npm run translation:check && react-scripts start",
120	    "build": "react-scripts build",
121	    "update": "npx npm-check -u",
122	    "prepublishOnly": "npm run build",
123	    "test": "npm run translation:check && react-scripts test  --testPathIgnorePatterns=src/__tests__/test-utils --env=jest-environment-jsdom-sixteen",
124	    "test:ci": "cross-env CI=true react-scripts test  --testPathIgnorePatterns=src/__tests__/test-utils --passWithNoTests --env=jest-environment-jsdom-sixteen --maxWorkers=2",
125	    "lint": "eslint \"src/**/*.{js,jsx,ts,tsx}\" \"scripts/check-translations/**/*.{js,ts}\"",
126	    "lint:fix": "eslint \"src/**/*.{js,jsx,ts,tsx}\" \"scripts/check-translations/**/*.{js,ts}\" --fix",
127	    "lint-staged": "lint-staged",
128	    "commitlint": "commitlint",
129	    "coveralls": "npm run test:ci -- --coverage --watchAll=false && cat ./coverage/lcov.info",
130	    "remove-compiled-translations": "rimraf ./bin/scripts/check-translations",
131	    "pretranslation:check": "npm run remove-compiled-translations",
132	    "translation:check": "tsc -p scripts/tsconfig.json && node ./bin/scripts/check-translations/index.js",
133	    "posttranslation:check": "npm run remove-compiled-translations"
134	  },
135	  "browserslist": {
136	    "production": [
137	      ">0.2%",
138	      "not dead",
139	      "not op_mini all"
140	    ],
141	    "development": [
142	      "last 1 chrome version",
143	      "last 1 firefox version",
144	      "last 1 safari version"
145	    ]
146	  },
147	  "husky": {
148	    "hooks": {
149	      "pre-commit": "npm run lint-staged",
150	      "commit-msg": "npm run commitlint -- -E HUSKY_GIT_PARAMS"
151	    }
152	  },
153	  "config": {
154	    "commitizen": {
155	      "path": "./node_modules/cz-conventional-changelog"
156	    }
157	  },
158	  "lint-staged": {
159	    "**/*.{js,jsx,ts,tsx}": [
160	      "npm run lint:fix",
161	      "npm run test:ci",
162	      "git add ."
163	    ]
164	  },
165	  "jest": {
166	    "restoreMocks": true
167	  }
168	}
169	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/App.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/App.tsx with line numbers:
1	/* eslint-disable no-console */
2
3	import { Spinner } from '@hospitalrun/components'
4	import React, { Suspense, useEffect, useState } from 'react'
5	import { ReactQueryDevtools } from 'react-query-devtools'
6	import { useDispatch } from 'react-redux'
7	import { BrowserRouter, Route, Switch } from 'react-router-dom'
8
9	import HospitalRun from './HospitalRun'
10	import { TitleProvider } from './page-header/title/TitleContext'
11	import { remoteDb } from './shared/config/pouchdb'
12	import { getCurrentSession } from './user/user-slice'
13
14	const App: React.FC = () => {
15	  const dispatch = useDispatch()
16	  const [loading, setLoading] = useState(true)
17
18	  useEffect(() => {
19	    let cancelled = false
20
21	    remoteDb
22	      .getSession()
23	      .then((session) => {
24	        if (cancelled) {
25	          return
26	        }
27	        if (session.userCtx.name) {
28	          dispatch(getCurrentSession(session.userCtx.name))
29	        }
30	      })
31	      .catch((e) => {
32	        console.log(e)
33	      })
34	      .finally(() => {
35	        if (!cancelled) {
36	          setLoading(false)
37	        }
38	      })
39
40	    return () => {
41	      cancelled = true
42	    }
43	  }, [dispatch])
44
45	  if (loading) {
46	    return null
47	  }
48
49	  return (
50	    <>
51	      <BrowserRouter>
52	        <Suspense fallback={<Spinner color="blue" loading size={[10, 25]} type="ScaleLoader" />}>
53	          <Switch>
54	            <TitleProvider>
55	              <Route path="/" component={HospitalRun} />
56	            </TitleProvider>
57	          </Switch>
58	        </Suspense>
59	      </BrowserRouter>
60	      <ReactQueryDevtools initialIsOpen={false} />
61	    </>
62	  )
63	}
64
65	export default App
66	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx with line numbers:
1	import { Toaster } from '@hospitalrun/components'
2	import React from 'react'
3	import { useSelector } from 'react-redux'
4	import { Route, Switch } from 'react-router-dom'
5
6	import Dashboard from './dashboard/Dashboard'
7	import Imagings from './imagings/Imagings'
8	import Incidents from './incidents/Incidents'
9	import Labs from './labs/Labs'
10	import Medications from './medications/Medications'
11	import Breadcrumbs from './page-header/breadcrumbs/Breadcrumbs'
12	import { ButtonBarProvider } from './page-header/button-toolbar/ButtonBarProvider'
13	import ButtonToolBar from './page-header/button-toolbar/ButtonToolBar'
14	import { useTitle } from './page-header/title/TitleContext'
15	import Patients from './patients/Patients'
16	import Appointments from './scheduling/appointments/Appointments'
17	import Settings from './settings/Settings'
18	import Navbar from './shared/components/navbar/Navbar'
19	import { NetworkStatusMessage } from './shared/components/network-status'
20	import Sidebar from './shared/components/Sidebar'
21	import { RootState } from './shared/store'
22
23	const HospitalRun = () => {
24	  const { title } = useTitle()
25	  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)
26
27	  return (
28	    <div>
29	      <NetworkStatusMessage />
30	      <Navbar />
31	      <div className="container-fluid">
32	        <div className="col-md-2">
33	          <Sidebar />
34	        </div>
35	        <ButtonBarProvider>
36	          <div className="row">
37	            <main
38	              role="main"
39	              className={`${
40	                sidebarCollapsed ? 'col-md-10 col-lg-11' : 'col-md-9 col-lg-10'
41	              } ml-sm-auto px-4`}
42	            >
43	              <div className="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
44	                <h1 className="h2">{title}</h1>
45	                <ButtonToolBar />
46	              </div>
47	              <Breadcrumbs />
48	              <div>
49	                <Switch>
50	                  <Route exact path="/" component={Dashboard} />
51	                  <Route path="/appointments" component={Appointments} />
52	                  <Route path="/patients" component={Patients} />
53	                  <Route path="/labs" component={Labs} />
54	                  <Route path="/medications" component={Medications} />
55	                  <Route path="/incidents" component={Incidents} />
56	                  <Route path="/settings" component={Settings} />
57	                  <Route path="/imaging" component={Imagings} />
58	                </Switch>
59	              </div>
60	              <Toaster autoClose={5000} hideProgressBar draggable />
61	            </main>
62	          </div>
63	        </ButtonBarProvider>
64	      </div>
65	    </div>
66	  )
67	}
68
69	export default HospitalRun
70	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts with line numbers:
1	/* eslint-disable */
2	// This optional code is used to register a service worker.
3	// register() is not called by default.
4
5	// This lets the app load faster on subsequent visits in production, and gives
6	// it offline capabilities. However, it also means that developers (and users)
7	// will only see deployed updates on subsequent visits to a page, after all the
8	// existing tabs open on the page have been closed, since previously cached
9	// resources are updated in the background.
10
11	// To learn more about the benefits of this model and instructions on how to
12	// opt-in, read https://bit.ly/CRA-PWA
13
14	const isLocalhost = Boolean(
15	  window.location.hostname === "localhost" ||
16	    // [::1] is the IPv6 localhost address.
17	    window.location.hostname === "[::1]" ||
18	    // 127.0.0.1/8 is considered localhost for IPv4.
19	    window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
20	);
21
22	type Config = {
23	  onSuccess?: (registration: ServiceWorkerRegistration) => void;
24	  onUpdate?: (registration: ServiceWorkerRegistration) => void;
25	};
26
27	export function register(config?: Config) {
28	  if (process.env.NODE_ENV === "production" && "serviceWorker" in navigator) {
29	    // The URL constructor is available in all browsers that support SW.
30	    const publicUrl = new URL(
31	      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,
32	      window.location.href
33	    );
34	    if (publicUrl.origin !== window.location.origin) {
35	      // Our service worker won't work if PUBLIC_URL is on a different origin
36	      // from what our page is served on. This might happen if a CDN is used to
37	      // serve assets; see https://github.com/facebook/create-react-app/issues/2374
38	      return;
39	    }
40
41	    window.addEventListener("load", () => {
42	      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;
43
44	      if (isLocalhost) {
45	        // This is running on localhost. Let's check if a service worker still exists or not.
46	        checkValidServiceWorker(swUrl, config);
47
48	        // Add some additional logging to localhost, pointing developers to the
49	        // service worker/PWA documentation.
50	        navigator.serviceWorker.ready.then(() => {
51	          console.log(
52	            "This web app is being served cache-first by a service " +
53	              "worker. To learn more, visit https://bit.ly/CRA-PWA"
54	          );
55	        });
56	      } else {
57	        // Is not localhost. Just register service worker
58	        registerValidSW(swUrl, config);
59	      }
60	    });
61	  }
62	}
63
64	function registerValidSW(swUrl: string, config?: Config) {
65	  navigator.serviceWorker
66	    .register(swUrl)
67	    .then(registration => {
68	      registration.onupdatefound = () => {
69	        const installingWorker = registration.installing;
70	        if (installingWorker == null) {
71	          return;
72	        }
73	        installingWorker.onstatechange = () => {
74	          if (installingWorker.state === "installed") {
75	            if (navigator.serviceWorker.controller) {
76	              // At this point, the updated precached content has been fetched,
77	              // but the previous service worker will still serve the older
78	              // content until all client tabs are closed.
79	              console.log(
80	                "New content is available and will be used when all " +
81	                  "tabs for this page are closed. See https://bit.ly/CRA-PWA."
82	              );
83
84	              // Execute callback
85	              if (config && config.onUpdate) {
86	                config.onUpdate(registration);
87	              }
88	            } else {
89	              // At this point, everything has been precached.
90	              // It's the perfect time to display a
91	              // "Content is cached for offline use." message.
92	              console.log("Content is cached for offline use.");
93
94	              // Execute callback
95	              if (config && config.onSuccess) {
96	                config.onSuccess(registration);
97	              }
98	            }
99	          }
100	        };
101	      };
102	    })
103	    .catch(error => {
104	      console.error("Error during service worker registration:", error);
105	    });
106	}
107
108	function checkValidServiceWorker(swUrl: string, config?: Config) {
109	  // Check if the service worker can be found. If it can't reload the page.
110	  fetch(swUrl)
111	    .then(response => {
112	      // Ensure service worker exists, and that we really are getting a JS file.
113	      const contentType = response.headers.get("content-type");
114	      if (
115	        response.status === 404 ||
116	        (contentType != null && contentType.indexOf("javascript") === -1)
117	      ) {
118	        // No service worker found. Probably a different app. Reload the page.
119	        navigator.serviceWorker.ready.then(registration => {
120	          registration.unregister().then(() => {
121	            window.location.reload();
122	          });
123	        });
124	      } else {
125	        // Service worker found. Proceed as normal.
126	        registerValidSW(swUrl, config);
127	      }
128	    })
129	    .catch(() => {
130	      console.log("No internet connection found. App is running in offline mode.");
131	    });
132	}
133
134	export function unregister() {
135	  if ("serviceWorker" in navigator) {
136	    navigator.serviceWorker.ready.then(registration => {
137	      registration.unregister();
138	    });
139	  }
140	}
141	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/shared, excluding hidden items and node_modules:
254K	/tmp/inputs/hospitalrun-frontend/src/shared
38K	/tmp/inputs/hospitalrun-frontend/src/shared/components
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/PageComponent.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx
15K	/tmp/inputs/hospitalrun-frontend/src/shared/components/Sidebar.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts
8.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input
7.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/navbar
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/config
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts
2.5K	/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts
15K	/tmp/inputs/hospitalrun-frontend/src/shared/db
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/db/IncidentRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Page.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/PageRequest.ts
2.0K	/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Search.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Sort.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/SortRequest.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/hooks
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts
151K	/tmp/inputs/hospitalrun-frontend/src/shared/locales
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/README.md
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ar
15K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/de
21K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/enUs
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/es
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/fr
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/id
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/index.ts
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/it
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ja
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ptBr
27K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ru
22K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/tr
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/zhCN
13K	/tmp/inputs/hospitalrun-frontend/src/shared/model
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/AbstractDBModel.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Allergy.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Appointment.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Breadcrumb.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/CareGoal.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/CarePlan.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/ContactInformation.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Diagnosis.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Imaging.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Incident.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Lab.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Medication.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Name.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Note.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Patient.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/PatientHistoryRecord.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Permissions.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/RelatedPerson.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/User.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Visit.ts
29K	/tmp/inputs/hospitalrun-frontend/src/shared/static
29K	/tmp/inputs/hospitalrun-frontend/src/shared/static/images
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/store
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts
3.0K	/tmp/inputs/hospitalrun-frontend/src/shared/util
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/util/DataHelpers.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/extractUsername.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/formatDate.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/generateCode.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/uuid.ts



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts with line numbers:
1	import { useState, useEffect } from 'react'
2
3	export default function <T>(value: T, delayInMilliseconds: number): T {
4	  const [debouncedValue, setDebouncedValue] = useState(value)
5
6	  useEffect(() => {
7	    const debounceHandler = setTimeout(() => setDebouncedValue(value), delayInMilliseconds)
8
9	    return () => clearTimeout(debounceHandler)
10	  }, [value, delayInMilliseconds])
11
12	  return debouncedValue
13	}
14	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts with line numbers:
1	/* eslint-disable @typescript-eslint/no-var-requires */
2	/* eslint-disable camelcase */
3	import PouchDB from 'pouchdb'
4	import PouchAuth from 'pouchdb-authentication'
5	import PouchdbFind from 'pouchdb-find'
6	import RelationalPouch from 'relational-pouch'
7
8	const memoryAdapter = require('pouchdb-adapter-memory')
9	const search = require('pouchdb-quick-search')
10
11	PouchDB.plugin(search)
12	PouchDB.plugin(memoryAdapter)
13	PouchDB.plugin(RelationalPouch)
14	PouchDB.plugin(PouchdbFind)
15	PouchDB.plugin(PouchAuth)
16
17	let serverDb
18	let localDb
19
20	if (process.env.NODE_ENV === 'test') {
21	  serverDb = new PouchDB('hospitalrun', { skip_setup: true, adapter: 'memory' })
22	  localDb = new PouchDB('local_hospitalrun', { skip_setup: true, adapter: 'memory' })
23	} else {
24	  serverDb = new PouchDB(`${process.env.REACT_APP_HOSPITALRUN_API}/hospitalrun`, {
25	    skip_setup: true,
26	  })
27
28	  localDb = new PouchDB('local_hospitalrun', { skip_setup: true })
29	  localDb.sync(serverDb, { live: true, retry: true })
30	}
31
32	export const schema = [
33	  {
34	    singular: 'patient',
35	    plural: 'patients',
36	    relations: {
37	      appointments: {
38	        hasMany: { type: 'appointment', options: { queryInverse: 'patient', async: true } },
39	      },
40	      labs: { hasMany: { type: 'lab', options: { queryInverse: 'patient', async: true } } },
41	      medications: {
42	        hasMany: { type: 'medication', options: { queryInverse: 'patient', async: true } },
43	      },
44	      imagings: { hasMany: { type: 'imaging', options: { queryInverse: 'patient', async: true } } },
45	    },
46	  },
47	  {
48	    singular: 'appointment',
49	    plural: 'appointments',
50	    relations: { patient: { belongsTo: 'patient' } },
51	  },
52	  {
53	    singular: 'incident',
54	    plural: 'incidents',
55	  },
56	  {
57	    singular: 'lab',
58	    plural: 'labs',
59	    relations: { patient: { belongsTo: 'patient' } },
60	  },
61	  {
62	    singular: 'imaging',
63	    plural: 'imagings',
64	    relations: { patient: { belongsTo: 'patient' } },
65	  },
66	  {
67	    singular: 'medication',
68	    plural: 'medications',
69	    relations: { patient: { belongsTo: 'patient' } },
70	  },
71	]
72	export const relationalDb = localDb.setSchema(schema)
73	export const remoteDb = serverDb as PouchDB.Database
74	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts with line numbers:
1	import i18n from 'i18next'
2	import LanguageDetector from 'i18next-browser-languagedetector'
3	import { initReactI18next } from 'react-i18next'
4
5	import resources from '../locales'
6
7	i18n
8	  // load translation using xhr -> see /public/locales
9	  // learn more: https://github.com/i18next/i18next-xhr-backend
10	  // detect user language
11	  // learn more: https://github.com/i18next/i18next-browser-languageDetector
12	  .use(LanguageDetector)
13	  // pass the i18n instance to react-i18next.
14	  .use(initReactI18next)
15	  // init i18next
16	  // for all options read: https://www.i18next.com/overview/configuration-options
17	  .init({
18	    fallbackLng: 'en',
19	    debug: true,
20	    resources,
21	    interpolation: {
22	      escapeValue: false, // not needed for react as it escapes by default
23	    },
24	  })
25
26	export default i18n
27	export { resources }
28	


bash
command
grep -r "React.lazy\|lazy(" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null
system
Tool ran without output or errors


bash
command
grep -r "useCallback\|useMemo\|React.memo\|memo(" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -50
output
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:import React, { useState, useEffect, useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts:import { useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts:  const translate = useCallback((key: any): any => (key !== undefined ? t(key) : undefined), [t])
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/view/ViewAppointment.tsx:import React, { useCallback, useEffect, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/view/ViewAppointment.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/medications/search/ViewMedications.tsx:import React, { useEffect, useCallback, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/medications/search/ViewMedications.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:import React, { useState, useEffect, useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx:import React, { useCallback, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx:  const onSearchRequestChange = useCallback((newSearchRequest: PatientSearchRequest) => {


bash
command
grep -r "useQuery\|useMutation\|QueryClient\|react-query" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -30
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:import { ReactQueryDevtools } from 'react-query-devtools'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:  return useMutation(reportIncident, {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx:  return useQuery(['incident', incidentId], fetchIncidentById)
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx:  return useQuery(['incidents', searchRequest], fetchIncidents)
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:  return useMutation(resolveIncident, {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx:  return useQuery(['imagings', searchRequest], searchImagingRequests)
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx:  return useQuery(['imaging', imagingRequestId], getImagingRequestById)
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:  return useMutation(requestImagingWrapper(user), {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:import { queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:import { ReactQueryConfigProvider } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:import { MutateFunction } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-query.util.tsx:import { ReactQueryConfigProvider, QueryResult } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:  return useQuery(['appointments'], fetchAppointments)
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(createNewAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointment.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointment.tsx:  return useQuery(['appointment', appointmentId], getAppointmentById)
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:  return useMutation(deleteAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {
/tmp/inputs/hospitalrun-frontend/src/medications/hooks/useMedicationSearch.tsx:import { useQuery } from 'react-query'


bash
command
grep -r "useQuery\|useMutation" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | wc -l
output
90


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx with line numbers:
1	import { useQuery } from 'react-query'
2
3	import IncidentRepository from '../../shared/db/IncidentRepository'
4	import Incident from '../../shared/model/Incident'
5
6	function fetchIncidentById(_: any, incidentId: string): Promise<Incident> {
7	  return IncidentRepository.find(incidentId)
8	}
9
10	export default function useIncident(incidentId: string) {
11	  return useQuery(['incident', incidentId], fetchIncidentById)
12	}
13	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx with line numbers:
1	import isEmpty from 'lodash/isEmpty'
2	import { queryCache, useMutation } from 'react-query'
3	import shortid from 'shortid'
4
5	import IncidentRepository from '../../shared/db/IncidentRepository'
6	import Incident from '../../shared/model/Incident'
7	import validateIncident from '../util/validate-incident'
8
9	const getIncidentCode = (): string => `I-${shortid.generate()}`
10
11	export function reportIncident(incident: Incident): Promise<Incident> {
12	  const error = validateIncident(incident)
13	  if (isEmpty(error)) {
14	    const updatedIncident: Incident = {
15	      ...incident,
16	      code: getIncidentCode(),
17	      status: 'reported',
18	      reportedBy: 'some user',
19	      reportedOn: new Date(Date.now()).toISOString(),
20	    }
21	    return IncidentRepository.save(updatedIncident)
22	  }
23
24	  throw error
25	}
26
27	export default function useReportIncident() {
28	  return useMutation(reportIncident, {
29	    onSuccess: async () => {
30	      await queryCache.invalidateQueries('incidents')
31	    },
32	    throwOnError: true,
33	  })
34	}
35	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts with line numbers:
1	import { v4 as uuidv4 } from 'uuid'
2
3	import { schema } from '../config/pouchdb'
4	import AbstractDBModel from '../model/AbstractDBModel'
5	import SortRequest, { Unsorted } from './SortRequest'
6
7	export default class Repository<T extends AbstractDBModel> {
8	  db: PouchDB.RelDatabase
9
10	  type: string
11
12	  pluralType: string
13
14	  constructor(type: string, db: PouchDB.RelDatabase) {
15	    this.db = db
16	    this.type = type
17	    this.pluralType = schema.find((s) => s.singular === this.type)?.plural || ''
18	  }
19
20	  async find(id: string): Promise<T> {
21	    const documents = await this.db.rel.find(this.type, id)
22	    const entity = documents[this.pluralType][0]
23	    return entity
24	  }
25
26	  async findAll(sort = Unsorted): Promise<T[]> {
27	    const selector: any = {
28	      _id: {
29	        $regex: RegExp(this.type, 'i'),
30	      },
31	    }
32
33	    sort.sorts.forEach((s) => {
34	      selector[`data.${s.field}`] = { $gt: null }
35	    })
36
37	    // Adds an index to each of the fields coming from the sorting object
38	    // allowing the algorithm to sort by any given SortRequest, by avoiding the default index error (lack of index)
39
40	    await Promise.all(
41	      sort.sorts.map(
42	        async (s): Promise<SortRequest> => {
43	          await this.db.createIndex({
44	            index: {
45	              fields: [`data.${s.field}`],
46	            },
47	          })
48
49	          return sort
50	        },
51	      ),
52	    )
53
54	    const result = await this.db.find({
55	      selector,
56	      sort:
57	        sort.sorts.length > 0
58	          ? sort.sorts.map((s) => ({ [`data.${s.field}`]: s.direction }))
59	          : undefined,
60	    })
61	    const relDocs = await this.db.rel.parseRelDocs(this.type, result.docs)
62	    return relDocs[this.pluralType]
63	  }
64
65	  async count(): Promise<number> {
66	    const result = await this.findAll()
67	    return result.length
68	  }
69
70	  async search(criteria: any): Promise<T[]> {
71	    const response = await this.db.find({
72	      selector: {
73	        $and: [
74	          {
75	            _id: {
76	              $regex: RegExp(this.type, 'i'),
77	            },
78	          },
79	          { ...criteria.selector },
80	        ],
81	      },
82	    })
83	    const data = await this.db.rel.parseRelDocs(this.type, response.docs)
84	    return data[this.pluralType]
85	  }
86
87	  async save(entity: T): Promise<T> {
88	    const currentTime = new Date().toISOString()
89
90	    const { id, rev, ...valuesToSave } = entity
91	    const savedEntity = await this.db.rel.save(this.type, {
92	      id: uuidv4(),
93	      ...valuesToSave,
94	      createdAt: currentTime,
95	      updatedAt: currentTime,
96	    })
97	    return this.find(savedEntity.id)
98	  }
99
100	  async saveOrUpdate(entity: T): Promise<T> {
101	    if (!entity.id) {
102	      return this.save(entity)
103	    }
104
105	    const { id, rev, ...dataToSave } = entity
106
107	    try {
108	      await this.find(entity.id)
109	      const entityToUpdate = {
110	        id,
111	        rev,
112	        ...dataToSave,
113	        updatedAt: new Date().toISOString(),
114	      }
115
116	      await this.db.rel.save(this.type, entityToUpdate)
117	      return this.find(entity.id)
118	    } catch (error) {
119	      return this.save(entity)
120	    }
121	  }
122
123	  async delete(entity: T): Promise<T> {
124	    const entityToDelete = await this.find(entity.id)
125	    await this.db.rel.del(this.type, entity)
126	    return entityToDelete
127	  }
128	}
129	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts with line numbers:
1	import { configureStore, combineReducers, Action } from '@reduxjs/toolkit'
2	import ReduxThunk, { ThunkAction } from 'redux-thunk'
3
4	import medication from '../../medications/medication-slice'
5	import breadcrumbs from '../../page-header/breadcrumbs/breadcrumbs-slice'
6	import patient from '../../patients/patient-slice'
7	import patients from '../../patients/patients-slice'
8	import user from '../../user/user-slice'
9	import components from '../components/component-slice'
10
11	const reducer = combineReducers({
12	  patient,
13	  patients,
14	  user,
15	  breadcrumbs,
16	  components,
17	  medication,
18	})
19
20	const store = configureStore({
21	  reducer,
22	  middleware: [ReduxThunk],
23	})
24
25	export type AppDispatch = typeof store.dispatch
26	export type AppThunk = ThunkAction<void, RootState, null, Action<string>>
27	export type RootState = ReturnType<typeof reducer>
28
29	export default store
30	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/patients, excluding hidden items and node_modules:
192K	/tmp/inputs/hospitalrun-frontend/src/patients
4.5K	/tmp/inputs/hospitalrun-frontend/src/patients/ContactInfo.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/ContactInfoTypes.ts
11K	/tmp/inputs/hospitalrun-frontend/src/patients/GeneralInformation.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/Patients.tsx
7.0K	/tmp/inputs/hospitalrun-frontend/src/patients/allergies
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/allergies/Allergies.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/allergies/AllergiesList.tsx
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/allergies/NewAllergyModal.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/allergies/ViewAllergy.tsx
3.5K	/tmp/inputs/hospitalrun-frontend/src/patients/appointments
3.5K	/tmp/inputs/hospitalrun-frontend/src/patients/appointments/AppointmentsList.tsx
15K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/AddCareGoalModal.tsx
7.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/CareGoalForm.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/CareGoalTab.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/CareGoalTable.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/ViewCareGoal.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/ViewCareGoals.tsx
15K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/AddCarePlanModal.tsx
7.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/CarePlanForm.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/CarePlanTab.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/CarePlanTable.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/ViewCarePlan.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/ViewCarePlans.tsx
15K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/AddDiagnosisModal.tsx
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/Diagnoses.tsx
6.0K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/DiagnosisForm.tsx
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/DiagnosisTable.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/ViewDiagnoses.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/ViewDiagnosis.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/patients/edit
3.0K	/tmp/inputs/hospitalrun-frontend/src/patients/edit/EditPatient.tsx
6.0K	/tmp/inputs/hospitalrun-frontend/src/patients/history
512	/tmp/inputs/hospitalrun-frontend/src/patients/history/HistoryTab.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/history/HistoryTable.tsx
3.5K	/tmp/inputs/hospitalrun-frontend/src/patients/history/mappers
25K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAllergy.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCareGoal.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCarePlan.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useDiagnosis.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAllergies.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAppointments.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCareGoals.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCarePlans.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientDiagnoses.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientLabs.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientMedications.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNote.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNotes.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientRelatedPersons.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientVisits.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatients.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useVisit.tsx
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/labs
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/labs/Labs.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/labs/LabsList.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/patients/medications
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/medications/Medications.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/medications/MedicationsList.tsx
512	/tmp/inputs/hospitalrun-frontend/src/patients/models
512	/tmp/inputs/hospitalrun-frontend/src/patients/models/PatientSearchRequest.tsx
6.0K	/tmp/inputs/hospitalrun-frontend/src/patients/new
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/new/DuplicateNewPatientModal.tsx
4.0K	/tmp/inputs/hospitalrun-frontend/src/patients/new/NewPatient.tsx
7.5K	/tmp/inputs/hospitalrun-frontend/src/patients/notes
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/notes/NewNoteModal.tsx
2.5K	/tmp/inputs/hospitalrun-frontend/src/patients/notes/NoteTab.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/notes/NotesList.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/notes/ViewNote.tsx
5.0K	/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts
8.5K	/tmp/inputs/hospitalrun-frontend/src/patients/related-persons
4.5K	/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/AddRelatedPersonModal.tsx
4.0K	/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/RelatedPersonTab.tsx
7.0K	/tmp/inputs/hospitalrun-frontend/src/patients/search
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/search/NoPatientsExist.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/search/ViewPatients.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/search/ViewPatientsTable.tsx
16K	/tmp/inputs/hospitalrun-frontend/src/patients/util
512	/tmp/inputs/hospitalrun-frontend/src/patients/util/is-possible-duplicate-patient.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/util/patient-util.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/util/set-patient-helper.ts
512	/tmp/inputs/hospitalrun-frontend/src/patients/util/timestamp-id-generator.ts
512	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-allergy.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-caregoal.ts
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-careplan.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-diagnosis.ts
512	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-note.ts
3.0K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-patient.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-related-person.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/patients/util/validate-visit.ts
16K	/tmp/inputs/hospitalrun-frontend/src/patients/view
8.5K	/tmp/inputs/hospitalrun-frontend/src/patients/view/ImportantPatientInfo.tsx
7.0K	/tmp/inputs/hospitalrun-frontend/src/patients/view/ViewPatient.tsx
12K	/tmp/inputs/hospitalrun-frontend/src/patients/visits
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/visits/AddVisitModal.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/patients/visits/ViewVisit.tsx
5.0K	/tmp/inputs/hospitalrun-frontend/src/patients/visits/VisitForm.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/visits/VisitTab.tsx
2.0K	/tmp/inputs/hospitalrun-frontend/src/patients/visits/VisitTable.tsx



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx with line numbers:
1	import { useQuery } from 'react-query'
2
3	import PatientRepository from '../../shared/db/PatientRepository'
4	import Patient from '../../shared/model/Patient'
5
6	function fetchPatient(_: any, id?: string): Promise<Patient> {
7	  return PatientRepository.find(id || '')
8	}
9
10	export default function usePatient(id?: string) {
11	  return useQuery(['patient', id], fetchPatient, { enabled: id })
12	}
13	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx with line numbers:
1	import { Column, Container, Row } from '@hospitalrun/components'
2	import React, { useCallback, useState } from 'react'
3
4	import PatientSearchRequest from '../models/PatientSearchRequest'
5	import PatientSearchInput from './PatientSearchInput'
6	import ViewPatientsTable from './ViewPatientsTable'
7
8	const SearchPatients = () => {
9	  const [searchRequest, setSearchRequest] = useState<PatientSearchRequest>({ queryString: '' })
10
11	  const onSearchRequestChange = useCallback((newSearchRequest: PatientSearchRequest) => {
12	    setSearchRequest(newSearchRequest)
13	  }, [])
14
15	  return (
16	    <div>
17	      <Container>
18	        <Row>
19	          <Column md={12}>
20	            <PatientSearchInput onChange={onSearchRequestChange} />
21	          </Column>
22	        </Row>
23	        <Row>
24	          <ViewPatientsTable searchRequest={searchRequest} />
25	        </Row>
26	      </Container>
27	    </div>
28	  )
29	}
30
31	export default SearchPatients
32	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx with line numbers:
1	import { TextInput } from '@hospitalrun/components'
2	import React, { useEffect, useState } from 'react'
3
4	import useDebounce from '../../shared/hooks/useDebounce'
5	import useTranslator from '../../shared/hooks/useTranslator'
6	import PatientSearchRequest from '../models/PatientSearchRequest'
7
8	interface Props {
9	  onChange: (searchRequest: PatientSearchRequest) => void
10	}
11
12	const PatientSearchInput = (props: Props) => {
13	  const { onChange } = props
14	  const { t } = useTranslator()
15
16	  const [searchText, setSearchText] = useState<string>('')
17	  const debouncedSearchText = useDebounce(searchText, 500)
18
19	  useEffect(() => {
20	    onChange({
21	      queryString: debouncedSearchText,
22	    })
23	  }, [debouncedSearchText, onChange])
24
25	  const onSearchBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {
26	    const queryString = event.currentTarget.value
27	    setSearchText(queryString)
28	  }
29
30	  return (
31	    <TextInput
32	      size="lg"
33	      type="text"
34	      onChange={onSearchBoxChange}
35	      value={searchText}
36	      placeholder={t('actions.search')}
37	    />
38	  )
39	}
40
41	export default PatientSearchInput
42	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status, excluding hidden items and node_modules:
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/index.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/types.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts with line numbers:
1	import { useState, useEffect } from 'react'
2
3	import { NetworkStatus } from './types'
4
5	export const useNetworkStatus = (): NetworkStatus => {
6	  const isOnline = navigator.onLine
7	  const [networkStatus, setNetworkStatus] = useState({
8	    isOnline,
9	    wasOffline: !isOnline,
10	  })
11	  const handleOnline = () => {
12	    setNetworkStatus((prevState) => ({ ...prevState, isOnline: true }))
13	  }
14	  const handleOffline = () => {
15	    setNetworkStatus((prevState) => ({ ...prevState, isOnline: false, wasOffline: true }))
16	  }
17	  useEffect(() => {
18	    window.addEventListener('online', handleOnline)
19	    window.addEventListener('offline', handleOffline)
20
21	    return () => {
22	      window.removeEventListener('online', handleOnline)
23	      window.removeEventListener('offline', handleOffline)
24	    }
25	  }, [])
26
27	  return networkStatus
28	}
29	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx with line numbers:
1	import React, { useState } from 'react'
2
3	import useTranslator from '../../hooks/useTranslator'
4	import { useNetworkStatus } from './useNetworkStatus'
5
6	const ONLINE_COLOR = 'rgba(0, 255, 0, 0.55)'
7	const OFFLINE_COLOR = 'rgba(255, 0, 0, 0.65)'
8	const OPACITY_TRANSITION_TIME = 4000
9	const BASE_STYLE = {
10	  height: '50px',
11	  pointerEvents: 'none' as const,
12	  transition: `opacity ${OPACITY_TRANSITION_TIME}ms ease-in`,
13	}
14
15	export const NetworkStatusMessage = () => {
16	  const { t } = useTranslator()
17	  const { isOnline, wasOffline } = useNetworkStatus()
18	  const [shouldRender, setShouldRender] = useState(true)
19	  const [opacity, setOpacity] = useState(1)
20
21	  if (isOnline && !wasOffline) {
22	    return null
23	  }
24
25	  if (!isOnline && opacity !== 1) {
26	    setShouldRender(true)
27	    setOpacity(1)
28	  }
29
30	  if (isOnline && wasOffline && opacity !== 0) {
31	    setOpacity(0)
32	    setTimeout(() => {
33	      setShouldRender(false)
34	    }, OPACITY_TRANSITION_TIME)
35	  }
36
37	  if (!shouldRender) {
38	    return null
39	  }
40
41	  const style = {
42	    ...BASE_STYLE,
43	    backgroundColor: isOnline ? ONLINE_COLOR : OFFLINE_COLOR,
44	    opacity,
45	  }
46
47	  return (
48	    <div
49	      className={`fixed-bottom d-flex justify-content-center align-items-center ${
50	        isOnline ? 'online' : 'offline'
51	      }`}
52	      style={style}
53	    >
54	      {isOnline ? t('networkStatus.online') : t('networkStatus.offline')}
55	    </div>
56	  )
57	}
58	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/index.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/index.tsx with line numbers:
1	import React from 'react'
2	import ReactDOM from 'react-dom'
3	import { Provider } from 'react-redux'
4
5	import './index.css'
6	import App from './App'
7	import * as serviceWorker from './serviceWorker'
8	import './shared/config/i18n'
9	import store from './shared/store'
10
11	ReactDOM.render(
12	  <Provider store={store}>
13	    <App />
14	  </Provider>,
15	  document.getElementById('root'),
16	)
17
18	// If you want your app to work offline and load faster, you can change
19	// unregister() to register() below. Note this comes with some pitfalls.
20	// Learn more about service workers: https://bit.ly/CRA-PWA
21	serviceWorker.register()
22	serviceWorker.register({})
23	


bash
command
grep -r "queryCache.invalidateQueries\|staleTime\|cacheTime" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null
output
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:      await queryCache.invalidateQueries('incidents')
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:      await queryCache.invalidateQueries('imagings')
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useRequestLab.ts:      await queryCache.invalidateQueries('labs')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCancelLab.ts:      queryCache.invalidateQueries('labs')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:      await queryCache.invalidateQueries('labs')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useUpdateLab.ts:      await queryCache.invalidateQueries('labs')


bash
command
grep -r "useSelector" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -20
output
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx:  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:  const { permissions } = useSelector((state: RootState) => state.user)
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncident.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncident.tsx:  const { permissions } = useSelector((root: RootState) => root.user)
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx:  const { permissions } = useSelector((state: RootState) => state.user)
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:  const { permissions } = useSelector((state: RootState) => state.user)
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:  const { user } = useSelector((state: RootState) => state.user)
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/Breadcrumbs.tsx:import { useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/Breadcrumbs.tsx:  const { breadcrumbs } = useSelector((state: RootState) => state.breadcrumbs)
/tmp/inputs/hospitalrun-frontend/src/shared/components/Sidebar.tsx:import { useSelector, useDispatch } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/shared/components/Sidebar.tsx:  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)
/tmp/inputs/hospitalrun-frontend/src/shared/components/Sidebar.tsx:  const permissions = useSelector((state: RootState) => state.user.permissions)
/tmp/inputs/hospitalrun-frontend/src/shared/components/navbar/Navbar.tsx:import { useDispatch, useSelector } from 'react-redux'
/tmp/inputs/hospitalrun-frontend/src/shared/components/navbar/Navbar.tsx:  const { permissions, user } = useSelector((state: RootState) => state.user)
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/Appointments.tsx:import { useSelector } from 'react-redux'


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts with line numbers:
1	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
2	import isEmpty from 'lodash/isEmpty'
3
4	import PatientRepository from '../shared/db/PatientRepository'
5	import Diagnosis from '../shared/model/Diagnosis'
6	import Patient from '../shared/model/Patient'
7	import { AppThunk } from '../shared/store'
8	import { uuid } from '../shared/util/uuid'
9	import { cleanupPatient } from './util/set-patient-helper'
10	import validatePatient from './util/validate-patient'
11
12	interface PatientState {
13	  status: 'loading' | 'error' | 'completed'
14	  isUpdatedSuccessfully: boolean
15	  patient: Patient
16	  relatedPersons: Patient[]
17	  createError?: Error
18	  updateError?: Error
19	  allergyError?: AddAllergyError
20	  diagnosisError?: AddDiagnosisError
21	  relatedPersonError?: AddRelatedPersonError
22	}
23
24	interface Error {
25	  message?: string
26	  givenName?: string
27	  dateOfBirth?: string
28	  suffix?: string
29	  prefix?: string
30	  familyName?: string
31	  preferredLanguage?: string
32	  emails?: (string | undefined)[]
33	  phoneNumbers?: (string | undefined)[]
34	}
35
36	interface AddRelatedPersonError {
37	  message?: string
38	  relatedPerson?: string
39	  relationshipType?: string
40	}
41
42	interface AddAllergyError {
43	  message?: string
44	  name?: string
45	}
46
47	interface AddDiagnosisError {
48	  message?: string
49	  name?: string
50	  date?: string
51	  status?: string
52	}
53
54	const initialState: PatientState = {
55	  status: 'loading',
56	  isUpdatedSuccessfully: false,
57	  patient: {} as Patient,
58	  relatedPersons: [],
59	  createError: undefined,
60	  updateError: undefined,
61	  diagnosisError: undefined,
62	  relatedPersonError: undefined,
63	}
64
65	function start(state: PatientState) {
66	  state.status = 'loading'
67	  state.createError = {}
68	}
69
70	const patientSlice = createSlice({
71	  name: 'patient',
72	  initialState,
73	  reducers: {
74	    createPatientStart: start,
75	    createPatientSuccess(state) {
76	      state.status = 'completed'
77	    },
78	    createPatientError(state, { payload }: PayloadAction<Error>) {
79	      state.status = 'error'
80	      state.createError = payload
81	    },
82	    updatePatientStart: start,
83	    updatePatientSuccess(state, { payload }: PayloadAction<Patient>) {
84	      state.status = 'completed'
85	      state.patient = payload
86	    },
87	    updatePatientError(state, { payload }: PayloadAction<Error>) {
88	      state.status = 'error'
89	      state.updateError = payload
90	    },
91	    addDiagnosisError(state, { payload }: PayloadAction<AddDiagnosisError>) {
92	      state.status = 'error'
93	      state.diagnosisError = payload
94	    },
95	  },
96	})
97
98	export const {
99	  createPatientStart,
100	  createPatientSuccess,
101	  createPatientError,
102	  updatePatientStart,
103	  updatePatientSuccess,
104	  updatePatientError,
105	  addDiagnosisError,
106	} = patientSlice.actions
107
108	export const createPatient = (
109	  patient: Patient,
110	  onSuccess?: (patient: Patient) => void,
111	): AppThunk => async (dispatch) => {
112	  dispatch(createPatientStart())
113
114	  const cleanPatient = cleanupPatient(patient)
115	  const newPatientError = validatePatient(cleanPatient)
116
117	  if (!newPatientError) {
118	    const newPatient = await PatientRepository.save(cleanPatient)
119	    dispatch(createPatientSuccess())
120
121	    if (onSuccess) {
122	      onSuccess(newPatient)
123	    }
124	  } else {
125	    dispatch(
126	      createPatientError({
127	        ...newPatientError.fieldErrors,
128	        message: 'patient.errors.createPatientError',
129	      }),
130	    )
131	  }
132	}
133
134	export const updatePatient = (
135	  patient: Patient,
136	  onSuccess?: (patient: Patient) => void,
137	): AppThunk => async (dispatch) => {
138	  dispatch(updatePatientStart())
139
140	  const cleanPatient = cleanupPatient(patient)
141	  const updateError = validatePatient(cleanPatient)
142
143	  if (!updateError) {
144	    const updatedPatient = await PatientRepository.saveOrUpdate(cleanPatient)
145	    dispatch(updatePatientSuccess(updatedPatient))
146
147	    if (onSuccess) {
148	      onSuccess(updatedPatient)
149	    }
150	  } else {
151	    dispatch(
152	      updatePatientError({
153	        ...updateError.fieldErrors,
154	        message: 'patient.errors.updatePatientError',
155	      }),
156	    )
157	  }
158	}
159
160	function validateDiagnosis(diagnosis: Diagnosis) {
161	  const error: AddDiagnosisError = {}
162
163	  if (!diagnosis.name) {
164	    error.name = 'patient.diagnoses.error.nameRequired'
165	  }
166
167	  if (!diagnosis.diagnosisDate) {
168	    error.date = 'patient.diagnoses.error.dateRequired'
169	  }
170
171	  if (!diagnosis.onsetDate) {
172	    error.date = 'patient.diagnoses.error.dateRequired'
173	  }
174
175	  if (!diagnosis.status) {
176	    error.status = 'patient.diagnoses.error.statusRequired'
177	  }
178	  return error
179	}
180
181	export const addDiagnosis = (
182	  patientId: string,
183	  diagnosis: Diagnosis,
184	  onSuccess?: (patient: Patient) => void,
185	): AppThunk => async (dispatch) => {
186	  const newDiagnosisError = validateDiagnosis(diagnosis)
187
188	  if (isEmpty(newDiagnosisError)) {
189	    const patient = await PatientRepository.find(patientId)
190	    const diagnoses = patient.diagnoses || []
191	    diagnoses.push({ id: uuid(), ...diagnosis })
192	    patient.diagnoses = diagnoses
193
194	    await dispatch(updatePatient(patient, onSuccess))
195	  } else {
196	    newDiagnosisError.message = 'patient.diagnoses.error.unableToAdd'
197	    dispatch(addDiagnosisError(newDiagnosisError))
198	  }
199	}
200
201	export default patientSlice.reducer
202	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts with line numbers:
1	import { useEffect } from 'react'
2	import { useDispatch } from 'react-redux'
3
4	import Breadcrumb from '../../shared/model/Breadcrumb'
5	import { addBreadcrumbs, removeBreadcrumbs } from './breadcrumbs-slice'
6
7	export default function useAddBreadcrumbs(breadcrumbs: Breadcrumb[], withDashboard = false): void {
8	  const dispatch = useDispatch()
9
10	  const breadcrumbsStringified = withDashboard
11	    ? JSON.stringify([...breadcrumbs, { i18nKey: 'dashboard.label', location: '/' }])
12	    : JSON.stringify(breadcrumbs)
13
14	  useEffect(() => {
15	    const breadcrumbsParsed: Breadcrumb[] = JSON.parse(breadcrumbsStringified)
16	    dispatch(addBreadcrumbs(breadcrumbsParsed))
17
18	    return () => {
19	      dispatch(removeBreadcrumbs(breadcrumbsParsed))
20	    }
21	  }, [breadcrumbsStringified, dispatch])
22	}
23	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx with line numbers:
1	import * as React from 'react'
2
3	type SetTitle = (title: string) => void
4	type State = { title: string }
5	type TitleProviderProps = { children: React.ReactNode }
6	const TitleStateContext = React.createContext<State | undefined>(undefined)
7	const TitleDispatchContext = React.createContext<SetTitle | undefined>(undefined)
8
9	function TitleProvider({ children }: TitleProviderProps) {
10	  const [title, setTitle] = React.useState('')
11	  return (
12	    <TitleStateContext.Provider value={{ title }}>
13	      <TitleDispatchContext.Provider value={setTitle}>{children}</TitleDispatchContext.Provider>
14	    </TitleStateContext.Provider>
15	  )
16	}
17	function useTitle() {
18	  const context = React.useContext(TitleStateContext)
19	  if (context === undefined) {
20	    throw new Error('useTitle must be used within a TitleProvider')
21	  }
22	  return context
23	}
24	function useUpdateTitle() {
25	  const context = React.useContext(TitleDispatchContext)
26	  if (context === undefined) {
27	    throw new Error('useUpdateTitle must be used within a TitleProvider')
28	  }
29	  return context
30	}
31	export { TitleProvider, useTitle, useUpdateTitle }
32	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/locales/index.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/locales/index.ts with line numbers:
1	import translationAR from './ar/translations'
2	import translationDE from './de/translations'
3	import translationEnUs from './enUs/translations'
4	import translationES from './es/translations'
5	import translationFR from './fr/translations'
6	import translationID from './id/translations'
7	import translationIT from './it/translations'
8	import translationJA from './ja/translations'
9	import translationPtBR from './ptBr/translations'
10	import translationRU from './ru/translations'
11	import translationTR from './tr/translations'
12	import translationZhCN from './zhCN/translations'
13
14	const resources: { [language: string]: any } = {
15	  it: {
16	    name: 'Italian',
17	    translation: translationIT,
18	  },
19	  ar: {
20	    name: 'Arabic',
21	    translation: translationAR,
22	  },
23	  de: {
24	    name: 'German',
25	    translation: translationDE,
26	  },
27	  en: {
28	    name: 'English, American',
29	    translation: translationEnUs,
30	  },
31	  es: {
32	    name: 'Spanish',
33	    translation: translationES,
34	  },
35	  fr: {
36	    name: 'French',
37	    translation: translationFR,
38	  },
39	  id: {
40	    name: 'Indonesian',
41	    translation: translationID,
42	  },
43	  ja: {
44	    name: 'Japanese',
45	    translation: translationJA,
46	  },
47	  ptBR: {
48	    name: 'Portuguese',
49	    translation: translationPtBR,
50	  },
51	  ru: {
52	    name: 'Russian',
53	    translation: translationRU,
54	  },
55	  tr: {
56	    name: 'Turkish',
57	    translation: translationTR,
58	  },
59	  zhCN: {
60	    name: 'Chinese',
61	    translation: translationZhCN,
62	  },
63	}
64
65	export default resources
66	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts with line numbers:
1	import { useRef, useEffect, EffectCallback } from 'react'
2
3	export default function (effect: EffectCallback, dependencies: any[]): void {
4	  const isInitialMount = useRef(true)
5
6	  useEffect(() => {
7	    if (isInitialMount.current) {
8	      isInitialMount.current = false
9	      return
10	    }
11	    // eslint-disable-next-line consistent-return
12	    return effect && effect()
13	  }, dependencies) //eslint-disable-line
14	}
15	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts with line numbers:
1	import escapeStringRegexp from 'escape-string-regexp'
2
3	import { relationalDb } from '../config/pouchdb'
4	import Appointment from '../model/Appointment'
5	import Lab from '../model/Lab'
6	import Medication from '../model/Medication'
7	import Patient from '../model/Patient'
8	import generateCode from '../util/generateCode'
9	import Repository from './Repository'
10
11	class PatientRepository extends Repository<Patient> {
12	  constructor() {
13	    super('patient', relationalDb)
14	    relationalDb.createIndex({
15	      index: { fields: ['_id', 'data.fullName', 'data.code'] },
16	    })
17	  }
18
19	  async search(text: string): Promise<Patient[]> {
20	    const escapedString = escapeStringRegexp(text)
21	    return super.search({
22	      selector: {
23	        $or: [
24	          {
25	            'data.fullName': {
26	              $regex: RegExp(escapedString, 'i'),
27	            },
28	          },
29	          {
30	            'data.code': text,
31	          },
32	        ],
33	      },
34	    })
35	  }
36
37	  async save(entity: Patient): Promise<Patient> {
38	    const patientCode = generateCode('P')
39	    entity.code = patientCode
40	    const saveResult = await super.save(entity)
41	    return this.find(saveResult.id)
42	  }
43
44	  async createIndex() {
45	    return this.db.createIndex({
46	      index: { fields: ['index'] },
47	    })
48	  }
49
50	  async getAppointments(patientId: string): Promise<Appointment[]> {
51	    const result = await this.db.rel.findHasMany('appointment', 'patient', patientId)
52	    return result.appointments
53	  }
54
55	  async getLabs(patientId: string): Promise<Lab[]> {
56	    const result = await this.db.rel.findHasMany('lab', 'patient', patientId)
57	    return result.labs
58	  }
59
60	  async getMedications(patientId: string): Promise<Medication[]> {
61	    const result = await this.db.rel.findHasMany('medication', 'patient', patientId)
62	    return result.medications
63	  }
64	}
65
66	export default new PatientRepository()
67	


bash
command
grep -r "createIndex" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -20
output
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:          await this.db.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:    relationalDb.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async createIndex() {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:    return this.db.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts:    this.db.createIndex({


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts with line numbers:
1	import escapeStringRegexp from 'escape-string-regexp'
2
3	import { relationalDb } from '../config/pouchdb'
4	import Appointment from '../model/Appointment'
5	import Repository from './Repository'
6
7	class AppointmentRepository extends Repository<Appointment> {
8	  constructor() {
9	    super('appointment', relationalDb)
10	    this.db.createIndex({
11	      index: {
12	        fields: ['data.patient', '_id'],
13	      },
14	    })
15	  }
16
17	  // Fuzzy search for patient appointments. Used for patient appointment search bar
18	  async searchPatientAppointments(patientId: string, text: string): Promise<Appointment[]> {
19	    const escapedString = escapeStringRegexp(text)
20	    return super.search({
21	      selector: {
22	        $and: [
23	          {
24	            'data.patient': patientId,
25	          },
26	          {
27	            $or: [
28	              {
29	                'data.location': {
30	                  $regex: RegExp(escapedString, 'i'),
31	                },
32	              },
33	              {
34	                'data.reason': {
35	                  $regex: RegExp(escapedString, 'i'),
36	                },
37	              },
38	              {
39	                'data.type': {
40	                  $regex: RegExp(escapedString, 'i'),
41	                },
42	              },
43	            ],
44	          },
45	        ],
46	      },
47	    })
48	  }
49	}
50
51	export default new AppointmentRepository()
52	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatients.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatients.tsx with line numbers:
1	import { useQuery } from 'react-query'
2
3	import PatientRepository from '../../shared/db/PatientRepository'
4	import Patient from '../../shared/model/Patient'
5	import PatientSearchRequest from '../models/PatientSearchRequest'
6
7	interface PatientsResult {
8	  totalCount: number
9	  patients: Patient[]
10	}
11
12	async function fetchPatients(_: any, searchRequest: PatientSearchRequest): Promise<PatientsResult> {
13	  const patients = await PatientRepository.search(searchRequest.queryString)
14	  const totalCount = await PatientRepository.count()
15	  return { totalCount, patients }
16	}
17
18	export default function usePatients(searchRequest: PatientSearchRequest) {
19	  return useQuery(['patients', searchRequest], fetchPatients)
20	}
21	


bash
command
grep -r "enabled\|refetchOnWindowFocus\|staleTime" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null
output
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx:  return useQuery(['patient', id], fetchPatient, { enabled: id })


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx with line numbers:
1	import React, { useState } from 'react'
2
3	type Props = {
4	  children?: React.ReactNode
5	}
6
7	type ButtonUpdater = (buttons: React.ReactNode[]) => void
8
9	const ButtonBarStateContext = React.createContext<React.ReactNode[]>([])
10	const ButtonBarUpdateContext = React.createContext<ButtonUpdater>(() => {
11	  // empty initial state
12	})
13
14	function ButtonBarProvider(props: Props) {
15	  const { children } = props
16	  const [state, setState] = useState<React.ReactNode[]>([])
17	  return (
18	    <ButtonBarStateContext.Provider value={state}>
19	      <ButtonBarUpdateContext.Provider value={setState}>{children}</ButtonBarUpdateContext.Provider>
20	    </ButtonBarStateContext.Provider>
21	  )
22	}
23	function useButtons() {
24	  const context = React.useContext(ButtonBarStateContext)
25	  if (context === undefined) {
26	    throw new Error('useButtons must be used within a Button Bar Context')
27	  }
28	  return context
29	}
30	function useButtonToolbarSetter() {
31	  const context = React.useContext(ButtonBarUpdateContext)
32	  if (context === undefined) {
33	    throw new Error('useButtonToolBarSetter must be used within a Button Bar Context')
34	  }
35	  return context
36	}
37
38	export { ButtonBarProvider, useButtons, useButtonToolbarSetter }
39	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/input
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/shared/components/input, excluding hidden items and node_modules:
8.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/DatePickerWithLabelFormGroup.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/DateTimePickerWithLabelFormGroup.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/LanguageSelector.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/SelectOption.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/TextFieldWithLabelFormGroup.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/TextInputWithLabelFormGroup.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input/index.tsx



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx with line numbers:
1	import { Spinner } from '@hospitalrun/components'
2	import React from 'react'
3
4	const Loading = () => <Spinner color="blue" loading size={20} type="BeatLoader" />
5
6	export default Loading
7	


bash
command
grep -r "Loading\|isLoading\|loading" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" 2>/dev/null | grep -v "test" | grep -v "__tests__" | head -30
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:  const [loading, setLoading] = useState(true)
/tmp/inputs/hospitalrun-frontend/src/App.tsx:          setLoading(false)
/tmp/inputs/hospitalrun-frontend/src/App.tsx:  if (loading) {
/tmp/inputs/hospitalrun-frontend/src/App.tsx:        <Suspense fallback={<Spinner color="blue" loading size={[10, 25]} type="ScaleLoader" />}>
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  const { data, isLoading } = useIncident(incidentId)
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:    return <Spinner type="DotLoader" loading />
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx:  const { data, isLoading } = useIncidents(searchRequest)
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx:  if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx:    return <Spinner type="DotLoader" loading />
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:  const { data, isLoading } = useIncidents(searchRequest)
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:    if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:  }, [data, monthlyIncidents, isLoading, incident])
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:    <Spinner type="DotLoader" loading />
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx:import Loading from '../../shared/components/Loading'
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx:  if (data === undefined || status === 'loading') {
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx:    return <Loading />
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx:const Loading = () => <Spinner color="blue" loading size={20} type="BeatLoader" />
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx:export default Loading
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  isLoading: boolean
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(createNewAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:    isLoading,
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  isLoading: boolean
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:    isLoading,
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:import Loading from '../../shared/components/Loading'
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  const { data: appointments, isLoading } = useAppointments()
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:    if (appointments && !isLoading) {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  }, [appointments, isLoading])
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  if (isLoading || appointments === undefined) {


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/view/ViewPatient.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/view/ViewPatient.tsx with line numbers:
1	import { Panel, Spinner, TabsHeader, Tab, Button } from '@hospitalrun/components'
2	import React, { useEffect } from 'react'
3	import { useSelector } from 'react-redux'
4	import {
5	  useParams,
6	  withRouter,
7	  Route,
8	  useHistory,
9	  useLocation,
10	  useRouteMatch,
11	} from 'react-router-dom'
12
13	import useAddBreadcrumbs from '../../page-header/breadcrumbs/useAddBreadcrumbs'
14	import { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'
15	import { useUpdateTitle } from '../../page-header/title/TitleContext'
16	import useTranslator from '../../shared/hooks/useTranslator'
17	import Permissions from '../../shared/model/Permissions'
18	import { RootState } from '../../shared/store'
19	import Allergies from '../allergies/Allergies'
20	import AppointmentsList from '../appointments/AppointmentsList'
21	import CareGoalTab from '../care-goals/CareGoalTab'
22	import CarePlanTab from '../care-plans/CarePlanTab'
23	import Diagnoses from '../diagnoses/Diagnoses'
24	import GeneralInformation from '../GeneralInformation'
25	import HistoryTab from '../history/HistoryTab'
26	import usePatient from '../hooks/usePatient'
27	import Labs from '../labs/Labs'
28	import Medications from '../medications/Medications'
29	import Note from '../notes/NoteTab'
30	import RelatedPerson from '../related-persons/RelatedPersonTab'
31	import { getPatientFullName } from '../util/patient-util'
32	import VisitTab from '../visits/VisitTab'
33	import ImportantPatientInfo from './ImportantPatientInfo'
34
35	const ViewPatient = () => {
36	  const { t } = useTranslator()
37	  const history = useHistory()
38	  const location = useLocation()
39	  const { path } = useRouteMatch()
40	  const setButtonToolBar = useButtonToolbarSetter()
41
42	  const { id } = useParams()
43	  const { permissions } = useSelector((state: RootState) => state.user)
44	  const { data: patient, status } = usePatient(id)
45
46	  const updateTitle = useUpdateTitle()
47	  useEffect(() => {
48	    updateTitle(t('patient.label'))
49	  }, [updateTitle, t])
50
51	  const breadcrumbs = [
52	    { i18nKey: 'patients.label', location: '/patients' },
53	    { text: getPatientFullName(patient), location: `/patients/${id}` },
54	  ]
55	  useAddBreadcrumbs(breadcrumbs, true)
56
57	  useEffect(() => {
58	    const buttons = []
59	    if (permissions.includes(Permissions.WritePatients)) {
60	      buttons.push(
61	        <Button
62	          key="editPatientButton"
63	          color="success"
64	          icon="edit"
65	          outlined
66	          onClick={() => {
67	            history.push(`/patients/edit/${id}`)
68	          }}
69	        >
70	          {t('actions.edit')}
71	        </Button>,
72	      )
73	    }
74
75	    setButtonToolBar(buttons)
76
77	    return () => {
78	      setButtonToolBar([])
79	    }
80	  }, [setButtonToolBar, history, id, permissions, t])
81
82	  if (status === 'loading' || !patient) {
83	    return <Spinner color="blue" loading size={[10, 25]} type="ScaleLoader" />
84	  }
85
86	  return (
87	    <div>
88	      {' '}
89	      <ImportantPatientInfo patient={patient} />
90	      <div>
91	        <TabsHeader>
92	          <Tab
93	            active={location.pathname === `/patients/${patient.id}`}
94	            label={t('patient.generalInformation')}
95	            onClick={() => history.push(`/patients/${patient.id}`)}
96	          />
97	          <Tab
98	            active={location.pathname === `/patients/${patient.id}/relatedpersons`}
99	            label={t('patient.relatedPersons.label')}
100	            onClick={() => history.push(`/patients/${patient.id}/relatedpersons`)}
101	          />
102	          <Tab
103	            active={location.pathname === `/patients/${patient.id}/appointments`}
104	            label={t('scheduling.appointments.label')}
105	            onClick={() => history.push(`/patients/${patient.id}/appointments`)}
106	          />
107	          <Tab
108	            active={location.pathname.startsWith(`/patients/${patient.id}/allergies`)}
109	            label={t('patient.allergies.label')}
110	            onClick={() => history.push(`/patients/${patient.id}/allergies`)}
111	          />
112	          <Tab
113	            active={location.pathname.startsWith(`/patients/${patient.id}/diagnoses`)}
114	            label={t('patient.diagnoses.label')}
115	            onClick={() => history.push(`/patients/${patient.id}/diagnoses`)}
116	          />
117	          <Tab
118	            active={location.pathname.startsWith(`/patients/${patient.id}/notes`)}
119	            label={t('patient.notes.label')}
120	            onClick={() => history.push(`/patients/${patient.id}/notes`)}
121	          />
122	          <Tab
123	            active={location.pathname === `/patients/${patient.id}/medications`}
124	            label={t('patient.medications.label')}
125	            onClick={() => history.push(`/patients/${patient.id}/medications`)}
126	          />
127	          <Tab
128	            active={location.pathname === `/patients/${patient.id}/labs`}
129	            label={t('patient.labs.label')}
130	            onClick={() => history.push(`/patients/${patient.id}/labs`)}
131	          />
132	          <Tab
133	            active={location.pathname.startsWith(`/patients/${patient.id}/care-plans`)}
134	            label={t('patient.carePlan.label')}
135	            onClick={() => history.push(`/patients/${patient.id}/care-plans`)}
136	          />
137	          <Tab
138	            active={location.pathname.startsWith(`/patients/${patient.id}/care-goals`)}
139	            label={t('patient.careGoal.label')}
140	            onClick={() => history.push(`/patients/${patient.id}/care-goals`)}
141	          />
142	          <Tab
143	            active={location.pathname.startsWith(`/patients/${patient.id}/visits`)}
144	            label={t('patient.visits.label')}
145	            onClick={() => history.push(`/patients/${patient.id}/visits`)}
146	          />
147	          <Tab
148	            active={location.pathname.startsWith(`/patients/${patient.id}/history`)}
149	            label={t('patient.history.label')}
150	            onClick={() => history.push(`/patients/${patient.id}/history`)}
151	          />
152	        </TabsHeader>
153	        <Panel>
154	          <Route exact path={path}>
155	            <GeneralInformation patient={patient} />
156	          </Route>
157	          <Route exact path={`${path}/relatedpersons`}>
158	            <RelatedPerson patient={patient} />
159	          </Route>
160	          <Route exact path={`${path}/appointments`}>
161	            <AppointmentsList patient={patient} />
162	          </Route>
163	          <Route path={`${path}/allergies`}>
164	            <Allergies patient={patient} />
165	          </Route>
166	          <Route path={`${path}/diagnoses`}>
167	            <Diagnoses />
168	          </Route>
169	          <Route exact path={`${path}/notes`}>
170	            <Note patient={patient} />
171	          </Route>
172	          <Route exact path={`${path}/medications`}>
173	            <Medications patient={patient} />
174	          </Route>
175	          <Route exact path={`${path}/labs`}>
176	            <Labs patient={patient} />
177	          </Route>
178	          <Route path={`${path}/care-plans`}>
179	            <CarePlanTab />
180	          </Route>
181	          <Route path={`${path}/care-goals`}>
182	            <CareGoalTab />
183	          </Route>
184	          <Route path={`${path}/visits`}>
185	            <VisitTab patientId={patient.id} />
186	          </Route>
187	          <Route path={`${path}/history`}>
188	            <HistoryTab patientId={patient.id} />
189	          </Route>
190	        </Panel>
191	      </div>
192	    </div>
193	  )
194	}
195
196	export default withRouter(ViewPatient)
197	


bash
command
grep -r "useEffect.*return" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -20
system
Tool ran without output or errors


bash
command
grep -r "return () =>" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -20
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidents.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts:    return () => {
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts:    return () => clearTimeout(debounceHandler)
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts:    return () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/view/ViewAppointment.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/medications/search/ViewMedications.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/patients/view/ViewPatient.tsx:    return () => {
/tmp/inputs/hospitalrun-frontend/src/patients/search/ViewPatients.tsx:    return () => {


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts with line numbers:
1	import { useCallback } from 'react'
2	import { useTranslation } from 'react-i18next'
3
4	export default function useTranslator() {
5	  const { t } = useTranslation()
6
7	  const translate = useCallback((key: any): any => (key !== undefined ? t(key) : undefined), [t])
8
9	  return {
10	    t: translate,
11	  }
12	}
13	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/public/manifest.json
output
Here's the content of /tmp/inputs/hospitalrun-frontend/public/manifest.json with line numbers:
1	{
2	  "short_name": "HospitalRun",
3	  "name": "HospitalRun",
4	  "icons": [
5	    {
6	      "src": "favicon.ico",
7	      "sizes": "64x64 32x32 24x24 16x16",
8	      "type": "image/x-icon"
9	    },
10	    {
11	      "src": "logo.png",
12	      "type": "image/png",
13	      "sizes": "192x192"
14	    },
15	    {
16	      "src": "logo.png",
17	      "type": "image/png",
18	      "sizes": "512x512"
19	    }
20	  ],
21	  "start_url": ".",
22	  "display": "fullscreen",
23	  "theme_color": "#1abc9c",
24	  "background_color": "#fdfffc"
25	}
26	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/public/index.html
output
Here's the content of /tmp/inputs/hospitalrun-frontend/public/index.html with line numbers:
1	<!DOCTYPE html>
2	<html lang="en">
3	  <head>
4	    <meta charset="utf-8" />
5	    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
6	    <meta name="viewport" content="width=device-width, initial-scale=1" />
7	    <meta name="theme-color" content="#1abc9c" />
8	    <meta
9	      name="description"
10	      content="HospitalRun"
11	    />
12	    <link rel="apple-touch-icon" href="logo.png" />
13	    <!--
14	      manifest.json provides metadata used when your web app is installed on a
15	      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
16	    -->
17	    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
18	    <!--
19	      Notice the use of %PUBLIC_URL% in the tags above.
20	      It will be replaced with the URL of the `public` folder during the build.
21	      Only files inside the `public` folder can be referenced from the HTML.
22
23	      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
24	      work correctly both with client-side routing and a non-root public URL.
25	      Learn how to configure a non-root public URL by running `npm run build`.
26	    -->
27	    <title>HospitalRun</title>
28	  </head>
29	  <body>
30	    <noscript>You need to enable JavaScript to run this app.</noscript>
31	    <div id="root"></div>
32	    <!--
33	      This HTML file is a template.
34	      If you open it directly in the browser, you will see an empty page.
35
36	      You can add webfonts, meta tags, or analytics to this file.
37	      The build step will place the bundled scripts into the <body> tag.
38
39	      To begin the development, run `npm start` or `yarn start`.
40	      To create a production bundle, use `npm run build` or `yarn build`.
41	    -->
42	  </body>
43	</html>
44	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidents.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidents.tsx with line numbers:
1	import { Select, Label, Button, Container, Row, Column } from '@hospitalrun/components'
2	import React, { useEffect, useState } from 'react'
3	import { useHistory } from 'react-router-dom'
4
5	import { useButtonToolbarSetter } from '../../page-header/button-toolbar/ButtonBarProvider'
6	import { useUpdateTitle } from '../../page-header/title/TitleContext'
7	import { SelectOption } from '../../shared/components/input/SelectOption'
8	import useTranslator from '../../shared/hooks/useTranslator'
9	import IncidentFilter from '../IncidentFilter'
10	import ViewIncidentsTable from './ViewIncidentsTable'
11
12	const ViewIncidents = () => {
13	  const { t } = useTranslator()
14	  const history = useHistory()
15	  const setButtonToolBar = useButtonToolbarSetter()
16	  const updateTitle = useUpdateTitle()
17	  useEffect(() => {
18	    updateTitle(t('incidents.reports.label'))
19	  })
20	  const [searchFilter, setSearchFilter] = useState(IncidentFilter.reported)
21
22	  useEffect(() => {
23	    setButtonToolBar([
24	      <Button
25	        key="newIncidentButton"
26	        outlined
27	        color="success"
28	        icon="add"
29	        onClick={() => history.push('/incidents/new')}
30	      >
31	        {t('incidents.reports.new')}
32	      </Button>,
33	    ])
34
35	    return () => {
36	      setButtonToolBar([])
37	    }
38	  }, [setButtonToolBar, t, history])
39
40	  const filterOptions: SelectOption[] = Object.values(IncidentFilter).map((filter) => ({
41	    label: t(`incidents.status.${filter}`),
42	    value: `${filter}`,
43	  }))
44
45	  return (
46	    <Container>
47	      <Row>
48	        <Column md={3} lg={2}>
49	          <Label text={t('incidents.filterTitle')} title="type" />
50	          <Select
51	            id="type"
52	            options={filterOptions}
53	            defaultSelected={filterOptions.filter(({ value }) => value === searchFilter)}
54	            onChange={(values) => setSearchFilter(values[0] as IncidentFilter)}
55	            disabled={false}
56	          />
57	        </Column>
58	      </Row>
59	      <Row>
60	        <ViewIncidentsTable searchRequest={{ status: searchFilter }} />
61	      </Row>
62	    </Container>
63	  )
64	}
65
66	export default ViewIncidents
67	


bash
command
grep -r "sync\|replicate" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null
output
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:              onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  const onResolve = async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:    onSuccess: async (data: Incident) => {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:  return async function requestImaging(request: ImagingRequest): Promise<void> {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:                onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/__tests__/App.test.tsx:it('renders without crashing', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/new if the user does not have ReportIncident permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('The incident visualize screen when /incidents/visualize is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/visualize if the user does not have ViewIncidentWidgets permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('The view incident screen when /incidents/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/:id if the user does not have ViewIncident permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a department form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a category form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a category item form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a description formField element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  // it(' renders action save button after all the input fields are filled out', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('should display errors if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:    it('should navigate to /incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the date of the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the status of the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render who reported the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the date the incident was reported', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the department input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the category input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the categoryItem input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the description input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should mark the status as resolved and fill in the resolved date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx:it('should not render ViewIncidentDetails if there are no Permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx:it('should not  ViewIncidentDetails no there is no ID', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should display a table of incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should display a download button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should populate export data correctly', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should navigate to the view incident screen when view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidents.test.tsx:  it('should render a table with the incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncident.test.tsx:  it('should get an incident by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useResolvedIncident.test.tsx:  it('should mark incident as resolved and save', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncidents.test.tsx:  it('it should search incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useReportIncident.test.tsx:  it('should save the incident with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useReportIncident.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/util/validate-incident.test.ts:  it('should validate the required fields apart of an incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/util/validate-incident.test.ts:  it('should validate that the incident date is not a date in the future', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/Imagings.test.tsx:      it('should render the new imaging request screen when /imaging/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/Imagings.test.tsx:      it('should not navigate to /imagings/new if the user does not have RequestImaging permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useRequestImaging.test.tsx:  it('should save the imaging request with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useRequestImaging.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useImagingSearch.test.tsx:  it('it should search imaging requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useImagingRequest.test.tsx:  it('should get an imaging request by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/search/ImagingRequestTable.test.tsx:  it('should render a table of imaging requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a dropdown list of visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders an image type input box', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a status types select input field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Navigate back to /imaging', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Save the imaging request and navigate to "/imaging"', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/util/validate-imaging-request.test.ts:  it('should validate the required fields apart of an incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:  docs.patients.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return a patient with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should escape all special chars from search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return all records that patient code matches search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return all records that fullName contains search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should match search criteria with case insensitive match', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should find all patients in the database sorted by their ids', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate an id that is a uuid for the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate a patient code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should override the created date and last updated date even if one was passed in', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should save the patient if an id was not on the entity', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the patient if one was already existing', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the existing fields', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should add new fields without changing existing fields', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should not update the created date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should delete the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should create an id that is a uuid', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should find an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should escape all special chars from search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:  docs.imagings.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should return a imaging with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate an id that is a uuid for the imaging', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate a imaging code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should override the created date and last updated date even if one was passed in', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:  docs.labs.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:      docs.labs.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return a lab with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should generate a lab code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that lab type matches search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that contains search text in the type', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that contains search text in code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should match search criteria with case insesitive match', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that matches an specific status', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return records with search text and specific status', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should find all labs in the database sorted by their requestedOn', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should login with the username and password', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should dispatch login error if login was not successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should logout the user', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should get the detail of the current user and update the store', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useUpdateAppointment.test.tsx:  it('should update appointment', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useScheduleAppointment.test.tsx:  it('should save the appointment with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useScheduleAppointment.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useAppointments.test.tsx:  it('should get an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useDeleteAppointment.test.tsx:  it('should remove an appointment with the given id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useAppointment.test.tsx:  it('should get an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the appointments screen when /appointments is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the new appointment screen when /appointments/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the edit appointment screen when /appointments/edit/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have write appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/ViewAppointments.test.tsx:  it('should add a "New Appointment" button to the button tool bar', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/ViewAppointments.test.tsx:  it('should render a calendar with the proper events', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should add a "Edit Appointment" button to the button tool bar if has WriteAppointment permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should add a "Delete Appointment" button to the button tool bar if has DeleteAppointment permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('button toolbar empty if has only ReadAppointments permission', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should call getAppointment by id if id is present', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should render an AppointmentDetailForm with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should delete the appointment after clicking the delete appointment button, and confirming in the delete confirmation modal', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should close the modal when the toggle button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should render an Appointment Detail Component', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should have error when error saving without patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should have error when error saving with end time earlier than start time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should call AppointmentRepo.save when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should navigate to /appointments/:id when a new appointment is created', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should navigate back to /appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  const setup = async (mockAppointment: Appointment, mockPatient: Patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should load an appointment when component loads', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should updateAppointment when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should navigate to /appointments/:id when save is successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should navigate to /appointments/:id when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should render an edit appointment form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display the patients full name', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the medication ', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the requested on date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should not display the canceled date if the medication is not canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the notes in the notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a warning badge if the status is draft', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a update medication and cancel medication button if the medication is in a draft state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a danger badge if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display the canceled on date if the medication request has been canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should not display cancel button if the medication is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should not display an update button if the medication is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should update the medication with the new information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should mark the status as canceled and fill in the cancelled on date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/Medications.test.tsx:      it('should render the view medication screen when /medications/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/Medications.test.tsx:      it('should not navigate to /medications/:id if the user does not have ViewMedication permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should fetch the medication and patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should cancel a medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should call on success callback if provided', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should request a new medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should execute the onSuccess callback if provided', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should update the medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should call the onSuccess callback if successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/hooks/useMedicationSearch.test.tsx:  it('it should search medication requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestSearch.test.tsx:  it('should render a select component with the default value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should render a table with the correct columns', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should fetch medications and display it', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should navigate to the medication when the view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:  const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should display button to add new medication request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should not display button to add new medication request if the user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should render a table with data with the default search', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should render a medication request search component', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should update the table when the search changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should render a medication input box with label', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication request status options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication intent options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication priorty select options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should render a notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should navigate back to /medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should save the medication request and navigate to "/medications/:id"', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:export default async function executeMutation<TResult>(
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:  await act(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-query.util.tsx:export default async function executeQuery<TResult>(
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the view labs screen when /labs is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs if the user does not have ViewLabs permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the new lab request screen when /labs/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs/new if the user does not have RequestLab permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the view lab screen when /labs/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs/:id if the user does not have ViewLab permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:  jest.spyOn(LabRepository, 'saveOrUpdate').mockImplementation(async (newOrUpdatedLab) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it("should display the patients' full name", async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the lab-type', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the requested on date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the completed date if the lab is not completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the cancelled date if the lab is not cancelled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should render a result text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display past notes if there is not', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the past notes that are not deleted', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the past notes that are deleted', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the notes text field empty', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display errors', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a warning badge if the status is requested', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a update lab, complete lab, and cancel lab button if the lab is in a requested state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a danger badge if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display the cancelled on date if the lab request has been cancelled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display update, complete, and cancel button if the lab is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display notes text field if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a primary badge if the status is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display the completed on date if the lab request has been completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display update, complete, and cancel buttons if the lab is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display notes text field if the status is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should update the lab with the new information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should be able delete an note from the lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should mark the status as completed and fill in the completed date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should disallow deleting notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should mark the status as canceled and redirect to /labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should disallow deleting notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should display button to add new lab request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should not display button to add new lab request if the user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should render a table with data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should navigate to the lab when the view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should search for labs when dropdown changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should search for labs after the search text has not changed for 500 milliseconds', async (): Promise<void> => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useCancelLab.test.ts:  it('should cancel a lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useUpdateLab.test.ts:  it('should update lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useRequestLab.test.ts:  it('should save new request lab', async () => {
< truncated lines 241-329 >
...re goals tab as active when route starts with /patients/:id/care-goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/view/ViewPatient.test.tsx:  it('should mark the visits tab as active when it is clicked and render the visit tab component when route is /patients/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/view/ViewPatient.test.tsx:  it('should render the visits tab as active when route starts with /patients/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render the history table headers', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render correct patient histories', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('render an action button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should navigate to lab record on lab history click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should navigate to appointment record on appointment history click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render a warning message if there are no histories', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTab.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTab.test.tsx:    it('should render patient history', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should render a general information form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should pass the error object to general information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should dispatch createPatient when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  // it('should reveal modal (return true) when save button is clicked if an existing patient has the same information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should navigate to /patients/:id and display a message after a new patient is successfully created', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should navigate to /patients when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientCarePlan.test.tsx:  it('should get patient patient care plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should throw an error if related person not specified', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should throw an error if the relation type is not specified', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should add the related person to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientLabs.test.tsx:  it('should get patient labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCarePlan.test.tsx:  it('should add a care plan to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCarePlan.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientVisit.test.tsx:  it('should add a visit to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientVisit.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientNote.test.ts:  it('should throw an error if note validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientNote.test.ts:  it('should add the note to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientAppointments.test.tsx:  it(`should return the should return the patient's appointments`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatient.test.tsx:  it('should return the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientMedications.test.tsx:  it('should get patient medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useVisit.test.tsx:  it(`should return the should return the patient's visit`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useRemovePatientRelatedPerson.test.tsx:  it('should remove a related person with the given id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientVisits.test.tsx:  it(`should return the should return the patient's visits`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNote.test.ts:  it('should return a note given a patient id and note id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNote.test.ts:  it('should throw an error if patient does not have note with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddAllergy.test.tsx:  it('should throw an error if allergy validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddAllergy.test.tsx:  it('should add the allergy to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useCarePlan.test.tsx:  it('should return a care plan  given a patient id and care plan id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useCarePlan.test.tsx:  it('should throw an error if patient does not have care plan with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAllergy.test.tsx:  it('should return an allergy given a patient id and allergy id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAllergy.test.tsx:  it('should throw an error if patient does not have allergy with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNotes.test.ts:  it('should get patient notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientAllergies.test.tsx:  it('should get patient allergies', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientRelatedPersons.test.tsx:  it('should get the patient by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCareGoal.test.tsx:  it('should add a care goal to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCareGoal.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should return a diagnosis successfully given a valid patient id and diagnosis id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should throw an error if patient id is not valid', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should throw an error if patient id is valid but diagnosis id is not', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientDiagnosis.test.tsx:  it('should throw an error if diagnosis validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientDiagnosis.test.tsx:  it('should add the diaganosis to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatients.test.tsx:  it('should search patients with the proper search request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should render a list of notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should display a warning when no notes are present', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should navigate to the note view when the note is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:  it('should render a modal with the correct labels', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:  it('should render note error', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:    it('should call the onCloseButtonCLick function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:    it('should dispatch add note', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/ViewNote.test.tsx:  it('should render a note input with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should render an edit patient form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should load a Patient when component loads', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should dispatch updatePatient when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should navigate to /patients/:id when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/ViewPatientsTable.test.tsx:  it('should display no patients exist if total patient count is 0', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/ViewPatientsTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/SearchPatients.test.tsx:  it('should render a view patients table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/SearchPatients.test.tsx:  it('should update view patients table search request when patient search input changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnoses.test.tsx:const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnoses.test.tsx:  it('should render a diagnoses table with the patient id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:const setup = async (patient = expectedPatient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should navigate to the diagnosis view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should display a warning if there are no diagnoses', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render the loading spinner only while diagnosis data is being fetched', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render the diagnosis name', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render a diagnosis form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/AddDiagnosisModal.test.tsx:  it('should dispatch add diagnosis when the save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/AddDiagnosisModal.test.tsx:  it('should call the on close function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:const setup = async (patient = expectedPatient, permissions = [Permissions.AddDiagnosis]) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:    it('should render an add diagnoses button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:    it('should open the Add Diagnosis Modal', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoals.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoals.test.tsx:  it('should render a care goals table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should not render add care goal button if user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should be able to create a new care goal if user has permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should open and close the modal when the add care goal and close buttons are clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should render care goal table when on patients/:id/care-goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should render care goal view when on patients/:id/care-goals/:careGoalId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoal.test.tsx:  it('should render the care goal form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  const setup = async (expectedPatient = patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should navigate to the care goal view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should display a warning if there are no care goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalForm.test.tsx:  it('should call onChange handler when description changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalForm.test.tsx:  it('should render the forms field in an error state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  const setup = async (expectedPatient = patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should navigate to the care plan view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should display a warning if there are no care plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlans.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlans.test.tsx:  it('should render a care plans table with the patient id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlan.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlan.test.tsx:  it('should render the care plan title', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/AddCarePlanModal.test.tsx:  it('should call the on close function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/AddCarePlanModal.test.tsx:  it('should save care plan when the save button is clicked and close', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanForm.test.tsx:  it('should render a condition selector with the diagnoses from the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanForm.test.tsx:  it('should call the on change handler when condition changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  const setup = async (route: string, permissions: Permissions[]) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render an add care plan button if user has correct permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should open the add care plan modal on click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should close the modal when the close button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should not render care plan button if user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render the care plans table when on /patient/:id/care-plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render the care plan view when on /patient/:id/care-plans/:carePlanId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should navigate to the visit view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should display a warning if there are no visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/AddVisitModal.test.tsx:  it('should save the visit when the save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/ViewVisit.test.tsx:  it('should render the visit reason', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/ViewVisit.test.tsx:  it('should render a visit form with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should close the modal when the close button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should render the visits table when on /patient/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should render the visit view when on /patient/:id/visits/:visitId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a list of appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should navigate to appointment profile on appointment click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a warning message if there are no appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a new appointment button if there is an appointment', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a new appointment button if there are no appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should navigate to new appointment page', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:const setup = async (patient = expectedPatient, medications = expectedMedications) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render patient medications table headers', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render patient medication list', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('render an action button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should navigate to medication view on medication click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render a warning message if there are no medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/Medications.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/Medications.test.tsx:    it('should render patient medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/Labs.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/Labs.test.tsx:    it('should render patient labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:const setup = async (patient = expectedPatient, labs = expectedLabs) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should render a list of labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should navigate to lab view on lab click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should render a warning message if there are no labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async find(id: string): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async findAll(sort = Unsorted): Promise<T[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:        async (s): Promise<SortRequest> => {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async count(): Promise<number> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async search(criteria: any): Promise<T[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async save(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async saveOrUpdate(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async delete(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async search(container: SearchContainer): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async save(entity: Medication): Promise<Medication> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async findAllByPatientId(patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async search(text: string): Promise<Patient[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async save(entity: Patient): Promise<Patient> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async createIndex() {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getAppointments(patientId: string): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getLabs(patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getMedications(patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/IncidentRepository.ts:  async search(options: SearchOptions): Promise<Incident[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async search(container: SearchContainer): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async save(entity: Lab): Promise<Lab> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async findAllByPatientId(patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts:  async search(container: SearchContainer): Promise<Imaging[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts:  async save(entity: Imaging): Promise<Imaging> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts:  async searchPatientAppointments(patientId: string, text: string): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts:export const updateSidebar = (): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:  localDb.sync(serverDb, { live: true, retry: true })
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:        hasMany: { type: 'appointment', options: { queryInverse: 'patient', async: true } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:      labs: { hasMany: { type: 'lab', options: { queryInverse: 'patient', async: true } } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:        hasMany: { type: 'medication', options: { queryInverse: 'patient', async: true } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:      imagings: { hasMany: { type: 'imaging', options: { queryInverse: 'patient', async: true } } },
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const getCurrentSession = (username: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const login = (username: string, password: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const logout = (): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:async function fetchAppointments(): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:async function createNewAppointment(appointment: Appointment): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:async function deleteAppointment(request: deleteAppointmentRequest): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:async function updateAppointment(appointment: Appointment): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/AppointmentDetailForm.tsx:              onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:      appointments.map(async (appointment: Appointment) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:export const fetchMedication = (medicationId: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch, getState) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/ViewMedication.tsx:  const onUpdate = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/ViewMedication.tsx:  const onCancel = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/requests/NewMedicationRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/requests/NewMedicationRequest.tsx:            onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const deleteNote = async (noteIdToDelete: string) => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onUpdate = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onComplete = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onCancel = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:                  <Button icon="remove" onClick={async () => deleteNote(note.id)} color="danger">
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useRequestLab.ts:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCancelLab.ts:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:    onSuccess: async (data) => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useUpdateLab.ts:    onSuccess: async (data) => {
/tmp/inputs/hospitalrun-frontend/src/labs/requests/NewLabRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/requests/NewLabRequest.tsx:                onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:export const fetchPatients = (sortRequest: SortRequest = Unsorted): AppThunk => async (
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:export const searchPatients = (searchString: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/allergies/NewAllergyModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/AddRelatedPersonModal.tsx:  const onSearch = async (query: string) => {
/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/AddRelatedPersonModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:async function removeRelatedPerson(request: removeRelatedPersonRequest): Promise<RelatedPerson[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:        data.map(async (rp) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx:async function addDiagnosis(request: AddDiagnosisRequest): Promise<Diagnosis[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCarePlans.tsx:async function fetchPatientCarePlans(_: string, patientId: string): Promise<CarePlan[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCareGoals.tsx:async function fetchPatientCareGoals(_: string, patientId: string): Promise<CareGoal[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientVisits.tsx:async function fetchPatientVisits(_: string, patientId: string): Promise<Visit[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientRelatedPersons.tsx:async function fetchPatientRelatedPersons(
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientRelatedPersons.tsx:    relatedPersons.map(async (person) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx:async function addAllergy(request: AddAllergyRequest): Promise<Allergy[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCarePlan.tsx:async function getCarePlan(_: string, patientId: string, allergyId: string): Promise<CarePlan> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useVisit.tsx:async function fetchVisit(
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx:async function addCarePlan(request: AddCarePlanRequest): Promise<CarePlan[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientDiagnoses.tsx:async function fetchPatientDiagnoses(_: string, patientId: string): Promise<Diagnosis[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNotes.tsx:async function fetchPatientNotes(_: string, patientId: string): Promise<Note[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx:async function addNote(request: AddNoteRequest): Promise<Note[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx:async function addVisit(request: AddVisitRequest): Promise<Visit[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientLabs.tsx:async function fetchPatientLabs(_: string, patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx:async function addCareGoal(request: AddCareGoalRequest): Promise<CareGoal[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNote.tsx:async function getNote(_: string, patientId: string, noteId: string): Promise<Note> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAllergy.tsx:async function getAllergy(_: string, patientId: string, allergyId: string): Promise<Allergy> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCareGoal.tsx:async function getCareGoal(_: string, patientId: string, careGoalId: string): Promise<CareGoal> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAppointments.tsx:async function fetchPatientAppointments(_: string, patientId: string): Promise<Appointments[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAllergies.tsx:async function fetchPatientAllergies(_: string, patientId: string): Promise<Allergy[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:async function addRelatedPerson(request: AddRelatedPersonRequest): Promise<RelatedPerson[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:        data.map(async (rp) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatients.tsx:async function fetchPatients(_: any, searchRequest: PatientSearchRequest): Promise<PatientsResult> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useDiagnosis.tsx:async function getDiagnosis(_: string, patientId: string, diagnosisId: string): Promise<Diagnosis> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientMedications.tsx:async function fetchPatientMedications(_: string, patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/notes/NewNoteModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/edit/EditPatient.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/AddDiagnosisModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/AddCareGoalModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/AddCarePlanModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/visits/AddVisitModal.tsx:  const onSaveButtonClick = async () => {

Now let me look at a few more areas to get a comprehensive understanding:

bash
command
grep -r "TypeaheadPatient\|usePatientTypeahead\|Typeahead" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" 2>/dev/null | head -10
output
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:import { Button, Row, Column, Typeahead, Label } from '@hospitalrun/components'
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:            <Label htmlFor="patientTypeahead" text={t('incidents.reports.patient')} />
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:            <Typeahead
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:              id="patientTypeahead"
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:import { Select, Typeahead, Label, Button, Alert, Column, Row } from '@hospitalrun/components'
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:              <Label htmlFor="patientTypeahead" isRequired text={t('imagings.imaging.patient')} />
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:              <Typeahead
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:                id="patientTypeahead"
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/requests/NewLabRequest.test.tsx:      const patientTypeahead = screen.getByPlaceholderText(/labs.lab.patient/i)
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/requests/NewLabRequest.test.tsx:      userEvent.type(patientTypeahead, 'Jim Bob')


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/tsconfig.json
output
Here's the content of /tmp/inputs/hospitalrun-frontend/tsconfig.json with line numbers:
1	{
2	  "include": [
3	    "src",
4	    "types",
5	    "./setupTests.js"
6	  ],
7	  "exclude": [
8	    "node_modules",
9	    "dist"
10	  ],
11	  "compilerOptions": {
12	    "moduleResolution": "node",
13	    "target": "es5",
14	    "module": "esnext",
15	    "outDir": "build",
16	    "lib": [
17	      "dom",
18	      "esnext"
19	    ],
20	    "strict": true,
21	    "esModuleInterop": true,
22	    "sourceMap": true,
23	    "removeComments": true,
24	    "newLine": "lf",
25	    "noUnusedLocals": true,
26	    "noUnusedParameters": true,
27	    "noImplicitReturns": true,
28	    "noFallthroughCasesInSwitch": true,
29	    "forceConsistentCasingInFileNames": true,
30	    "resolveJsonModule": true,
31	    "importHelpers": true,
32	    "jsx": "react",
33	    "allowJs": true,
34	    "skipLibCheck": true,
35	    "noEmit": true,
36	    "isolatedModules": true,
37	    "allowSyntheticDefaultImports": true
38	  }
39	}
40	

Based on my comprehensive analysis of the HospitalRun frontend codebase, here are the major frontend optimization techniques implemented throughout the web app:

## 1. Data Fetching & Caching with React Query

The app makes extensive use of `react-query` for server state management, which provides automatic caching, background refetching, and deduplication. Custom hooks like `usePatient`, `useIncident`, `useAppointments`, etc. all leverage `useQuery` for fetching data and `useMutation` for updates. The caching system includes intelligent cache invalidation via `queryCache.invalidateQueries()` after mutations, ensuring data consistency without unnecessary refetches.

## 2. Debounced Search Inputs

A custom `useDebounce` hook is used throughout the app to delay search requests until the user stops typing (typically 500ms). This is particularly evident in the `PatientSearchInput` component, preventing excessive API calls during rapid typing.

## 3. Service Worker & Offline Support (PWA)

The app registers a service worker for production builds, enabling cache-first loading on subsequent visits and offline capabilities. Combined with PouchDB's local database and live sync (`localDb.sync(serverDb, { live: true, retry: true })`), users can continue working even without network connectivity.

## 4. Optimized Re-render Prevention

The codebase uses `useCallback` for memoizing functions (like button handlers and search callbacks) to prevent unnecessary child re-renders. The `useTranslator` hook also wraps the translation function in `useCallback` to maintain referential stability.

## 5. Suspense for Code Splitting

The main `App` component wraps the router in React's `Suspense` boundary with a loading spinner fallback, enabling the framework to handle lazy-loaded components gracefully.

## 6. Client-Side Local Database with PouchDB

Instead of always hitting the remote server, the app uses a local PouchDB database that syncs with the server. All queries run against `localDb`, which is much faster than network requests. Database indexes are pre-created on commonly queried fields (like patient name and code) for efficient lookups.

## 7. Conditional Query Execution

React Query's `enabled` option is used to prevent queries from running when not needed—for example, `useQuery(['patient', id], fetchPatient, { enabled: id })` only fetches when an ID is actually provided.

## 8. Proper Cleanup in Effects

Throughout the codebase, `useEffect` hooks consistently return cleanup functions to remove event listeners, clear timers, and reset state—preventing memory leaks and stale updates (like the cancellation pattern in `App.tsx` or event listener removal in `useNetworkStatus`).

## 9. Context API for Shared State

Rather than prop-drilling, the app uses React Context for cross-cutting concerns like page titles (`TitleContext`) and button toolbar state (`ButtonBarProvider`). These are split into separate state/dispatch contexts following best practices to minimize re-renders.

## 10. Redux Toolkit for Global State

The app uses Redux Toolkit's `configureStore` and `createSlice`, which includes built-in Immer for immutable updates and automatic action creators—reducing boilerplate and improving developer efficiency without runtime overhead.

## 11. Browser Target Optimization

The `browserslist` configuration in `package.json` targets modern browsers (`>0.2%`, excluding `op_mini`) for production, allowing the build toolchain to skip unnecessary polyfills and reduce bundle size.

## 12. Network Status Awareness

A dedicated `useNetworkStatus` hook monitors online/offline events and displays appropriate UI feedback, allowing the app to gracefully handle network changes and inform users of connectivity state.



3. Here is model b’s response: 
bash
command
find /tmp/inputs/hospitalrun-frontend -type f -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.json" | head -50
output
/tmp/inputs/hospitalrun-frontend/jest.config.js
/tmp/inputs/hospitalrun-frontend/package.json
/tmp/inputs/hospitalrun-frontend/.eslintrc.js
/tmp/inputs/hospitalrun-frontend/commitlint.config.js
/tmp/inputs/hospitalrun-frontend/tsconfig.json
/tmp/inputs/hospitalrun-frontend/src/index.tsx
/tmp/inputs/hospitalrun-frontend/src/App.tsx
/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
/tmp/inputs/hospitalrun-frontend/src/custom-pouchdb.d.ts
/tmp/inputs/hospitalrun-frontend/src/react-app-env.d.ts
/tmp/inputs/hospitalrun-frontend/src/setupTests.js
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/IncidentFilter.ts
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/model/IncidentSearchRequest.ts
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx
/tmp/inputs/hospitalrun-frontend/src/incidents/util/validate-incident.ts
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/model/ImagingSearchRequest.ts
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx
/tmp/inputs/hospitalrun-frontend/src/imagings/util/validate-imaging-request.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/Breadcrumbs.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/breadcrumbs-slice.ts
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonToolBar.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx
/tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/App.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/HospitalRun.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidents.test.tsx
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncident.test.tsx


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend, excluding hidden items and node_modules:
113M	/tmp/inputs/hospitalrun-frontend
79K	/tmp/inputs/hospitalrun-frontend/CHANGELOG.md
1.5K	/tmp/inputs/hospitalrun-frontend/LICENSE
3.0K	/tmp/inputs/hospitalrun-frontend/README.md
1.5K	/tmp/inputs/hospitalrun-frontend/SECURITY.md
3.0K	/tmp/inputs/hospitalrun-frontend/azure.yaml
512	/tmp/inputs/hospitalrun-frontend/commitlint.config.js
3.0K	/tmp/inputs/hospitalrun-frontend/couchdb
512	/tmp/inputs/hospitalrun-frontend/couchdb/Dockerfile
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-cleanup.bat
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-cleanup.sh
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-init.bat
512	/tmp/inputs/hospitalrun-frontend/couchdb/couchdb-init.sh
512	/tmp/inputs/hospitalrun-frontend/couchdb/local.ini
1.5K	/tmp/inputs/hospitalrun-frontend/docker-compose.yml
512	/tmp/inputs/hospitalrun-frontend/docs
512	/tmp/inputs/hospitalrun-frontend/docs/index.md
512	/tmp/inputs/hospitalrun-frontend/jest.config.js
512	/tmp/inputs/hospitalrun-frontend/mkdocs.yml
512	/tmp/inputs/hospitalrun-frontend/nginx.conf
5.5K	/tmp/inputs/hospitalrun-frontend/package.json
20K	/tmp/inputs/hospitalrun-frontend/public
1.5K	/tmp/inputs/hospitalrun-frontend/public/favicon.ico
2.0K	/tmp/inputs/hospitalrun-frontend/public/index.html
16K	/tmp/inputs/hospitalrun-frontend/public/logo.png
512	/tmp/inputs/hospitalrun-frontend/public/manifest.json
512	/tmp/inputs/hospitalrun-frontend/public/robots.txt
3.5K	/tmp/inputs/hospitalrun-frontend/scripts
2.5K	/tmp/inputs/hospitalrun-frontend/scripts/check-translations
512	/tmp/inputs/hospitalrun-frontend/scripts/tsconfig.json
1.2M	/tmp/inputs/hospitalrun-frontend/src
2.0K	/tmp/inputs/hospitalrun-frontend/src/App.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
3.0K	/tmp/inputs/hospitalrun-frontend/src/__mocks__
564K	/tmp/inputs/hospitalrun-frontend/src/__tests__
1.5K	/tmp/inputs/hospitalrun-frontend/src/custom-pouchdb.d.ts
512	/tmp/inputs/hospitalrun-frontend/src/dashboard
17K	/tmp/inputs/hospitalrun-frontend/src/imagings
29K	/tmp/inputs/hospitalrun-frontend/src/incidents
2.0K	/tmp/inputs/hospitalrun-frontend/src/index.css
1.0K	/tmp/inputs/hospitalrun-frontend/src/index.tsx
28K	/tmp/inputs/hospitalrun-frontend/src/labs
36K	/tmp/inputs/hospitalrun-frontend/src/medications
6.5K	/tmp/inputs/hospitalrun-frontend/src/page-header
192K	/tmp/inputs/hospitalrun-frontend/src/patients
512	/tmp/inputs/hospitalrun-frontend/src/react-app-env.d.ts
30K	/tmp/inputs/hospitalrun-frontend/src/scheduling
5.5K	/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/settings
1.0K	/tmp/inputs/hospitalrun-frontend/src/setupTests.js
254K	/tmp/inputs/hospitalrun-frontend/src/shared
4.0K	/tmp/inputs/hospitalrun-frontend/src/user
1.0K	/tmp/inputs/hospitalrun-frontend/tsconfig.json



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/package.json
output
Here's the content of /tmp/inputs/hospitalrun-frontend/package.json with line numbers:
1	{
2	  "name": "@hospitalrun/frontend",
3	  "version": "2.0.0-alpha.7",
4	  "description": "React frontend for HospitalRun",
5	  "private": false,
6	  "license": "MIT",
7	  "dependencies": {
8	    "@hospitalrun/components": "~3.4.0",
9	    "@reduxjs/toolkit": "~1.7.0",
10	    "@types/escape-string-regexp": "~2.0.1",
11	    "@types/json2csv": "~5.0.1",
12	    "@types/pouchdb-find": "~6.3.4",
13	    "bootstrap": "~5.1.0",
14	    "date-fns": "~2.28.0",
15	    "escape-string-regexp": "~4.0.0",
16	    "i18next": "~21.6.0",
17	    "i18next-browser-languagedetector": "~6.1.0",
18	    "i18next-xhr-backend": "~3.2.2",
19	    "json2csv": "~5.0.1",
20	    "lodash": "^4.17.15",
21	    "node-sass": "~7.0.0",
22	    "pouchdb": "~7.2.1",
23	    "pouchdb-adapter-memory": "~7.2.1",
24	    "pouchdb-authentication": "~1.1.3",
25	    "pouchdb-find": "~7.2.1",
26	    "pouchdb-quick-search": "~1.3.0",
27	    "react": "~17.0.1",
28	    "react-bootstrap": "~1.6.0",
29	    "react-bootstrap-typeahead": "~5.2.0",
30	    "react-dom": "~16.13.0",
31	    "react-i18next": "~11.15.0",
32	    "react-query": "~2.25.2",
33	    "react-query-devtools": "~2.6.0",
34	    "react-redux": "~7.2.0",
35	    "react-router": "~5.2.0",
36	    "react-router-dom": "~5.3.0",
37	    "react-scripts": "~3.4.0",
38	    "redux": "~4.1.0",
39	    "redux-thunk": "~2.4.0",
40	    "relational-pouch": "~4.0.0",
41	    "shortid": "^2.2.15",
42	    "typescript": "~3.8.3",
43	    "uuid": "^8.0.0",
44	    "validator": "^13.0.0"
45	  },
46	  "resolutions": {
47	    "moment": "2.24.0"
48	  },
49	  "comments": {
50	    "resolutions": "Added this key as temp fix https://github.com/moment/moment/issues/5484"
51	  },
52	  "repository": {
53	    "type": "git",
54	    "url": "https://github.com/HospitalRun/hospitalrun-frontend.git"
55	  },
56	  "author": "Jack Meyer",
57	  "contributors": [
58	    "Maksim Sinik",
59	    "Stefano Casasola"
60	  ],
61	  "devDependencies": {
62	    "@commitlint/cli": "~16.1.0",
63	    "@commitlint/config-conventional": "~16.0.0",
64	    "@commitlint/core": "~16.0.0",
65	    "@commitlint/prompt": "~16.1.0",
66	    "@testing-library/dom": "~7.31.0",
67	    "@testing-library/jest-dom": "~5.16.1",
68	    "@testing-library/react": "~11.2.2",
69	    "@testing-library/react-hooks": "~7.0.0",
70	    "@testing-library/user-event": "~12.8.3",
71	    "@types/jest": "~27.0.3",
72	    "@types/lodash": "^4.14.150",
73	    "@types/node": "~17.0.0",
74	    "@types/pouchdb": "~6.4.0",
75	    "@types/react": "~17.0.0",
76	    "@types/react-dom": "~17.0.0",
77	    "@types/react-redux": "~7.1.5",
78	    "@types/react-router": "~5.1.2",
79	    "@types/react-router-dom": "~5.3.0",
80	    "@types/redux-mock-store": "~1.0.1",
81	    "@types/shortid": "^0.0.29",
82	    "@types/uuid": "^8.0.0",
83	    "@types/validator": "~13.7.0",
84	    "@typescript-eslint/eslint-plugin": "~3.10.0",
85	    "@typescript-eslint/parser": "~3.10.0",
86	    "chalk": "^5.0.0",
87	    "commitizen": "~4.2.0",
88	    "commitlint-config-cz": "~0.13.0",
89	    "cross-env": "~7.0.0",
90	    "cz-conventional-changelog": "~3.3.0",
91	    "dateformat": "~5.0.2",
92	    "eslint": "~6.8.0",
93	    "eslint-config-airbnb": "~18.2.0",
94	    "eslint-config-prettier": "~7.2.0",
95	    "eslint-import-resolver-typescript": "~2.5.0",
96	    "eslint-plugin-import": "~2.25.1",
97	    "eslint-plugin-jest": "~26.1.0",
98	    "eslint-plugin-jsx-a11y": "~6.5.1",
99	    "eslint-plugin-prettier": "~3.4.0",
100	    "eslint-plugin-react": "~7.28.0",
101	    "eslint-plugin-react-hooks": "~4.3.0",
102	    "history": "4.10.1",
103	    "husky": "~7.0.0",
104	    "jest-canvas-mock": "~2.3.0",
105	    "jest-environment-jsdom-sixteen": "~2.0.0",
106	    "lint-staged": "~12.3.3",
107	    "memdown": "~6.1.0",
108	    "prettier": "~2.2.0",
109	    "react-select-event": "~5.3.0",
110	    "react-test-renderer": "~17.0.1",
111	    "redux-mock-store": "~1.5.4",
112	    "rimraf": "~3.0.2",
113	    "source-map-explorer": "^2.2.2",
114	    "standard-version": "~9.3.0"
115	  },
116	  "scripts": {
117	    "analyze": "source-map-explorer 'build/static/js/*.js'",
118	    "commit": "npx git-cz",
119	    "start": "npm run translation:check && react-scripts start",
120	    "build": "react-scripts build",
121	    "update": "npx npm-check -u",
122	    "prepublishOnly": "npm run build",
123	    "test": "npm run translation:check && react-scripts test  --testPathIgnorePatterns=src/__tests__/test-utils --env=jest-environment-jsdom-sixteen",
124	    "test:ci": "cross-env CI=true react-scripts test  --testPathIgnorePatterns=src/__tests__/test-utils --passWithNoTests --env=jest-environment-jsdom-sixteen --maxWorkers=2",
125	    "lint": "eslint \"src/**/*.{js,jsx,ts,tsx}\" \"scripts/check-translations/**/*.{js,ts}\"",
126	    "lint:fix": "eslint \"src/**/*.{js,jsx,ts,tsx}\" \"scripts/check-translations/**/*.{js,ts}\" --fix",
127	    "lint-staged": "lint-staged",
128	    "commitlint": "commitlint",
129	    "coveralls": "npm run test:ci -- --coverage --watchAll=false && cat ./coverage/lcov.info",
130	    "remove-compiled-translations": "rimraf ./bin/scripts/check-translations",
131	    "pretranslation:check": "npm run remove-compiled-translations",
132	    "translation:check": "tsc -p scripts/tsconfig.json && node ./bin/scripts/check-translations/index.js",
133	    "posttranslation:check": "npm run remove-compiled-translations"
134	  },
135	  "browserslist": {
136	    "production": [
137	      ">0.2%",
138	      "not dead",
139	      "not op_mini all"
140	    ],
141	    "development": [
142	      "last 1 chrome version",
143	      "last 1 firefox version",
144	      "last 1 safari version"
145	    ]
146	  },
147	  "husky": {
148	    "hooks": {
149	      "pre-commit": "npm run lint-staged",
150	      "commit-msg": "npm run commitlint -- -E HUSKY_GIT_PARAMS"
151	    }
152	  },
153	  "config": {
154	    "commitizen": {
155	      "path": "./node_modules/cz-conventional-changelog"
156	    }
157	  },
158	  "lint-staged": {
159	    "**/*.{js,jsx,ts,tsx}": [
160	      "npm run lint:fix",
161	      "npm run test:ci",
162	      "git add ."
163	    ]
164	  },
165	  "jest": {
166	    "restoreMocks": true
167	  }
168	}
169	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/HospitalRun.tsx with line numbers:
1	import { Toaster } from '@hospitalrun/components'
2	import React from 'react'
3	import { useSelector } from 'react-redux'
4	import { Route, Switch } from 'react-router-dom'
5
6	import Dashboard from './dashboard/Dashboard'
7	import Imagings from './imagings/Imagings'
8	import Incidents from './incidents/Incidents'
9	import Labs from './labs/Labs'
10	import Medications from './medications/Medications'
11	import Breadcrumbs from './page-header/breadcrumbs/Breadcrumbs'
12	import { ButtonBarProvider } from './page-header/button-toolbar/ButtonBarProvider'
13	import ButtonToolBar from './page-header/button-toolbar/ButtonToolBar'
14	import { useTitle } from './page-header/title/TitleContext'
15	import Patients from './patients/Patients'
16	import Appointments from './scheduling/appointments/Appointments'
17	import Settings from './settings/Settings'
18	import Navbar from './shared/components/navbar/Navbar'
19	import { NetworkStatusMessage } from './shared/components/network-status'
20	import Sidebar from './shared/components/Sidebar'
21	import { RootState } from './shared/store'
22
23	const HospitalRun = () => {
24	  const { title } = useTitle()
25	  const { sidebarCollapsed } = useSelector((state: RootState) => state.components)
26
27	  return (
28	    <div>
29	      <NetworkStatusMessage />
30	      <Navbar />
31	      <div className="container-fluid">
32	        <div className="col-md-2">
33	          <Sidebar />
34	        </div>
35	        <ButtonBarProvider>
36	          <div className="row">
37	            <main
38	              role="main"
39	              className={`${
40	                sidebarCollapsed ? 'col-md-10 col-lg-11' : 'col-md-9 col-lg-10'
41	              } ml-sm-auto px-4`}
42	            >
43	              <div className="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
44	                <h1 className="h2">{title}</h1>
45	                <ButtonToolBar />
46	              </div>
47	              <Breadcrumbs />
48	              <div>
49	                <Switch>
50	                  <Route exact path="/" component={Dashboard} />
51	                  <Route path="/appointments" component={Appointments} />
52	                  <Route path="/patients" component={Patients} />
53	                  <Route path="/labs" component={Labs} />
54	                  <Route path="/medications" component={Medications} />
55	                  <Route path="/incidents" component={Incidents} />
56	                  <Route path="/settings" component={Settings} />
57	                  <Route path="/imaging" component={Imagings} />
58	                </Switch>
59	              </div>
60	              <Toaster autoClose={5000} hideProgressBar draggable />
61	            </main>
62	          </div>
63	        </ButtonBarProvider>
64	      </div>
65	    </div>
66	  )
67	}
68
69	export default HospitalRun
70	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/App.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/App.tsx with line numbers:
1	/* eslint-disable no-console */
2
3	import { Spinner } from '@hospitalrun/components'
4	import React, { Suspense, useEffect, useState } from 'react'
5	import { ReactQueryDevtools } from 'react-query-devtools'
6	import { useDispatch } from 'react-redux'
7	import { BrowserRouter, Route, Switch } from 'react-router-dom'
8
9	import HospitalRun from './HospitalRun'
10	import { TitleProvider } from './page-header/title/TitleContext'
11	import { remoteDb } from './shared/config/pouchdb'
12	import { getCurrentSession } from './user/user-slice'
13
14	const App: React.FC = () => {
15	  const dispatch = useDispatch()
16	  const [loading, setLoading] = useState(true)
17
18	  useEffect(() => {
19	    let cancelled = false
20
21	    remoteDb
22	      .getSession()
23	      .then((session) => {
24	        if (cancelled) {
25	          return
26	        }
27	        if (session.userCtx.name) {
28	          dispatch(getCurrentSession(session.userCtx.name))
29	        }
30	      })
31	      .catch((e) => {
32	        console.log(e)
33	      })
34	      .finally(() => {
35	        if (!cancelled) {
36	          setLoading(false)
37	        }
38	      })
39
40	    return () => {
41	      cancelled = true
42	    }
43	  }, [dispatch])
44
45	  if (loading) {
46	    return null
47	  }
48
49	  return (
50	    <>
51	      <BrowserRouter>
52	        <Suspense fallback={<Spinner color="blue" loading size={[10, 25]} type="ScaleLoader" />}>
53	          <Switch>
54	            <TitleProvider>
55	              <Route path="/" component={HospitalRun} />
56	            </TitleProvider>
57	          </Switch>
58	        </Suspense>
59	      </BrowserRouter>
60	      <ReactQueryDevtools initialIsOpen={false} />
61	    </>
62	  )
63	}
64
65	export default App
66	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/serviceWorker.ts with line numbers:
1	/* eslint-disable */
2	// This optional code is used to register a service worker.
3	// register() is not called by default.
4
5	// This lets the app load faster on subsequent visits in production, and gives
6	// it offline capabilities. However, it also means that developers (and users)
7	// will only see deployed updates on subsequent visits to a page, after all the
8	// existing tabs open on the page have been closed, since previously cached
9	// resources are updated in the background.
10
11	// To learn more about the benefits of this model and instructions on how to
12	// opt-in, read https://bit.ly/CRA-PWA
13
14	const isLocalhost = Boolean(
15	  window.location.hostname === "localhost" ||
16	    // [::1] is the IPv6 localhost address.
17	    window.location.hostname === "[::1]" ||
18	    // 127.0.0.1/8 is considered localhost for IPv4.
19	    window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)
20	);
21
22	type Config = {
23	  onSuccess?: (registration: ServiceWorkerRegistration) => void;
24	  onUpdate?: (registration: ServiceWorkerRegistration) => void;
25	};
26
27	export function register(config?: Config) {
28	  if (process.env.NODE_ENV === "production" && "serviceWorker" in navigator) {
29	    // The URL constructor is available in all browsers that support SW.
30	    const publicUrl = new URL(
31	      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,
32	      window.location.href
33	    );
34	    if (publicUrl.origin !== window.location.origin) {
35	      // Our service worker won't work if PUBLIC_URL is on a different origin
36	      // from what our page is served on. This might happen if a CDN is used to
37	      // serve assets; see https://github.com/facebook/create-react-app/issues/2374
38	      return;
39	    }
40
41	    window.addEventListener("load", () => {
42	      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;
43
44	      if (isLocalhost) {
45	        // This is running on localhost. Let's check if a service worker still exists or not.
46	        checkValidServiceWorker(swUrl, config);
47
48	        // Add some additional logging to localhost, pointing developers to the
49	        // service worker/PWA documentation.
50	        navigator.serviceWorker.ready.then(() => {
51	          console.log(
52	            "This web app is being served cache-first by a service " +
53	              "worker. To learn more, visit https://bit.ly/CRA-PWA"
54	          );
55	        });
56	      } else {
57	        // Is not localhost. Just register service worker
58	        registerValidSW(swUrl, config);
59	      }
60	    });
61	  }
62	}
63
64	function registerValidSW(swUrl: string, config?: Config) {
65	  navigator.serviceWorker
66	    .register(swUrl)
67	    .then(registration => {
68	      registration.onupdatefound = () => {
69	        const installingWorker = registration.installing;
70	        if (installingWorker == null) {
71	          return;
72	        }
73	        installingWorker.onstatechange = () => {
74	          if (installingWorker.state === "installed") {
75	            if (navigator.serviceWorker.controller) {
76	              // At this point, the updated precached content has been fetched,
77	              // but the previous service worker will still serve the older
78	              // content until all client tabs are closed.
79	              console.log(
80	                "New content is available and will be used when all " +
81	                  "tabs for this page are closed. See https://bit.ly/CRA-PWA."
82	              );
83
84	              // Execute callback
85	              if (config && config.onUpdate) {
86	                config.onUpdate(registration);
87	              }
88	            } else {
89	              // At this point, everything has been precached.
90	              // It's the perfect time to display a
91	              // "Content is cached for offline use." message.
92	              console.log("Content is cached for offline use.");
93
94	              // Execute callback
95	              if (config && config.onSuccess) {
96	                config.onSuccess(registration);
97	              }
98	            }
99	          }
100	        };
101	      };
102	    })
103	    .catch(error => {
104	      console.error("Error during service worker registration:", error);
105	    });
106	}
107
108	function checkValidServiceWorker(swUrl: string, config?: Config) {
109	  // Check if the service worker can be found. If it can't reload the page.
110	  fetch(swUrl)
111	    .then(response => {
112	      // Ensure service worker exists, and that we really are getting a JS file.
113	      const contentType = response.headers.get("content-type");
114	      if (
115	        response.status === 404 ||
116	        (contentType != null && contentType.indexOf("javascript") === -1)
117	      ) {
118	        // No service worker found. Probably a different app. Reload the page.
119	        navigator.serviceWorker.ready.then(registration => {
120	          registration.unregister().then(() => {
121	            window.location.reload();
122	          });
123	        });
124	      } else {
125	        // Service worker found. Proceed as normal.
126	        registerValidSW(swUrl, config);
127	      }
128	    })
129	    .catch(() => {
130	      console.log("No internet connection found. App is running in offline mode.");
131	    });
132	}
133
134	export function unregister() {
135	  if ("serviceWorker" in navigator) {
136	    navigator.serviceWorker.ready.then(registration => {
137	      registration.unregister();
138	    });
139	  }
140	}
141	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/shared, excluding hidden items and node_modules:
254K	/tmp/inputs/hospitalrun-frontend/src/shared
38K	/tmp/inputs/hospitalrun-frontend/src/shared/components
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/PageComponent.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx
15K	/tmp/inputs/hospitalrun-frontend/src/shared/components/Sidebar.tsx
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts
8.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/input
7.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/navbar
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/config
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts
2.5K	/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts
15K	/tmp/inputs/hospitalrun-frontend/src/shared/db
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/db/IncidentRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Page.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/PageRequest.ts
2.0K	/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Search.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/Sort.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/db/SortRequest.ts
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/hooks
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts
151K	/tmp/inputs/hospitalrun-frontend/src/shared/locales
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/README.md
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ar
15K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/de
21K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/enUs
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/es
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/fr
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/id
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/index.ts
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/it
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ja
12K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ptBr
27K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/ru
22K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/tr
5.5K	/tmp/inputs/hospitalrun-frontend/src/shared/locales/zhCN
13K	/tmp/inputs/hospitalrun-frontend/src/shared/model
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/AbstractDBModel.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Allergy.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Appointment.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Breadcrumb.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/CareGoal.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/CarePlan.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/ContactInformation.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Diagnosis.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Imaging.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Incident.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Lab.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Medication.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Name.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Note.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Patient.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/PatientHistoryRecord.tsx
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/model/Permissions.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/RelatedPerson.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/User.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/model/Visit.ts
29K	/tmp/inputs/hospitalrun-frontend/src/shared/static
29K	/tmp/inputs/hospitalrun-frontend/src/shared/static/images
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/store
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts
3.0K	/tmp/inputs/hospitalrun-frontend/src/shared/util
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/util/DataHelpers.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/extractUsername.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/formatDate.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/generateCode.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/util/uuid.ts



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts with line numbers:
1	import { useState, useEffect } from 'react'
2
3	export default function <T>(value: T, delayInMilliseconds: number): T {
4	  const [debouncedValue, setDebouncedValue] = useState(value)
5
6	  useEffect(() => {
7	    const debounceHandler = setTimeout(() => setDebouncedValue(value), delayInMilliseconds)
8
9	    return () => clearTimeout(debounceHandler)
10	  }, [value, delayInMilliseconds])
11
12	  return debouncedValue
13	}
14	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts with line numbers:
1	/* eslint-disable @typescript-eslint/no-var-requires */
2	/* eslint-disable camelcase */
3	import PouchDB from 'pouchdb'
4	import PouchAuth from 'pouchdb-authentication'
5	import PouchdbFind from 'pouchdb-find'
6	import RelationalPouch from 'relational-pouch'
7
8	const memoryAdapter = require('pouchdb-adapter-memory')
9	const search = require('pouchdb-quick-search')
10
11	PouchDB.plugin(search)
12	PouchDB.plugin(memoryAdapter)
13	PouchDB.plugin(RelationalPouch)
14	PouchDB.plugin(PouchdbFind)
15	PouchDB.plugin(PouchAuth)
16
17	let serverDb
18	let localDb
19
20	if (process.env.NODE_ENV === 'test') {
21	  serverDb = new PouchDB('hospitalrun', { skip_setup: true, adapter: 'memory' })
22	  localDb = new PouchDB('local_hospitalrun', { skip_setup: true, adapter: 'memory' })
23	} else {
24	  serverDb = new PouchDB(`${process.env.REACT_APP_HOSPITALRUN_API}/hospitalrun`, {
25	    skip_setup: true,
26	  })
27
28	  localDb = new PouchDB('local_hospitalrun', { skip_setup: true })
29	  localDb.sync(serverDb, { live: true, retry: true })
30	}
31
32	export const schema = [
33	  {
34	    singular: 'patient',
35	    plural: 'patients',
36	    relations: {
37	      appointments: {
38	        hasMany: { type: 'appointment', options: { queryInverse: 'patient', async: true } },
39	      },
40	      labs: { hasMany: { type: 'lab', options: { queryInverse: 'patient', async: true } } },
41	      medications: {
42	        hasMany: { type: 'medication', options: { queryInverse: 'patient', async: true } },
43	      },
44	      imagings: { hasMany: { type: 'imaging', options: { queryInverse: 'patient', async: true } } },
45	    },
46	  },
47	  {
48	    singular: 'appointment',
49	    plural: 'appointments',
50	    relations: { patient: { belongsTo: 'patient' } },
51	  },
52	  {
53	    singular: 'incident',
54	    plural: 'incidents',
55	  },
56	  {
57	    singular: 'lab',
58	    plural: 'labs',
59	    relations: { patient: { belongsTo: 'patient' } },
60	  },
61	  {
62	    singular: 'imaging',
63	    plural: 'imagings',
64	    relations: { patient: { belongsTo: 'patient' } },
65	  },
66	  {
67	    singular: 'medication',
68	    plural: 'medications',
69	    relations: { patient: { belongsTo: 'patient' } },
70	  },
71	]
72	export const relationalDb = localDb.setSchema(schema)
73	export const remoteDb = serverDb as PouchDB.Database
74	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts with line numbers:
1	import { v4 as uuidv4 } from 'uuid'
2
3	import { schema } from '../config/pouchdb'
4	import AbstractDBModel from '../model/AbstractDBModel'
5	import SortRequest, { Unsorted } from './SortRequest'
6
7	export default class Repository<T extends AbstractDBModel> {
8	  db: PouchDB.RelDatabase
9
10	  type: string
11
12	  pluralType: string
13
14	  constructor(type: string, db: PouchDB.RelDatabase) {
15	    this.db = db
16	    this.type = type
17	    this.pluralType = schema.find((s) => s.singular === this.type)?.plural || ''
18	  }
19
20	  async find(id: string): Promise<T> {
21	    const documents = await this.db.rel.find(this.type, id)
22	    const entity = documents[this.pluralType][0]
23	    return entity
24	  }
25
26	  async findAll(sort = Unsorted): Promise<T[]> {
27	    const selector: any = {
28	      _id: {
29	        $regex: RegExp(this.type, 'i'),
30	      },
31	    }
32
33	    sort.sorts.forEach((s) => {
34	      selector[`data.${s.field}`] = { $gt: null }
35	    })
36
37	    // Adds an index to each of the fields coming from the sorting object
38	    // allowing the algorithm to sort by any given SortRequest, by avoiding the default index error (lack of index)
39
40	    await Promise.all(
41	      sort.sorts.map(
42	        async (s): Promise<SortRequest> => {
43	          await this.db.createIndex({
44	            index: {
45	              fields: [`data.${s.field}`],
46	            },
47	          })
48
49	          return sort
50	        },
51	      ),
52	    )
53
54	    const result = await this.db.find({
55	      selector,
56	      sort:
57	        sort.sorts.length > 0
58	          ? sort.sorts.map((s) => ({ [`data.${s.field}`]: s.direction }))
59	          : undefined,
60	    })
61	    const relDocs = await this.db.rel.parseRelDocs(this.type, result.docs)
62	    return relDocs[this.pluralType]
63	  }
64
65	  async count(): Promise<number> {
66	    const result = await this.findAll()
67	    return result.length
68	  }
69
70	  async search(criteria: any): Promise<T[]> {
71	    const response = await this.db.find({
72	      selector: {
73	        $and: [
74	          {
75	            _id: {
76	              $regex: RegExp(this.type, 'i'),
77	            },
78	          },
79	          { ...criteria.selector },
80	        ],
81	      },
82	    })
83	    const data = await this.db.rel.parseRelDocs(this.type, response.docs)
84	    return data[this.pluralType]
85	  }
86
87	  async save(entity: T): Promise<T> {
88	    const currentTime = new Date().toISOString()
89
90	    const { id, rev, ...valuesToSave } = entity
91	    const savedEntity = await this.db.rel.save(this.type, {
92	      id: uuidv4(),
93	      ...valuesToSave,
94	      createdAt: currentTime,
95	      updatedAt: currentTime,
96	    })
97	    return this.find(savedEntity.id)
98	  }
99
100	  async saveOrUpdate(entity: T): Promise<T> {
101	    if (!entity.id) {
102	      return this.save(entity)
103	    }
104
105	    const { id, rev, ...dataToSave } = entity
106
107	    try {
108	      await this.find(entity.id)
109	      const entityToUpdate = {
110	        id,
111	        rev,
112	        ...dataToSave,
113	        updatedAt: new Date().toISOString(),
114	      }
115
116	      await this.db.rel.save(this.type, entityToUpdate)
117	      return this.find(entity.id)
118	    } catch (error) {
119	      return this.save(entity)
120	    }
121	  }
122
123	  async delete(entity: T): Promise<T> {
124	    const entityToDelete = await this.find(entity.id)
125	    await this.db.rel.del(this.type, entity)
126	    return entityToDelete
127	  }
128	}
129	


bash
command
grep -r "React.lazy\|lazy(" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
system
Tool ran without output or errors


bash
command
grep -r "useMemo\|useCallback\|memo(" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -30
output
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:import React, { useState, useEffect, useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ViewImagings.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts:import { useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts:  const translate = useCallback((key: any): any => (key !== undefined ? t(key) : undefined), [t])
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/view/ViewAppointment.tsx:import React, { useCallback, useEffect, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/view/ViewAppointment.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/medications/search/ViewMedications.tsx:import React, { useEffect, useCallback, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/medications/search/ViewMedications.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:import React, { useState, useEffect, useCallback } from 'react'
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:  const getButtons = useCallback(() => {
/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx:import React, { useCallback, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/patients/search/SearchPatients.tsx:  const onSearchRequestChange = useCallback((newSearchRequest: PatientSearchRequest) => {


bash
command
grep -r "useQuery\|useMutation\|react-query" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -30
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:import { ReactQueryDevtools } from 'react-query-devtools'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:  return useMutation(reportIncident, {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncident.tsx:  return useQuery(['incident', incidentId], fetchIncidentById)
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx:  return useQuery(['incidents', searchRequest], fetchIncidents)
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:  return useMutation(resolveIncident, {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingSearch.tsx:  return useQuery(['imagings', searchRequest], searchImagingRequests)
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useImagingRequest.tsx:  return useQuery(['imaging', imagingRequestId], getImagingRequestById)
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:  return useMutation(requestImagingWrapper(user), {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:import { queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:import { ReactQueryConfigProvider } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:import { MutateFunction } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-query.util.tsx:import { ReactQueryConfigProvider, QueryResult } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:  return useQuery(['appointments'], fetchAppointments)
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(createNewAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointment.tsx:import { useQuery } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointment.tsx:  return useQuery(['appointment', appointmentId], getAppointmentById)
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:  return useMutation(deleteAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {
/tmp/inputs/hospitalrun-frontend/src/medications/hooks/useMedicationSearch.tsx:import { useQuery } from 'react-query'


bash
command
grep -r "useQuery\|useMutation" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | wc -l
output
90


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useIncidents.tsx with line numbers:
1	import { useQuery } from 'react-query'
2
3	import IncidentRepository from '../../shared/db/IncidentRepository'
4	import Incident from '../../shared/model/Incident'
5	import IncidentSearchRequest from '../model/IncidentSearchRequest'
6
7	function fetchIncidents(_: string, searchRequest: IncidentSearchRequest): Promise<Incident[]> {
8	  return IncidentRepository.search(searchRequest)
9	}
10
11	export default function useIncidents(searchRequest: IncidentSearchRequest) {
12	  return useQuery(['incidents', searchRequest], fetchIncidents)
13	}
14	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx with line numbers:
1	import isEmpty from 'lodash/isEmpty'
2	import { queryCache, useMutation } from 'react-query'
3	import shortid from 'shortid'
4
5	import IncidentRepository from '../../shared/db/IncidentRepository'
6	import Incident from '../../shared/model/Incident'
7	import validateIncident from '../util/validate-incident'
8
9	const getIncidentCode = (): string => `I-${shortid.generate()}`
10
11	export function reportIncident(incident: Incident): Promise<Incident> {
12	  const error = validateIncident(incident)
13	  if (isEmpty(error)) {
14	    const updatedIncident: Incident = {
15	      ...incident,
16	      code: getIncidentCode(),
17	      status: 'reported',
18	      reportedBy: 'some user',
19	      reportedOn: new Date(Date.now()).toISOString(),
20	    }
21	    return IncidentRepository.save(updatedIncident)
22	  }
23
24	  throw error
25	}
26
27	export default function useReportIncident() {
28	  return useMutation(reportIncident, {
29	    onSuccess: async () => {
30	      await queryCache.invalidateQueries('incidents')
31	    },
32	    throwOnError: true,
33	  })
34	}
35	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/config/i18n.ts with line numbers:
1	import i18n from 'i18next'
2	import LanguageDetector from 'i18next-browser-languagedetector'
3	import { initReactI18next } from 'react-i18next'
4
5	import resources from '../locales'
6
7	i18n
8	  // load translation using xhr -> see /public/locales
9	  // learn more: https://github.com/i18next/i18next-xhr-backend
10	  // detect user language
11	  // learn more: https://github.com/i18next/i18next-browser-languageDetector
12	  .use(LanguageDetector)
13	  // pass the i18n instance to react-i18next.
14	  .use(initReactI18next)
15	  // init i18next
16	  // for all options read: https://www.i18next.com/overview/configuration-options
17	  .init({
18	    fallbackLng: 'en',
19	    debug: true,
20	    resources,
21	    interpolation: {
22	      escapeValue: false, // not needed for react as it escapes by default
23	    },
24	  })
25
26	export default i18n
27	export { resources }
28	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/index.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/index.tsx with line numbers:
1	import React from 'react'
2	import ReactDOM from 'react-dom'
3	import { Provider } from 'react-redux'
4
5	import './index.css'
6	import App from './App'
7	import * as serviceWorker from './serviceWorker'
8	import './shared/config/i18n'
9	import store from './shared/store'
10
11	ReactDOM.render(
12	  <Provider store={store}>
13	    <App />
14	  </Provider>,
15	  document.getElementById('root'),
16	)
17
18	// If you want your app to work offline and load faster, you can change
19	// unregister() to register() below. Note this comes with some pitfalls.
20	// Learn more about service workers: https://bit.ly/CRA-PWA
21	serviceWorker.register()
22	serviceWorker.register({})
23	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts with line numbers:
1	import { configureStore, combineReducers, Action } from '@reduxjs/toolkit'
2	import ReduxThunk, { ThunkAction } from 'redux-thunk'
3
4	import medication from '../../medications/medication-slice'
5	import breadcrumbs from '../../page-header/breadcrumbs/breadcrumbs-slice'
6	import patient from '../../patients/patient-slice'
7	import patients from '../../patients/patients-slice'
8	import user from '../../user/user-slice'
9	import components from '../components/component-slice'
10
11	const reducer = combineReducers({
12	  patient,
13	  patients,
14	  user,
15	  breadcrumbs,
16	  components,
17	  medication,
18	})
19
20	const store = configureStore({
21	  reducer,
22	  middleware: [ReduxThunk],
23	})
24
25	export type AppDispatch = typeof store.dispatch
26	export type AppThunk = ThunkAction<void, RootState, null, Action<string>>
27	export type RootState = ReturnType<typeof reducer>
28
29	export default store
30	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts with line numbers:
1	import { createSlice, PayloadAction } from '@reduxjs/toolkit'
2
3	import PatientRepository from '../shared/db/PatientRepository'
4	import SortRequest, { Unsorted } from '../shared/db/SortRequest'
5	import Patient from '../shared/model/Patient'
6	import { AppThunk } from '../shared/store'
7
8	interface PatientsState {
9	  isLoading: boolean
10	  patients: Patient[]
11	  count: number
12	}
13
14	const initialState: PatientsState = {
15	  isLoading: false,
16	  patients: [],
17	  count: 0,
18	}
19
20	function startLoading(state: PatientsState) {
21	  state.isLoading = true
22	}
23
24	const patientsSlice = createSlice({
25	  name: 'patients',
26	  initialState,
27	  reducers: {
28	    fetchPatientsStart: startLoading,
29	    fetchPatientsSuccess(state, { payload }: PayloadAction<Patient[]>) {
30	      state.isLoading = false
31	      state.patients = payload
32	    },
33	    fetchCountSuccess(state, { payload }: PayloadAction<number>) {
34	      state.count = payload
35	    },
36	  },
37	})
38
39	export const { fetchPatientsStart, fetchPatientsSuccess, fetchCountSuccess } = patientsSlice.actions
40
41	export const fetchPatients = (sortRequest: SortRequest = Unsorted): AppThunk => async (
42	  dispatch,
43	) => {
44	  dispatch(fetchPatientsStart())
45	  const patients = await PatientRepository.findAll(sortRequest)
46	  dispatch(fetchPatientsSuccess(patients))
47	}
48
49	export const searchPatients = (searchString: string): AppThunk => async (dispatch) => {
50	  dispatch(fetchPatientsStart())
51
52	  let patients
53	  if (searchString.trim() === '') {
54	    patients = await PatientRepository.findAll()
55	  } else {
56	    patients = await PatientRepository.search(searchString)
57	  }
58	  const count = await PatientRepository.count()
59	  dispatch(fetchCountSuccess(count))
60	  dispatch(fetchPatientsSuccess(patients))
61	}
62
63	export default patientsSlice.reducer
64	


bash
command
grep -r "useDebounce\|debounce" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:import useDebounce from '../../../shared/hooks/useDebounce'
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:describe('useDebounce', () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:    const debounceDelay = 500
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:    const { rerender, result } = renderHook(() => useDebounce(currentValue, debounceDelay))
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:      jest.advanceTimersByTime(debounceDelay)
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:    const debounceDelay = 500
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:    const { rerender, result } = renderHook(() => useDebounce(currentValue, debounceDelay))
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useDebounce.test.ts:      jest.advanceTimersByTime(debounceDelay - 1)
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/PatientSearchInput.test.tsx:  it('should call the on change function when the search input changes after debounce time', () => {
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts:  const [debouncedValue, setDebouncedValue] = useState(value)
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts:    const debounceHandler = setTimeout(() => setDebouncedValue(value), delayInMilliseconds)
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts:    return () => clearTimeout(debounceHandler)
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useDebounce.ts:  return debouncedValue
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:import useDebounce from '../shared/hooks/useDebounce'
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:  const debouncedSearchText = useDebounce(searchText, 500)
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx:    text: debouncedSearchText,
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx:import useDebounce from '../../shared/hooks/useDebounce'
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx:  const debouncedSearchText = useDebounce(searchText, 500)
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx:      queryString: debouncedSearchText,
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx:  }, [debouncedSearchText, onChange])


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/search/PatientSearchInput.tsx with line numbers:
1	import { TextInput } from '@hospitalrun/components'
2	import React, { useEffect, useState } from 'react'
3
4	import useDebounce from '../../shared/hooks/useDebounce'
5	import useTranslator from '../../shared/hooks/useTranslator'
6	import PatientSearchRequest from '../models/PatientSearchRequest'
7
8	interface Props {
9	  onChange: (searchRequest: PatientSearchRequest) => void
10	}
11
12	const PatientSearchInput = (props: Props) => {
13	  const { onChange } = props
14	  const { t } = useTranslator()
15
16	  const [searchText, setSearchText] = useState<string>('')
17	  const debouncedSearchText = useDebounce(searchText, 500)
18
19	  useEffect(() => {
20	    onChange({
21	      queryString: debouncedSearchText,
22	    })
23	  }, [debouncedSearchText, onChange])
24
25	  const onSearchBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {
26	    const queryString = event.currentTarget.value
27	    setSearchText(queryString)
28	  }
29
30	  return (
31	    <TextInput
32	      size="lg"
33	      type="text"
34	      onChange={onSearchBoxChange}
35	      value={searchText}
36	      placeholder={t('actions.search')}
37	    />
38	  )
39	}
40
41	export default PatientSearchInput
42	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/useAddBreadcrumbs.ts with line numbers:
1	import { useEffect } from 'react'
2	import { useDispatch } from 'react-redux'
3
4	import Breadcrumb from '../../shared/model/Breadcrumb'
5	import { addBreadcrumbs, removeBreadcrumbs } from './breadcrumbs-slice'
6
7	export default function useAddBreadcrumbs(breadcrumbs: Breadcrumb[], withDashboard = false): void {
8	  const dispatch = useDispatch()
9
10	  const breadcrumbsStringified = withDashboard
11	    ? JSON.stringify([...breadcrumbs, { i18nKey: 'dashboard.label', location: '/' }])
12	    : JSON.stringify(breadcrumbs)
13
14	  useEffect(() => {
15	    const breadcrumbsParsed: Breadcrumb[] = JSON.parse(breadcrumbsStringified)
16	    dispatch(addBreadcrumbs(breadcrumbsParsed))
17
18	    return () => {
19	      dispatch(removeBreadcrumbs(breadcrumbsParsed))
20	    }
21	  }, [breadcrumbsStringified, dispatch])
22	}
23	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts with line numbers:
1	import escapeStringRegexp from 'escape-string-regexp'
2
3	import { relationalDb } from '../config/pouchdb'
4	import Appointment from '../model/Appointment'
5	import Lab from '../model/Lab'
6	import Medication from '../model/Medication'
7	import Patient from '../model/Patient'
8	import generateCode from '../util/generateCode'
9	import Repository from './Repository'
10
11	class PatientRepository extends Repository<Patient> {
12	  constructor() {
13	    super('patient', relationalDb)
14	    relationalDb.createIndex({
15	      index: { fields: ['_id', 'data.fullName', 'data.code'] },
16	    })
17	  }
18
19	  async search(text: string): Promise<Patient[]> {
20	    const escapedString = escapeStringRegexp(text)
21	    return super.search({
22	      selector: {
23	        $or: [
24	          {
25	            'data.fullName': {
26	              $regex: RegExp(escapedString, 'i'),
27	            },
28	          },
29	          {
30	            'data.code': text,
31	          },
32	        ],
33	      },
34	    })
35	  }
36
37	  async save(entity: Patient): Promise<Patient> {
38	    const patientCode = generateCode('P')
39	    entity.code = patientCode
40	    const saveResult = await super.save(entity)
41	    return this.find(saveResult.id)
42	  }
43
44	  async createIndex() {
45	    return this.db.createIndex({
46	      index: { fields: ['index'] },
47	    })
48	  }
49
50	  async getAppointments(patientId: string): Promise<Appointment[]> {
51	    const result = await this.db.rel.findHasMany('appointment', 'patient', patientId)
52	    return result.appointments
53	  }
54
55	  async getLabs(patientId: string): Promise<Lab[]> {
56	    const result = await this.db.rel.findHasMany('lab', 'patient', patientId)
57	    return result.labs
58	  }
59
60	  async getMedications(patientId: string): Promise<Medication[]> {
61	    const result = await this.db.rel.findHasMany('medication', 'patient', patientId)
62	    return result.medications
63	  }
64	}
65
66	export default new PatientRepository()
67	


bash
command
grep -r "createIndex" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:          await this.db.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:    relationalDb.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async createIndex() {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:    return this.db.createIndex({
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts:    this.db.createIndex({


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts with line numbers:
1	import escapeStringRegexp from 'escape-string-regexp'
2
3	import { relationalDb } from '../config/pouchdb'
4	import Appointment from '../model/Appointment'
5	import Repository from './Repository'
6
7	class AppointmentRepository extends Repository<Appointment> {
8	  constructor() {
9	    super('appointment', relationalDb)
10	    this.db.createIndex({
11	      index: {
12	        fields: ['data.patient', '_id'],
13	      },
14	    })
15	  }
16
17	  // Fuzzy search for patient appointments. Used for patient appointment search bar
18	  async searchPatientAppointments(patientId: string, text: string): Promise<Appointment[]> {
19	    const escapedString = escapeStringRegexp(text)
20	    return super.search({
21	      selector: {
22	        $and: [
23	          {
24	            'data.patient': patientId,
25	          },
26	          {
27	            $or: [
28	              {
29	                'data.location': {
30	                  $regex: RegExp(escapedString, 'i'),
31	                },
32	              },
33	              {
34	                'data.reason': {
35	                  $regex: RegExp(escapedString, 'i'),
36	                },
37	              },
38	              {
39	                'data.type': {
40	                  $regex: RegExp(escapedString, 'i'),
41	                },
42	              },
43	            ],
44	          },
45	        ],
46	      },
47	    })
48	  }
49	}
50
51	export default new AppointmentRepository()
52	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
output
Here're the files and directories up to 2 levels deep in /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status, excluding hidden items and node_modules:
3.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status
1.5K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/index.ts
512	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/types.ts
1.0K	/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts



str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/useNetworkStatus.ts with line numbers:
1	import { useState, useEffect } from 'react'
2
3	import { NetworkStatus } from './types'
4
5	export const useNetworkStatus = (): NetworkStatus => {
6	  const isOnline = navigator.onLine
7	  const [networkStatus, setNetworkStatus] = useState({
8	    isOnline,
9	    wasOffline: !isOnline,
10	  })
11	  const handleOnline = () => {
12	    setNetworkStatus((prevState) => ({ ...prevState, isOnline: true }))
13	  }
14	  const handleOffline = () => {
15	    setNetworkStatus((prevState) => ({ ...prevState, isOnline: false, wasOffline: true }))
16	  }
17	  useEffect(() => {
18	    window.addEventListener('online', handleOnline)
19	    window.addEventListener('offline', handleOffline)
20
21	    return () => {
22	      window.removeEventListener('online', handleOnline)
23	      window.removeEventListener('offline', handleOffline)
24	    }
25	  }, [])
26
27	  return networkStatus
28	}
29	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/network-status/NetworkStatusMessage.tsx with line numbers:
1	import React, { useState } from 'react'
2
3	import useTranslator from '../../hooks/useTranslator'
4	import { useNetworkStatus } from './useNetworkStatus'
5
6	const ONLINE_COLOR = 'rgba(0, 255, 0, 0.55)'
7	const OFFLINE_COLOR = 'rgba(255, 0, 0, 0.65)'
8	const OPACITY_TRANSITION_TIME = 4000
9	const BASE_STYLE = {
10	  height: '50px',
11	  pointerEvents: 'none' as const,
12	  transition: `opacity ${OPACITY_TRANSITION_TIME}ms ease-in`,
13	}
14
15	export const NetworkStatusMessage = () => {
16	  const { t } = useTranslator()
17	  const { isOnline, wasOffline } = useNetworkStatus()
18	  const [shouldRender, setShouldRender] = useState(true)
19	  const [opacity, setOpacity] = useState(1)
20
21	  if (isOnline && !wasOffline) {
22	    return null
23	  }
24
25	  if (!isOnline && opacity !== 1) {
26	    setShouldRender(true)
27	    setOpacity(1)
28	  }
29
30	  if (isOnline && wasOffline && opacity !== 0) {
31	    setOpacity(0)
32	    setTimeout(() => {
33	      setShouldRender(false)
34	    }, OPACITY_TRANSITION_TIME)
35	  }
36
37	  if (!shouldRender) {
38	    return null
39	  }
40
41	  const style = {
42	    ...BASE_STYLE,
43	    backgroundColor: isOnline ? ONLINE_COLOR : OFFLINE_COLOR,
44	    opacity,
45	  }
46
47	  return (
48	    <div
49	      className={`fixed-bottom d-flex justify-content-center align-items-center ${
50	        isOnline ? 'online' : 'offline'
51	      }`}
52	      style={style}
53	    >
54	      {isOnline ? t('networkStatus.online') : t('networkStatus.offline')}
55	    </div>
56	  )
57	}
58	


bash
command
grep -r "Suspense\|lazy" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -20
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:import React, { Suspense, useEffect, useState } from 'react'
/tmp/inputs/hospitalrun-frontend/src/App.tsx:        <Suspense fallback={<Spinner color="blue" loading size={[10, 25]} type="ScaleLoader" />}>
/tmp/inputs/hospitalrun-frontend/src/App.tsx:        </Suspense>


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/labs/ViewLabs.tsx with line numbers:
1	import { Select, Label, Button, Table, Container, Row, Column } from '@hospitalrun/components'
2	import format from 'date-fns/format'
3	import React, { useState, useEffect, useCallback } from 'react'
4	import { useSelector } from 'react-redux'
5	import { useHistory } from 'react-router-dom'
6
7	import { useButtonToolbarSetter } from '../page-header/button-toolbar/ButtonBarProvider'
8	import { useUpdateTitle } from '../page-header/title/TitleContext'
9	import { SelectOption } from '../shared/components/input/SelectOption'
10	import TextInputWithLabelFormGroup from '../shared/components/input/TextInputWithLabelFormGroup'
11	import useDebounce from '../shared/hooks/useDebounce'
12	import useTranslator from '../shared/hooks/useTranslator'
13	import Lab from '../shared/model/Lab'
14	import Permissions from '../shared/model/Permissions'
15	import { RootState } from '../shared/store'
16	import useLabsSearch from './hooks/useLabsSearch'
17	import { LabFilter } from './model/LabSearchRequest'
18
19	const ViewLabs = () => {
20	  const { t } = useTranslator()
21	  const history = useHistory()
22	  const setButtons = useButtonToolbarSetter()
23	  const updateTitle = useUpdateTitle()
24	  useEffect(() => {
25	    updateTitle(t('labs.label'))
26	  })
27	  const { permissions } = useSelector((state: RootState) => state.user)
28	  const [searchFilter, setSearchFilter] = useState<LabFilter>('all')
29	  const [searchText, setSearchText] = useState<string>('')
30	  const debouncedSearchText = useDebounce(searchText, 500)
31	  const { data: labs } = useLabsSearch({
32	    text: debouncedSearchText,
33	    status: searchFilter,
34	  })
35
36	  const getButtons = useCallback(() => {
37	    const buttons: React.ReactNode[] = []
38
39	    if (permissions.includes(Permissions.RequestLab)) {
40	      buttons.push(
41	        <Button
42	          icon="add"
43	          onClick={() => history.push('/labs/new')}
44	          outlined
45	          color="success"
46	          key="lab.requests.new"
47	        >
48	          {t('labs.requests.new')}
49	        </Button>,
50	      )
51	    }
52
53	    return buttons
54	  }, [permissions, history, t])
55
56	  useEffect(() => {
57	    setButtons(getButtons())
58	    return () => {
59	      setButtons([])
60	    }
61	  }, [getButtons, setButtons])
62
63	  const onViewClick = (lab: Lab) => {
64	    history.push(`/labs/${lab.id}`)
65	  }
66
67	  const onSearchBoxChange = (event: React.ChangeEvent<HTMLInputElement>) => {
68	    setSearchText(event.target.value)
69	  }
70
71	  const filterOptions: SelectOption[] = [
72	    { label: t('labs.status.requested'), value: 'requested' },
73	    { label: t('labs.status.completed'), value: 'completed' },
74	    { label: t('labs.status.canceled'), value: 'canceled' },
75	    { label: t('labs.filter.all'), value: 'all' },
76	  ]
77
78	  return (
79	    <Container>
80	      <Row>
81	        <Column md={3} lg={2}>
82	          <Label title="type" text={t('labs.filterTitle')} />
83	          <Select
84	            id="type"
85	            options={filterOptions}
86	            onChange={(values) => setSearchFilter(values[0] as LabFilter)}
87	            defaultSelected={filterOptions.filter(({ value }) => value === searchFilter)}
88	            disabled={false}
89	          />
90	        </Column>
91	        <Column>
92	          <TextInputWithLabelFormGroup
93	            name="searchbox"
94	            label={t('labs.search')}
95	            placeholder={t('labs.search')}
96	            value={searchText}
97	            isEditable
98	            onChange={onSearchBoxChange}
99	          />
100	        </Column>
101	      </Row>
102	      <Row>
103	        <Table
104	          getID={(row) => row.id}
105	          columns={[
106	            { label: t('labs.lab.code'), key: 'code' },
107	            { label: t('labs.lab.type'), key: 'type' },
108	            {
109	              label: t('labs.lab.requestedOn'),
110	              key: 'requestedOn',
111	              formatter: (row) =>
112	                row.requestedOn ? format(new Date(row.requestedOn), 'yyyy-MM-dd hh:mm a') : '',
113	            },
114	            { label: t('labs.lab.status'), key: 'status' },
115	          ]}
116	          data={labs || []}
117	          actionsHeaderText={t('actions.label')}
118	          actions={[{ label: t('actions.view'), action: (row) => onViewClick(row as Lab) }]}
119	        />
120	      </Row>
121	    </Container>
122	  )
123	}
124
125	export default ViewLabs
126	


bash
command
grep -r "queryCache\|refetch\|prefetch\|invalidate" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -20
output
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:      await queryCache.invalidateQueries('incidents')
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:      queryCache.setQueryData(['incident', data.id], data)
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:      await queryCache.invalidateQueries('imagings')
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:import { queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:    queryCache.clear()
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:import { queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:import { MutateFunction, queryCache, useMutation } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:      await queryCache.invalidateQueries('appointment')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useRequestLab.ts:import { useMutation, queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useRequestLab.ts:      await queryCache.invalidateQueries('labs')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCancelLab.ts:import { useMutation, queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCancelLab.ts:      queryCache.invalidateQueries('labs')
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:import { useMutation, queryCache } from 'react-query'
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:      queryCache.setQueryData(['lab', data.id], data)


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx with line numbers:
1	import { MutateFunction, queryCache, useMutation } from 'react-query'
2
3	import AppointmentRepository from '../../shared/db/AppointmentRepository'
4	import Appointment from '../../shared/model/Appointment'
5	import validateAppointment, { AppointmentError } from '../appointments/util/validate-appointment'
6
7	interface updateAppointmentResult {
8	  mutate: MutateFunction<Appointment, unknown, Appointment, unknown>
9	  isLoading: boolean
10	  isError: boolean
11	  error: AppointmentError
12	}
13
14	async function updateAppointment(appointment: Appointment): Promise<Appointment> {
15	  return AppointmentRepository.saveOrUpdate(appointment)
16	}
17
18	export default function useUpdateAppointment(appointment: Appointment): updateAppointmentResult {
19	  const updateAppointmentError = validateAppointment(appointment)
20	  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {
21	    onSuccess: async () => {
22	      await queryCache.invalidateQueries('appointment')
23	    },
24	    throwOnError: true,
25	  })
26	  const result: updateAppointmentResult = {
27	    mutate,
28	    isLoading,
29	    isError,
30	    error: updateAppointmentError,
31	  }
32	  return result
33	}
34	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/title/TitleContext.tsx with line numbers:
1	import * as React from 'react'
2
3	type SetTitle = (title: string) => void
4	type State = { title: string }
5	type TitleProviderProps = { children: React.ReactNode }
6	const TitleStateContext = React.createContext<State | undefined>(undefined)
7	const TitleDispatchContext = React.createContext<SetTitle | undefined>(undefined)
8
9	function TitleProvider({ children }: TitleProviderProps) {
10	  const [title, setTitle] = React.useState('')
11	  return (
12	    <TitleStateContext.Provider value={{ title }}>
13	      <TitleDispatchContext.Provider value={setTitle}>{children}</TitleDispatchContext.Provider>
14	    </TitleStateContext.Provider>
15	  )
16	}
17	function useTitle() {
18	  const context = React.useContext(TitleStateContext)
19	  if (context === undefined) {
20	    throw new Error('useTitle must be used within a TitleProvider')
21	  }
22	  return context
23	}
24	function useUpdateTitle() {
25	  const context = React.useContext(TitleDispatchContext)
26	  if (context === undefined) {
27	    throw new Error('useUpdateTitle must be used within a TitleProvider')
28	  }
29	  return context
30	}
31	export { TitleProvider, useTitle, useUpdateTitle }
32	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/page-header/button-toolbar/ButtonBarProvider.tsx with line numbers:
1	import React, { useState } from 'react'
2
3	type Props = {
4	  children?: React.ReactNode
5	}
6
7	type ButtonUpdater = (buttons: React.ReactNode[]) => void
8
9	const ButtonBarStateContext = React.createContext<React.ReactNode[]>([])
10	const ButtonBarUpdateContext = React.createContext<ButtonUpdater>(() => {
11	  // empty initial state
12	})
13
14	function ButtonBarProvider(props: Props) {
15	  const { children } = props
16	  const [state, setState] = useState<React.ReactNode[]>([])
17	  return (
18	    <ButtonBarStateContext.Provider value={state}>
19	      <ButtonBarUpdateContext.Provider value={setState}>{children}</ButtonBarUpdateContext.Provider>
20	    </ButtonBarStateContext.Provider>
21	  )
22	}
23	function useButtons() {
24	  const context = React.useContext(ButtonBarStateContext)
25	  if (context === undefined) {
26	    throw new Error('useButtons must be used within a Button Bar Context')
27	  }
28	  return context
29	}
30	function useButtonToolbarSetter() {
31	  const context = React.useContext(ButtonBarUpdateContext)
32	  if (context === undefined) {
33	    throw new Error('useButtonToolBarSetter must be used within a Button Bar Context')
34	  }
35	  return context
36	}
37
38	export { ButtonBarProvider, useButtons, useButtonToolbarSetter }
39	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx with line numbers:
1	import { Spinner } from '@hospitalrun/components'
2	import React from 'react'
3
4	const Loading = () => <Spinner color="blue" loading size={20} type="BeatLoader" />
5
6	export default Loading
7	


bash
command
grep -r "isLoading\|Loading" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -30
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:  const [loading, setLoading] = useState(true)
/tmp/inputs/hospitalrun-frontend/src/App.tsx:          setLoading(false)
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  const { data, isLoading } = useIncident(incidentId)
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx:  const { data, isLoading } = useIncidents(searchRequest)
/tmp/inputs/hospitalrun-frontend/src/incidents/list/ViewIncidentsTable.tsx:  if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:  const { data, isLoading } = useIncidents(searchRequest)
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:    if (data === undefined || isLoading) {
/tmp/inputs/hospitalrun-frontend/src/incidents/visualize/VisualizeIncidents.tsx:  }, [data, monthlyIncidents, isLoading, incident])
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx:import Loading from '../../shared/components/Loading'
/tmp/inputs/hospitalrun-frontend/src/imagings/search/ImagingRequestTable.tsx:    return <Loading />
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/patients-slice.test.ts:      expect(patientsStore.isLoading).toBeFalsy()
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/patients-slice.test.ts:      expect(patientsStore.isLoading).toBeFalsy()
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx:const Loading = () => <Spinner color="blue" loading size={20} type="BeatLoader" />
/tmp/inputs/hospitalrun-frontend/src/shared/components/Loading.tsx:export default Loading
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  isLoading: boolean
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(createNewAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:    isLoading,
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  isLoading: boolean
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:  const [mutate, { isLoading, isError }] = useMutation(updateAppointment, {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:    isLoading,
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:import Loading from '../../shared/components/Loading'
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  const { data: appointments, isLoading } = useAppointments()
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:    if (appointments && !isLoading) {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  }, [appointments, isLoading])
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:  if (isLoading || appointments === undefined) {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:    return <Loading />
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/new/NewAppointment.tsx:    isLoading: isLoadingNewAppointment,
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/new/NewAppointment.tsx:  if (isLoadingNewAppointment) {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/edit/EditAppointment.tsx:  const { data: currentAppointment, isLoading: isLoadingAppointment } = useAppointment(id)


bash
command
grep -r "useSelector\|useDispatch" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | wc -l
output
77


bash
command
grep -r "@reduxjs/toolkit\|createSlice" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -15
output
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/breadcrumbs-slice.ts:import { createSlice, PayloadAction } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/page-header/breadcrumbs/breadcrumbs-slice.ts:const breadcrumbsSlice = createSlice({
/tmp/inputs/hospitalrun-frontend/src/shared/store/index.ts:import { configureStore, combineReducers, Action } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts:import { createSlice } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts:const componentSlice = createSlice({
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:import { createSlice, PayloadAction } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:const userSlice = createSlice({
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:import { createSlice, PayloadAction } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:const medicationSlice = createSlice({
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:import { createSlice, PayloadAction } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:const patientsSlice = createSlice({
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:import { createSlice, PayloadAction } from '@reduxjs/toolkit'
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:const patientSlice = createSlice({


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/public/index.html
output
Here's the content of /tmp/inputs/hospitalrun-frontend/public/index.html with line numbers:
1	<!DOCTYPE html>
2	<html lang="en">
3	  <head>
4	    <meta charset="utf-8" />
5	    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
6	    <meta name="viewport" content="width=device-width, initial-scale=1" />
7	    <meta name="theme-color" content="#1abc9c" />
8	    <meta
9	      name="description"
10	      content="HospitalRun"
11	    />
12	    <link rel="apple-touch-icon" href="logo.png" />
13	    <!--
14	      manifest.json provides metadata used when your web app is installed on a
15	      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
16	    -->
17	    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
18	    <!--
19	      Notice the use of %PUBLIC_URL% in the tags above.
20	      It will be replaced with the URL of the `public` folder during the build.
21	      Only files inside the `public` folder can be referenced from the HTML.
22
23	      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
24	      work correctly both with client-side routing and a non-root public URL.
25	      Learn how to configure a non-root public URL by running `npm run build`.
26	    -->
27	    <title>HospitalRun</title>
28	  </head>
29	  <body>
30	    <noscript>You need to enable JavaScript to run this app.</noscript>
31	    <div id="root"></div>
32	    <!--
33	      This HTML file is a template.
34	      If you open it directly in the browser, you will see an empty page.
35
36	      You can add webfonts, meta tags, or analytics to this file.
37	      The build step will place the bundled scripts into the <body> tag.
38
39	      To begin the development, run `npm start` or `yarn start`.
40	      To create a production bundle, use `npm run build` or `yarn build`.
41	    -->
42	  </body>
43	</html>
44	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/public/manifest.json
output
Here's the content of /tmp/inputs/hospitalrun-frontend/public/manifest.json with line numbers:
1	{
2	  "short_name": "HospitalRun",
3	  "name": "HospitalRun",
4	  "icons": [
5	    {
6	      "src": "favicon.ico",
7	      "sizes": "64x64 32x32 24x24 16x16",
8	      "type": "image/x-icon"
9	    },
10	    {
11	      "src": "logo.png",
12	      "type": "image/png",
13	      "sizes": "192x192"
14	    },
15	    {
16	      "src": "logo.png",
17	      "type": "image/png",
18	      "sizes": "512x512"
19	    }
20	  ],
21	  "start_url": ".",
22	  "display": "fullscreen",
23	  "theme_color": "#1abc9c",
24	  "background_color": "#fdfffc"
25	}
26	


bash
command
grep -r "sync\|replicate" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:              onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/incidents/view/ViewIncidentDetails.tsx:  const onResolve = async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useReportIncident.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:    onSuccess: async (data: Incident) => {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:  return async function requestImaging(request: ImagingRequest): Promise<void> {
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:                onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/__tests__/App.test.tsx:it('renders without crashing', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/new if the user does not have ReportIncident permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('The incident visualize screen when /incidents/visualize is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/visualize if the user does not have ViewIncidentWidgets permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('The view incident screen when /incidents/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/Incidents.test.tsx:      it('should not navigate to /incidents/:id if the user does not have ViewIncident permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a department form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a category form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a category item form element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('renders a description formField element that allows user input', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  // it(' renders action save button after all the input fields are filled out', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:  it('should display errors if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/report/ReportIncident.test.tsx:    it('should navigate to /incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the date of the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the status of the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render who reported the incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the date the incident was reported', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the department input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the category input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the categoryItem input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should render the description input with label and display value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncidentDetails.test.tsx:      it('should mark the status as resolved and fill in the resolved date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx:it('should not render ViewIncidentDetails if there are no Permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/view/ViewIncident.test.tsx:it('should not  ViewIncidentDetails no there is no ID', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should display a table of incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should display a download button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should populate export data correctly', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidentsTable.test.tsx:  it('should navigate to the view incident screen when view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/list/ViewIncidents.test.tsx:  it('should render a table with the incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncident.test.tsx:  it('should get an incident by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useResolvedIncident.test.tsx:  it('should mark incident as resolved and save', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useIncidents.test.tsx:  it('it should search incidents', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useReportIncident.test.tsx:  it('should save the incident with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/hooks/useReportIncident.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/util/validate-incident.test.ts:  it('should validate the required fields apart of an incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/incidents/util/validate-incident.test.ts:  it('should validate that the incident date is not a date in the future', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/Imagings.test.tsx:      it('should render the new imaging request screen when /imaging/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/Imagings.test.tsx:      it('should not navigate to /imagings/new if the user does not have RequestImaging permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useRequestImaging.test.tsx:  it('should save the imaging request with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useRequestImaging.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useImagingSearch.test.tsx:  it('it should search imaging requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/hooks/useImagingRequest.test.tsx:  it('should get an imaging request by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/search/ImagingRequestTable.test.tsx:  it('should render a table of imaging requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a dropdown list of visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders an image type input box', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a status types select input field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Renders a notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Navigate back to /imaging', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/requests/NewImagingRequest.test.tsx:    it('Save the imaging request and navigate to "/imaging"', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/imagings/util/validate-imaging-request.test.ts:  it('should validate the required fields apart of an incident', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:  docs.patients.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return a patient with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should escape all special chars from search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return all records that patient code matches search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should return all records that fullName contains search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should match search criteria with case insensitive match', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should find all patients in the database sorted by their ids', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate an id that is a uuid for the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate a patient code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should override the created date and last updated date even if one was passed in', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should save the patient if an id was not on the entity', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the patient if one was already existing', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the existing fields', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should add new fields without changing existing fields', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should update the last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should not update the created date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/PatientRepository.test.ts:    it('should delete the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should create an id that is a uuid', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should find an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should escape all special chars from search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/AppointmentRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:  docs.imagings.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should return a imaging with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate an id that is a uuid for the imaging', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate a imaging code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should generate a timestamp for created date and last updated date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/ImagingRepository.test.ts:    it('should override the created date and last updated date even if one was passed in', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:async function removeAllDocs() {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:  docs.labs.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:      docs.labs.forEach(async (d: any) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return a lab with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should generate a lab code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that lab type matches search text', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that contains search text in the type', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that contains search text in code', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should match search criteria with case insesitive match', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return all records that matches an specific status', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should return records with search text and specific status', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    afterEach(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/db/LabRepository.test.ts:    it('should find all labs in the database sorted by their requestedOn', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should login with the username and password', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should dispatch login error if login was not successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should logout the user', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/user/user-slice.test.ts:    it('should get the detail of the current user and update the store', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useUpdateAppointment.test.tsx:  it('should update appointment', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useScheduleAppointment.test.tsx:  it('should save the appointment with correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useScheduleAppointment.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useAppointments.test.tsx:  it('should get an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useDeleteAppointment.test.tsx:  it('should remove an appointment with the given id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/hooks/useAppointment.test.tsx:  it('should get an appointment by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the appointments screen when /appointments is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the new appointment screen when /appointments/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the edit appointment screen when /appointments/edit/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have read appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/Appointments.test.tsx:  it('should render the Dashboard when the user does not have write appointment privileges', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/ViewAppointments.test.tsx:  it('should add a "New Appointment" button to the button tool bar', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/ViewAppointments.test.tsx:  it('should render a calendar with the proper events', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should add a "Edit Appointment" button to the button tool bar if has WriteAppointment permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should add a "Delete Appointment" button to the button tool bar if has DeleteAppointment permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('button toolbar empty if has only ReadAppointments permission', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should call getAppointment by id if id is present', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should render an AppointmentDetailForm with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should delete the appointment after clicking the delete appointment button, and confirming in the delete confirmation modal', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/view/ViewAppointment.test.tsx:  it('should close the modal when the toggle button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should render an Appointment Detail Component', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should have error when error saving without patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should have error when error saving with end time earlier than start time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should call AppointmentRepo.save when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should navigate to /appointments/:id when a new appointment is created', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/new/NewAppointment.test.tsx:    it('should navigate back to /appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  const setup = async (mockAppointment: Appointment, mockPatient: Patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should load an appointment when component loads', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should updateAppointment when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should navigate to /appointments/:id when save is successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should navigate to /appointments/:id when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/scheduling/appointments/edit/EditAppointment.test.tsx:  it('should render an edit appointment form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display the patients full name', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the medication ', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the requested on date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should not display the canceled date if the medication is not canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:  it('should display the notes in the notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a warning badge if the status is draft', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a update medication and cancel medication button if the medication is in a draft state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display a danger badge if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should display the canceled on date if the medication request has been canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should not display cancel button if the medication is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should not display an update button if the medication is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should update the medication with the new information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/ViewMedication.test.tsx:    it('should mark the status as canceled and fill in the cancelled on date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/Medications.test.tsx:      it('should render the view medication screen when /medications/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/Medications.test.tsx:      it('should not navigate to /medications/:id if the user does not have ViewMedication permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:      it('should set status to loading', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should fetch the medication and patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should cancel a medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should call on success callback if provided', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should request a new medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should execute the onSuccess callback if provided', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should update the medication', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/medication-slice.test.ts:    it('should call the onSuccess callback if successful', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/hooks/useMedicationSearch.test.tsx:  it('it should search medication requests', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestSearch.test.tsx:  it('should render a select component with the default value', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should render a table with the correct columns', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should fetch medications and display it', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/MedicationRequestTable.test.tsx:  it('should navigate to the medication when the view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:  const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should display button to add new medication request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should not display button to add new medication request if the user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should render a table with data with the default search', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should render a medication request search component', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/search/ViewMedications.test.tsx:    it('should update the table when the search changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should render a medication input box with label', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication request status options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication intent options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('render medication priorty select options', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should render a notes text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should navigate back to /medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/medications/requests/NewMedicationRequest.test.tsx:    it('should save the medication request and navigate to "/medications/:id"', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:export default async function executeMutation<TResult>(
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-mutation.util.ts:  await act(async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/test-utils/use-query.util.tsx:export default async function executeQuery<TResult>(
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the view labs screen when /labs is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs if the user does not have ViewLabs permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the new lab request screen when /labs/new is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs/new if the user does not have RequestLab permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should render the view lab screen when /labs/:id is accessed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/Labs.test.tsx:      it('should not navigate to /labs/:id if the user does not have ViewLab permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:  jest.spyOn(LabRepository, 'saveOrUpdate').mockImplementation(async (newOrUpdatedLab) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it("should display the patients' full name", async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the lab-type', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the requested on date', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the completed date if the lab is not completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the cancelled date if the lab is not cancelled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should render a result text field', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display past notes if there is not', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the past notes that are not deleted', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should not display the past notes that are deleted', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display the notes text field empty', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should display errors', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a warning badge if the status is requested', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a update lab, complete lab, and cancel lab button if the lab is in a requested state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a danger badge if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display the cancelled on date if the lab request has been cancelled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display update, complete, and cancel button if the lab is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display notes text field if the status is canceled', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display a primary badge if the status is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should display the completed on date if the lab request has been completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display update, complete, and cancel buttons if the lab is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:      it('should not display notes text field if the status is completed', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should update the lab with the new information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should be able delete an note from the lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should mark the status as completed and fill in the completed date with the current time', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should disallow deleting notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should mark the status as canceled and redirect to /labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLab.test.tsx:    it('should disallow deleting notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should display button to add new lab request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should not display button to add new lab request if the user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should render a table with data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should navigate to the lab when the view button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should search for labs when dropdown changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/ViewLabs.test.tsx:    it('should search for labs after the search text has not changed for 500 milliseconds', async (): Promise<void> => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useCancelLab.test.ts:  it('should cancel a lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useUpdateLab.test.ts:  it('should update lab', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/labs/hooks/useRequestLab.test.ts:  it('should save new request lab', async () => {
< truncated lines 241-329 >
...re goals tab as active when route starts with /patients/:id/care-goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/view/ViewPatient.test.tsx:  it('should mark the visits tab as active when it is clicked and render the visit tab component when route is /patients/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/view/ViewPatient.test.tsx:  it('should render the visits tab as active when route starts with /patients/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render the history table headers', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render correct patient histories', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('render an action button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should navigate to lab record on lab history click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should navigate to appointment record on appointment history click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTable.test.tsx:    it('should render a warning message if there are no histories', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTab.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/history/HistoryTab.test.tsx:    it('should render patient history', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should render a general information form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should pass the error object to general information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should dispatch createPatient when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  // it('should reveal modal (return true) when save button is clicked if an existing patient has the same information', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should navigate to /patients/:id and display a message after a new patient is successfully created', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/new/NewPatient.test.tsx:  it('should navigate to /patients when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientCarePlan.test.tsx:  it('should get patient patient care plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should throw an error if related person not specified', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should throw an error if the relation type is not specified', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientRelatedPerson.test.tsx:  it('should add the related person to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientLabs.test.tsx:  it('should get patient labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCarePlan.test.tsx:  it('should add a care plan to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCarePlan.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientVisit.test.tsx:  it('should add a visit to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientVisit.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientNote.test.ts:  it('should throw an error if note validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientNote.test.ts:  it('should add the note to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientAppointments.test.tsx:  it(`should return the should return the patient's appointments`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatient.test.tsx:  it('should return the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientMedications.test.tsx:  it('should get patient medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useVisit.test.tsx:  it(`should return the should return the patient's visit`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useRemovePatientRelatedPerson.test.tsx:  it('should remove a related person with the given id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientVisits.test.tsx:  it(`should return the should return the patient's visits`, async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNote.test.ts:  it('should return a note given a patient id and note id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNote.test.ts:  it('should throw an error if patient does not have note with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddAllergy.test.tsx:  it('should throw an error if allergy validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddAllergy.test.tsx:  it('should add the allergy to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useCarePlan.test.tsx:  it('should return a care plan  given a patient id and care plan id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useCarePlan.test.tsx:  it('should throw an error if patient does not have care plan with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAllergy.test.tsx:  it('should return an allergy given a patient id and allergy id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAllergy.test.tsx:  it('should throw an error if patient does not have allergy with id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientNotes.test.ts:  it('should get patient notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientAllergies.test.tsx:  it('should get patient allergies', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatientRelatedPersons.test.tsx:  it('should get the patient by id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCareGoal.test.tsx:  it('should add a care goal to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddCareGoal.test.tsx:  it('should throw an error if validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should return a diagnosis successfully given a valid patient id and diagnosis id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should throw an error if patient id is not valid', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useDiagnosis.test.tsx:  it('should throw an error if patient id is valid but diagnosis id is not', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientDiagnosis.test.tsx:  it('should throw an error if diagnosis validation fails', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/useAddPatientDiagnosis.test.tsx:  it('should add the diaganosis to the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/hooks/usePatients.test.tsx:  it('should search patients with the proper search request', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should render a list of notes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should display a warning when no notes are present', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NotesList.test.tsx:  it('should navigate to the note view when the note is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:  it('should render a modal with the correct labels', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:  it('should render note error', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:    it('should call the onCloseButtonCLick function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/NewNoteModal.test.tsx:    it('should dispatch add note', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/notes/ViewNote.test.tsx:  it('should render a note input with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should render an edit patient form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should load a Patient when component loads', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should dispatch updatePatient when save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/edit/EditPatient.test.tsx:  it('should navigate to /patients/:id when cancel is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/ViewPatientsTable.test.tsx:  it('should display no patients exist if total patient count is 0', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/ViewPatientsTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/SearchPatients.test.tsx:  it('should render a view patients table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/search/SearchPatients.test.tsx:  it('should update view patients table search request when patient search input changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnoses.test.tsx:const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnoses.test.tsx:  it('should render a diagnoses table with the patient id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:const setup = async (patient = expectedPatient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should navigate to the diagnosis view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/DiagnosisTable.test.tsx:  it('should display a warning if there are no diagnoses', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render the loading spinner only while diagnosis data is being fetched', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render the diagnosis name', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/ViewDiagnosis.test.tsx:  it('should render a diagnosis form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/AddDiagnosisModal.test.tsx:  it('should dispatch add diagnosis when the save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/AddDiagnosisModal.test.tsx:  it('should call the on close function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:const setup = async (patient = expectedPatient, permissions = [Permissions.AddDiagnosis]) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:    it('should render an add diagnoses button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/diagnoses/Diagnoses.test.tsx:    it('should open the Add Diagnosis Modal', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoals.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoals.test.tsx:  it('should render a care goals table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should not render add care goal button if user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should be able to create a new care goal if user has permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should open and close the modal when the add care goal and close buttons are clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should render care goal table when on patients/:id/care-goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTab.test.tsx:  it('should render care goal view when on patients/:id/care-goals/:careGoalId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/ViewCareGoal.test.tsx:  it('should render the care goal form', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  const setup = async (expectedPatient = patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should navigate to the care goal view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalTable.test.tsx:  it('should display a warning if there are no care goals', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalForm.test.tsx:  it('should call onChange handler when description changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-goals/CareGoalForm.test.tsx:  it('should render the forms field in an error state', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  const setup = async (expectedPatient = patient) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should navigate to the care plan view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTable.test.tsx:  it('should display a warning if there are no care plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlans.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlans.test.tsx:  it('should render a care plans table with the patient id', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlan.test.tsx:  const setup = async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/ViewCarePlan.test.tsx:  it('should render the care plan title', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/AddCarePlanModal.test.tsx:  it('should call the on close function when the cancel button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/AddCarePlanModal.test.tsx:  it('should save care plan when the save button is clicked and close', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanForm.test.tsx:  it('should render a condition selector with the diagnoses from the patient', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanForm.test.tsx:  it('should call the on change handler when condition changes', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  const setup = async (route: string, permissions: Permissions[]) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render an add care plan button if user has correct permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should open the add care plan modal on click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should close the modal when the close button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should not render care plan button if user does not have permissions', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render the care plans table when on /patient/:id/care-plans', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/care-plans/CarePlanTab.test.tsx:  it('should render the care plan view when on /patient/:id/care-plans/:carePlanId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should render a table', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should navigate to the visit view when the view details button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTable.test.tsx:  it('should display a warning if there are no visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/AddVisitModal.test.tsx:  it('should save the visit when the save button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/ViewVisit.test.tsx:  it('should render the visit reason', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/ViewVisit.test.tsx:  it('should render a visit form with the correct data', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should close the modal when the close button is clicked', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should render the visits table when on /patient/:id/visits', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/visits/VisitTab.test.tsx:  it('should render the visit view when on /patient/:id/visits/:visitId', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a list of appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should navigate to appointment profile on appointment click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a warning message if there are no appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a new appointment button if there is an appointment', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should render a new appointment button if there are no appointments', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/appointments/AppointmentsList.test.tsx:    it('should navigate to new appointment page', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:const setup = async (patient = expectedPatient, medications = expectedMedications) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render patient medications table headers', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render patient medication list', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('render an action button', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should navigate to medication view on medication click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/MedicationsList.test.tsx:  it('should render a warning message if there are no medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/Medications.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/medications/Medications.test.tsx:    it('should render patient medications', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/Labs.test.tsx:const setup = async (
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/Labs.test.tsx:    it('should render patient labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:const setup = async (patient = expectedPatient, labs = expectedLabs) => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should render a list of labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should navigate to lab view on lab click', async () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/patients/labs/LabsList.test.tsx:  it('should render a warning message if there are no labs', async () => {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async find(id: string): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async findAll(sort = Unsorted): Promise<T[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:        async (s): Promise<SortRequest> => {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async count(): Promise<number> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async search(criteria: any): Promise<T[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async save(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async saveOrUpdate(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/Repository.ts:  async delete(entity: T): Promise<T> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async search(container: SearchContainer): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async save(entity: Medication): Promise<Medication> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/MedicationRepository.ts:  async findAllByPatientId(patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async search(text: string): Promise<Patient[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async save(entity: Patient): Promise<Patient> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async createIndex() {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getAppointments(patientId: string): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getLabs(patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/PatientRepository.ts:  async getMedications(patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/IncidentRepository.ts:  async search(options: SearchOptions): Promise<Incident[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async search(container: SearchContainer): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async save(entity: Lab): Promise<Lab> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  async findAllByPatientId(patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts:  async search(container: SearchContainer): Promise<Imaging[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts:  async save(entity: Imaging): Promise<Imaging> {
/tmp/inputs/hospitalrun-frontend/src/shared/db/AppointmentRepository.ts:  async searchPatientAppointments(patientId: string, text: string): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/shared/components/component-slice.ts:export const updateSidebar = (): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:  localDb.sync(serverDb, { live: true, retry: true })
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:        hasMany: { type: 'appointment', options: { queryInverse: 'patient', async: true } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:      labs: { hasMany: { type: 'lab', options: { queryInverse: 'patient', async: true } } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:        hasMany: { type: 'medication', options: { queryInverse: 'patient', async: true } },
/tmp/inputs/hospitalrun-frontend/src/shared/config/pouchdb.ts:      imagings: { hasMany: { type: 'imaging', options: { queryInverse: 'patient', async: true } } },
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const getCurrentSession = (username: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const login = (username: string, password: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/user/user-slice.ts:export const logout = (): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useAppointments.tsx:async function fetchAppointments(): Promise<Appointment[]> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:async function createNewAppointment(appointment: Appointment): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useScheduleAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:async function deleteAppointment(request: deleteAppointmentRequest): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useDeleteAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:async function updateAppointment(appointment: Appointment): Promise<Appointment> {
/tmp/inputs/hospitalrun-frontend/src/scheduling/hooks/useUpdateAppointment.tsx:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/AppointmentDetailForm.tsx:              onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/scheduling/appointments/ViewAppointments.tsx:      appointments.map(async (appointment: Appointment) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:export const fetchMedication = (medicationId: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch, getState) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/medication-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/medications/ViewMedication.tsx:  const onUpdate = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/ViewMedication.tsx:  const onCancel = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/requests/NewMedicationRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/medications/requests/NewMedicationRequest.tsx:            onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const deleteNote = async (noteIdToDelete: string) => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onUpdate = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onComplete = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:  const onCancel = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/ViewLab.tsx:                  <Button icon="remove" onClick={async () => deleteNote(note.id)} color="danger">
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useRequestLab.ts:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCancelLab.ts:    onSuccess: async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:    onSuccess: async (data) => {
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useUpdateLab.ts:    onSuccess: async (data) => {
/tmp/inputs/hospitalrun-frontend/src/labs/requests/NewLabRequest.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/labs/requests/NewLabRequest.tsx:                onSearch={async (query: string) => PatientRepository.search(query)}
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:export const fetchPatients = (sortRequest: SortRequest = Unsorted): AppThunk => async (
/tmp/inputs/hospitalrun-frontend/src/patients/patients-slice.ts:export const searchPatients = (searchString: string): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/patient-slice.ts:): AppThunk => async (dispatch) => {
/tmp/inputs/hospitalrun-frontend/src/patients/allergies/NewAllergyModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/AddRelatedPersonModal.tsx:  const onSearch = async (query: string) => {
/tmp/inputs/hospitalrun-frontend/src/patients/related-persons/AddRelatedPersonModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:async function removeRelatedPerson(request: removeRelatedPersonRequest): Promise<RelatedPerson[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:        data.map(async (rp) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx:async function addDiagnosis(request: AddDiagnosisRequest): Promise<Diagnosis[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCarePlans.tsx:async function fetchPatientCarePlans(_: string, patientId: string): Promise<CarePlan[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientCareGoals.tsx:async function fetchPatientCareGoals(_: string, patientId: string): Promise<CareGoal[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientVisits.tsx:async function fetchPatientVisits(_: string, patientId: string): Promise<Visit[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientRelatedPersons.tsx:async function fetchPatientRelatedPersons(
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientRelatedPersons.tsx:    relatedPersons.map(async (person) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx:async function addAllergy(request: AddAllergyRequest): Promise<Allergy[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCarePlan.tsx:async function getCarePlan(_: string, patientId: string, allergyId: string): Promise<CarePlan> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useVisit.tsx:async function fetchVisit(
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx:async function addCarePlan(request: AddCarePlanRequest): Promise<CarePlan[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientDiagnoses.tsx:async function fetchPatientDiagnoses(_: string, patientId: string): Promise<Diagnosis[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNotes.tsx:async function fetchPatientNotes(_: string, patientId: string): Promise<Note[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx:async function addNote(request: AddNoteRequest): Promise<Note[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx:async function addVisit(request: AddVisitRequest): Promise<Visit[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientLabs.tsx:async function fetchPatientLabs(_: string, patientId: string): Promise<Lab[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx:async function addCareGoal(request: AddCareGoalRequest): Promise<CareGoal[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientNote.tsx:async function getNote(_: string, patientId: string, noteId: string): Promise<Note> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAllergy.tsx:async function getAllergy(_: string, patientId: string, allergyId: string): Promise<Allergy> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useCareGoal.tsx:async function getCareGoal(_: string, patientId: string, careGoalId: string): Promise<CareGoal> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAppointments.tsx:async function fetchPatientAppointments(_: string, patientId: string): Promise<Appointments[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientAllergies.tsx:async function fetchPatientAllergies(_: string, patientId: string): Promise<Allergy[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:async function addRelatedPerson(request: AddRelatedPersonRequest): Promise<RelatedPerson[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:    onSuccess: async (data, variables) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:        data.map(async (rp) => {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatients.tsx:async function fetchPatients(_: any, searchRequest: PatientSearchRequest): Promise<PatientsResult> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useDiagnosis.tsx:async function getDiagnosis(_: string, patientId: string, diagnosisId: string): Promise<Diagnosis> {
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatientMedications.tsx:async function fetchPatientMedications(_: string, patientId: string): Promise<Medication[]> {
/tmp/inputs/hospitalrun-frontend/src/patients/notes/NewNoteModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/edit/EditPatient.tsx:  const onSave = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/diagnoses/AddDiagnosisModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/care-goals/AddCareGoalModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/care-plans/AddCarePlanModal.tsx:  const onSaveButtonClick = async () => {
/tmp/inputs/hospitalrun-frontend/src/patients/visits/AddVisitModal.tsx:  const onSaveButtonClick = async () => {

Let me look at more specific optimization patterns:

bash
command
grep -r "useEffect\|cleanup" /tmp/inputs/hospitalrun-frontend/src/App.tsx
output
import React, { Suspense, useEffect, useState } from 'react'
useEffect(() => {


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useUpdateEffect.ts with line numbers:
1	import { useRef, useEffect, EffectCallback } from 'react'
2
3	export default function (effect: EffectCallback, dependencies: any[]): void {
4	  const isInitialMount = useRef(true)
5
6	  useEffect(() => {
7	    if (isInitialMount.current) {
8	      isInitialMount.current = false
9	      return
10	    }
11	    // eslint-disable-next-line consistent-return
12	    return effect && effect()
13	  }, dependencies) //eslint-disable-line
14	}
15	


bash
command
grep -r "useUpdateEffect" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useUpdateEffect.test.ts:import useUpdateEffect from '../../../shared/hooks/useUpdateEffect'
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useUpdateEffect.test.ts:describe('useUpdateEffect', () => {
/tmp/inputs/hospitalrun-frontend/src/__tests__/shared/hooks/useUpdateEffect.test.ts:    const { rerender } = renderHook(() => useUpdateEffect(mockFn, [someVal]))


bash
command
grep -r "cancelled\|cancel\|abort\|cleanup" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | grep -v test | head -15
output
/tmp/inputs/hospitalrun-frontend/src/App.tsx:    let cancelled = false
/tmp/inputs/hospitalrun-frontend/src/App.tsx:        if (cancelled) {
/tmp/inputs/hospitalrun-frontend/src/App.tsx:        if (!cancelled) {
/tmp/inputs/hospitalrun-frontend/src/App.tsx:      cancelled = true
/tmp/inputs/hospitalrun-frontend/src/incidents/report/ReportIncident.tsx:            {t('actions.cancel')}
/tmp/inputs/hospitalrun-frontend/src/imagings/model/ImagingSearchRequest.ts:  status: 'completed' | 'requested' | 'canceled' | 'all'
/tmp/inputs/hospitalrun-frontend/src/imagings/hooks/useRequestImaging.tsx:  status: 'completed' | 'requested' | 'canceled'
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:    { label: t('imagings.status.canceled'), value: 'canceled' },
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:      status: value as 'completed' | 'canceled' | 'requested',
/tmp/inputs/hospitalrun-frontend/src/imagings/requests/NewImagingRequest.tsx:              {t('actions.cancel')}
/tmp/inputs/hospitalrun-frontend/src/imagings/util/validate-imaging-request.ts:const statusType: string[] = ['requested', 'completed', 'canceled']
/tmp/inputs/hospitalrun-frontend/src/shared/db/LabRepository.ts:  status: 'requested' | 'completed' | 'canceled' | 'all'
/tmp/inputs/hospitalrun-frontend/src/shared/db/ImagingRepository.ts:  status: 'requested' | 'completed' | 'canceled' | 'all'
/tmp/inputs/hospitalrun-frontend/src/shared/model/Lab.ts:  status: 'requested' | 'completed' | 'canceled'
/tmp/inputs/hospitalrun-frontend/src/shared/model/Lab.ts:  canceledOn?: string


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx with line numbers:
1	import { useQuery } from 'react-query'
2
3	import PatientRepository from '../../shared/db/PatientRepository'
4	import Patient from '../../shared/model/Patient'
5
6	function fetchPatient(_: any, id?: string): Promise<Patient> {
7	  return PatientRepository.find(id || '')
8	}
9
10	export default function usePatient(id?: string) {
11	  return useQuery(['patient', id], fetchPatient, { enabled: id })
12	}
13	


bash
command
grep -r "enabled:" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/usePatient.tsx:  return useQuery(['patient', id], fetchPatient, { enabled: id })


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts with line numbers:
1	import isEmpty from 'lodash/isEmpty'
2	import { useMutation, queryCache } from 'react-query'
3
4	import LabRepository from '../../shared/db/LabRepository'
5	import Lab from '../../shared/model/Lab'
6	import { validateLabComplete } from '../utils/validate-lab'
7
8	function completeLab(lab: Lab): Promise<Lab> {
9	  const completeLabErrors = validateLabComplete(lab)
10
11	  if (isEmpty(completeLabErrors)) {
12	    const completedLab: Lab = {
13	      ...lab,
14	      completedOn: new Date(Date.now().valueOf()).toISOString(),
15	      status: 'completed',
16	    }
17
18	    return LabRepository.saveOrUpdate(completedLab)
19	  }
20
21	  throw completeLabErrors
22	}
23
24	export default function useCompleteLab() {
25	  return useMutation(completeLab, {
26	    onSuccess: async (data) => {
27	      queryCache.setQueryData(['lab', data.id], data)
28	      await queryCache.invalidateQueries('labs')
29	    },
30	    throwOnError: true,
31	  })
32	}
33	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx with line numbers:
1	import { queryCache, useMutation } from 'react-query'
2
3	import IncidentRepository from '../../shared/db/IncidentRepository'
4	import Incident from '../../shared/model/Incident'
5
6	function resolveIncident(incident: Incident): Promise<Incident> {
7	  return IncidentRepository.saveOrUpdate({
8	    ...incident,
9	    resolvedOn: new Date(Date.now()).toISOString(),
10	    status: 'resolved',
11	  })
12	}
13
14	export default function useResolveIncident() {
15	  return useMutation(resolveIncident, {
16	    onSuccess: async (data: Incident) => {
17	      queryCache.setQueryData(['incident', data.id], data)
18	    },
19	  })
20	}
21	


bash
command
grep -r "PrivateRoute" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts" | head -10
output
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:import PrivateRoute from '../shared/components/PrivateRoute'
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx:import PrivateRoute from '../shared/components/PrivateRoute'
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/imagings/Imagings.tsx:      <PrivateRoute
/tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx:const PrivateRoute = ({ component, isAuthenticated, ...rest }: any) => {
/tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx:export default PrivateRoute


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/components/PrivateRoute.tsx with line numbers:
1	import React from 'react'
2	import { Route, Redirect } from 'react-router-dom'
3
4	const PrivateRoute = ({ component, isAuthenticated, ...rest }: any) => {
5	  const routeComponent = (props: any) =>
6	    isAuthenticated ? React.createElement(component, props) : <Redirect to={{ pathname: '/' }} />
7	  return <Route {...rest} render={routeComponent} />
8	}
9
10	export default PrivateRoute
11	


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/incidents/Incidents.tsx with line numbers:
1	import React from 'react'
2	import { useSelector } from 'react-redux'
3	import { Switch } from 'react-router-dom'
4
5	import useAddBreadcrumbs from '../page-header/breadcrumbs/useAddBreadcrumbs'
6	import PrivateRoute from '../shared/components/PrivateRoute'
7	import Permissions from '../shared/model/Permissions'
8	import { RootState } from '../shared/store'
9	import ViewIncidents from './list/ViewIncidents'
10	import ReportIncident from './report/ReportIncident'
11	import ViewIncident from './view/ViewIncident'
12	import VisualizeIncidents from './visualize/VisualizeIncidents'
13
14	const Incidents = () => {
15	  const { permissions } = useSelector((state: RootState) => state.user)
16	  const breadcrumbs = [
17	    {
18	      i18nKey: 'incidents.label',
19	      location: `/incidents`,
20	    },
21	  ]
22	  useAddBreadcrumbs(breadcrumbs, true)
23
24	  return (
25	    <Switch>
26	      <PrivateRoute
27	        isAuthenticated={permissions.includes(Permissions.ViewIncidents)}
28	        exact
29	        path="/incidents"
30	        component={ViewIncidents}
31	      />
32	      <PrivateRoute
33	        isAuthenticated={permissions.includes(Permissions.ReportIncident)}
34	        exact
35	        path="/incidents/new"
36	        component={ReportIncident}
37	      />
38	      <PrivateRoute
39	        isAuthenticated={permissions.includes(Permissions.ViewIncidentWidgets)}
40	        exact
41	        path="/incidents/visualize"
42	        component={VisualizeIncidents}
43	      />
44	      <PrivateRoute
45	        isAuthenticated={permissions.includes(Permissions.ViewIncident)}
46	        exact
47	        path="/incidents/:id"
48	        component={ViewIncident}
49	      />
50	    </Switch>
51	  )
52	}
53
54	export default Incidents
55	


bash
command
grep -r "setQueryData" /tmp/inputs/hospitalrun-frontend/src --include="*.tsx" --include="*.ts"
output
/tmp/inputs/hospitalrun-frontend/src/incidents/hooks/useResolveIncident.tsx:      queryCache.setQueryData(['incident', data.id], data)
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useCompleteLab.ts:      queryCache.setQueryData(['lab', data.id], data)
/tmp/inputs/hospitalrun-frontend/src/labs/hooks/useUpdateLab.ts:      queryCache.setQueryData(['lab', data.id], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useRemovePatientRelatedPerson.tsx:      await queryCache.setQueryData(['related-persons', variables.patientId], relatedPersons)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientDiagnosis.tsx:      await queryCache.setQueryData(['diagnoses', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddAllergy.tsx:      await queryCache.setQueryData(['allergies', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCarePlan.tsx:      await queryCache.setQueryData(['care-plans', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientNote.tsx:      await queryCache.setQueryData(['notes', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddVisit.tsx:      await queryCache.setQueryData(['visits', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddCareGoal.tsx:      await queryCache.setQueryData(['care-goals', variables.patientId], data)
/tmp/inputs/hospitalrun-frontend/src/patients/hooks/useAddPatientRelatedPerson.tsx:      await queryCache.setQueryData(['related-persons', variables.patientId], relatedPersons)


str_replace_based_edit_tool
command
view
path
/tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts
output
Here's the content of /tmp/inputs/hospitalrun-frontend/src/shared/hooks/useTranslator.ts with line numbers:
1	import { useCallback } from 'react'
2	import { useTranslation } from 'react-i18next'
3
4	export default function useTranslator() {
5	  const { t } = useTranslation()
6
7	  const translate = useCallback((key: any): any => (key !== undefined ? t(key) : undefined), [t])
8
9	  return {
10	    t: translate,
11	  }
12	}
13	

Based on my thorough exploration of the codebase, here are the major frontend optimization techniques implemented throughout this HospitalRun web application:

## 1. **Server-Side Data Caching with React Query**
The application extensively uses `react-query` for data fetching and caching. This is one of the most significant optimizations. The custom hooks like `usePatient`, `useIncidents`, `useAppointments`, etc. all leverage `useQuery` which automatically caches data, deduplicates requests, and provides background refetching. When mutations happen (via `useMutation`), the cache is intelligently updated using `queryCache.setQueryData()` for optimistic updates or `queryCache.invalidateQueries()` to trigger refetches. This avoids unnecessary network requests and keeps the UI responsive.

## 2. **Offline-First Architecture with PouchDB**
The app uses PouchDB as a local database that syncs with a remote CouchDB server (`localDb.sync(serverDb, { live: true, retry: true })`). This enables the app to work offline and provides faster data access since reads hit the local database first. The relational-pouch plugin enables relational data modeling. The app also tracks network status with a `useNetworkStatus` hook to display appropriate messages when the user goes offline/online.

## 3. **Service Worker for Progressive Web App (PWA)**
The service worker is registered in production (`serviceWorker.register()`), enabling caching of static assets for faster subsequent loads and offline capability. The app includes a web manifest for installation as a PWA.

## 4. **Input Debouncing**
The `useDebounce` custom hook delays search queries by 500ms, preventing excessive API calls while the user is typing. This is used in patient search inputs and lab search fields, reducing server load and improving perceived performance.

## 5. **Memoization with useCallback**
The app uses `useCallback` throughout for functions that are passed as props or used in dependency arrays (like toolbar button getters and the translation wrapper). This prevents unnecessary re-renders by maintaining stable function references.

## 6. **React Suspense for Loading States**
The root App component wraps content in `<Suspense>` with a spinner fallback, allowing for graceful loading states during async operations.

## 7. **Database Indexing**
Repositories proactively create database indexes on frequently queried fields. For example, `PatientRepository` creates indexes on `_id`, `fullName`, and `code`, and `AppointmentRepository` indexes `patient` and `_id`. This speeds up search and sort operations.

## 8. **Context-Based State Management for UI State**
Instead of putting everything in Redux, the app uses React Context for localized UI state like page titles (`TitleContext`) and toolbar buttons (`ButtonBarProvider`). This avoids global re-renders for purely local UI concerns.

## 9. **Redux Toolkit for Efficient State Updates**
The app uses `@reduxjs/toolkit` with `createSlice`, which uses Immer under the hood for immutable state updates without verbose spread operations. The store configuration is minimal and well-organized.

## 10. **Conditional Query Execution**
Some queries use the `enabled` option (like `usePatient`) to prevent queries from running until required data is available, avoiding wasted requests.

## 11. **Cleanup in useEffect**
The App component uses a cleanup pattern with a `cancelled` flag to prevent state updates after component unmount, preventing memory leaks and race conditions.

## 12. **useUpdateEffect Hook**
A custom hook that skips the initial mount effect, reducing unnecessary operations when a component first renders.

## 13. **Lazy Permission-Based Rendering**
The `PrivateRoute` component prevents rendering of protected components until authentication is confirmed, and conditionally renders based on permissions rather than fetching data that won't be used.


4. Now write the ideal answer, model a  summary, model a feedback,  model b summary model b feedback,justification. i want same level of details and evidence and writing style and lenght like this sample THIS IS SAMPLE FOR you below, READ CAREFULLY: 


SUPER IMPORTANT RULE YOU MUST FOLLOW. YOU MUST WRITE SAME WAY SAME QUALITY SAME FORMAT SAME STYLE AS SAMPLE BELOW!@!!!!!!!

——SAMPLE:—
—Every below is sample—

Ideal Response.

This ideal answer should clearly describe how Spring Petclinic wires its components through dependency injection using common patterns like constructor based injection, component scanning, and configuration-driven bean factories ...etc, and even dive deeper to explain how controllers (e.g.,src/main/java/org/springframework/samples/petclinic/owner/OwnerController.java) declare all the collaborators in the constructors rather than in the fields, how stereotype annotations make those classes eligible for autodetection, how the repository abstractions are injected as interfaces implemented by the Spring Data JPA, and how @Configuration classes expose shared infrastructure beans that all the other components consume.
Model must explain that Spring Petclinic leans on constructor-based dependency injection to keep controllers explicit and testable. For example, it should explain controller like spring-petclinic/src/main/java/org/springframework/samples/petclinic/owner/OwnerController.java is annotated with @Controller and declares a single constructor that takes an OwnerRepository, which has the role of letting Spring populate the dependency while preventing partially constructed instance. Model should point out that the controller never uses field injection or @Autowired on members, so the required collaborator is enforced at creation time. For example, in src/main/java/org/springframework/samples/petclinic/vet/VetController.java, whose constructor requires a VetRepository and assigns it to a final field, it is also relying on the container to supply the repository proxy. Even non-controller components follow this approach, for example src/main/java/org/springframework/samples/petclinic/owner/PetTypeFormatter.java, which is a @Component that exposes a Formatter<PetType> but takes its PetTypeRepository in the constructor, which is keeping parsing logic decoupled from storage details while still making the repository mandatory for instantiation.
Model must also explain repository layer demonstrates interface-driven injection. Interfaces such as spring-petclinic/src/main/java/org/springframework/samples/petclinic/owner/OwnerRepository.java extend Spring Data JPA’s JpaRepository, which is letting the framework auto-create runtime proxies that satisfy the dependency signatures declared in controllers and formatters.
Overall, the dependency injection explanation should ideally go deep and cover how @SpringBootApplication bootstraps component scanning, constructors declare required collaborators, repositories are injected as interfaces backed by generated proxies, and @Configuration classes publish shared infrastructure as beans.



Model A Response Summary

Model A did pretty well because it correctly identifiy constructor-based injection as the major dominant pattern and notes the absence of @Autowired, aligning with controllers like OwnerController and VetController that declare single-argument constructors for their repositories, which are src/main/java/org/springframework/samples/petclinic/owner/OwnerController.java and src/main/java/org/springframework/samples/petclinic/vet/VetController.java,. It also correctly observes that PetTypeFormatter uses constructor injection as a component, which matches the formatters’ constructor-driven PetTypeRepository dependency. It points out that in src/main/java/org/springframework/samples/petclinic/owner/PetTypeFormatter.java, the response highlights component scanning via the stereotype annotations and the role of repository interfaces that Spring Data implements at runtime, dynamically, and consistent with the JpaRepository extension inside src/main/java/org/springframework/samples/petclinic/owner/OwnerRepository.java.  Overall, the summary gives good overview of the core DI patterns present in the codebase.
Model A Response Feedback

the answer is strong on constructor injection and the lack of @Autowired, both supported by the controller and formatter classes cited in summary above, which are very impressive findings in my opinion as tehy’re not that obvious. One area it could be improved is by referencing configuration-driven beans such as the cache and locale interceptors declared in CacheConfiguration and WebConfiguration , to show that DI also wires infrastructure services, not just repositories and controllers in files like src/main/java/org/springframework/samples/petclinic/system/CacheConfiguration,main/java/org/springframework/samples/petclinic/system/WebConfiguration.java. Mentioning of @SpringBootApplication as the trigger for component scanning would further strengthen the explanation by tying bean discovery to the application entry point in src/main/java/org/springframework/samples/petclinic/PetClinicApplication.java. These additions would align the response even more tightly with the full range of DI patterns in the repo. But overall, the model did pretty well despite these issues.

Model B Response Summary

Model B repeats the constructor-injection narrative and cites the same controllers (OwnerController, PetController, VetController, VisitController) and the PetTypeFormatter component under main/java/org/springframework/samples/petclinic/*, matching their constructor-based repository dependencies.It notes the absence of @Autowired/@Inject and correctly attributes bean registration to stereotype annotations and Spring Data proxies for repositories like OwnerRepository in src/main/java/org/springframework/samples/petclinic/owner/OwnerRepository.java†. The summary emphasizes constructor injection benefits but remains fairly high-level. Overall the model did not give an in-depth explanation and i believe the model did not really check the code thoroughly for the explanation. 
Model B Response Feedback

While this model is technically accurate about constructor injection and stereotype-based registration, but Model B stays generic and omits key DI elements present in the code which are obvious and should not be missed at all! It does not even mention the configuration classes that publish infrastructure beans (e.g., cache customization or locale handling), which are central examples of DI beyond the configurations like src/main/java/org/springframework/samples/petclinic/system/CacheConfiguration,src/main/java/org/springframework/samples/petclinic/system/WebConfiguration.java. The response also overlooks the @SpringBootApplication entry point that enables component scanning for all these beans such as in src/main/java/org/springframework/samples/petclinic/PetClinicApplication.java.Compared to Model A, it provides less depth on how DI wiring spans both application endpoints and shared infrastructure.
Overall Preference Justification

Model A is way better because it balances correctness about constructor injection with explicit recognition of repository interfaces and the role of component scanning, closely matching the structure seen in controllers, formatters, and repositories...etc such as src/main/java/org/springframework/samples/petclinic/owner/OwnerController.java,src/main/java/org/springframework/samples/petclinic/owner/PetTypeFormatter.java,src/main/java/org/springframework/samples/petclinic/owner/OwnerRepository.java, Although both models miss some configuration details, Model A surfaces more of the actual DI practices visible in the code and provides a clearer link between stereotypes and injection than Model B, which remains more generic and omits infrastructure wiring examples such as ,src/main/java/org/springframework/samples/petclinic/system/CacheConfiguration.java,src/main/java/org/springframework/samples/petclinic/system/WebConfiguration.java.....etc. Therefore, Model A offers the stronger, more code-grounded explanation in my opinion.
